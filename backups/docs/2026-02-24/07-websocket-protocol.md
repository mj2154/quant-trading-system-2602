# TradingView åç«¯ API è§„èŒƒè®¾è®¡æ–¹æ¡ˆï¼ˆçº¯ WebSocket æ¶æ„ - v2.0ï¼‰

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£æè¿°äº†ä¸€ä¸ªåŸºäº**çº¯ WebSocket æ¶æ„**çš„å®Œæ•´åç«¯ API è®¾è®¡æ–¹æ¡ˆ v2.0ï¼Œç”¨äºä¸º TradingView å›¾è¡¨åº“æä¾›æ•°æ®æœåŠ¡ã€‚æ–¹æ¡ˆé‡‡ç”¨**å•ä¸€ WebSocket è¿æ¥**è®¾è®¡ï¼Œæ‰€æœ‰è¯·æ±‚ï¼ˆé…ç½®ã€æœç´¢ã€Kçº¿ã€æ—¶é—´ç­‰ï¼‰éƒ½é€šè¿‡ WebSocket æ¶ˆæ¯å®Œæˆï¼Œç¡®ä¿ä¸å‰ç«¯å›¾è¡¨ç»„ä»¶æ— ç¼é›†æˆã€‚

**v2.1 æ ¸å¿ƒæ”¹è¿›** (2026-02-10):
- ğŸš€ **Ack å“åº”ç²¾ç®€** - data æ”¹ä¸ºç©ºå¯¹è±¡ `{}`ï¼Œç§»é™¤å†—ä½™ message å­—æ®µ
- ğŸš€ **å‘½ååŒºåˆ†** - å®æ—¶æ¨é€ä½¿ç”¨ `content`ï¼Œé¿å…ä¸æ•°æ®åº“ tasks è¡¨çš„ payload æ··æ·†

**v2.0 æ ¸å¿ƒæ”¹è¿›**ï¼š
- ğŸš€ **ç®€æ´è®¢é˜…æ ¼å¼** - ä½¿ç”¨è®¢é˜…é”®ç›´æ¥è¡¨è¾¾æ•°æ®éœ€æ±‚ï¼Œå¦‚ `BINANCE:BTCUSDT@KLINE_1`
- ğŸš€ **å»é™¤å†—ä½™å­—æ®µ** - å®æ—¶æ•°æ®æ¨é€ç›´æ¥ä½¿ç”¨ TradingView å…¼å®¹æ ¼å¼
- ğŸš€ **ç®€åŒ–API** - è®¢é˜…é”®ç›´æ¥ç¼–ç æ•°æ®ç±»å‹å’Œåˆ†è¾¨ç‡ï¼Œæ— éœ€é¢å¤–å­—æ®µ
- ğŸš€ **å¤§å°å†™ä¸€è‡´æ€§** - å‰ç«¯å‘é€çš„è®¢é˜…é”®ä¸å†…éƒ¨å­˜å‚¨æ ¼å¼å®Œå…¨ä¸€è‡´ï¼Œæ— éœ€å¤§å°å†™è½¬æ¢
- ğŸš€ **æ ¼å¼ç»Ÿä¸€** - `type` å­—æ®µå§‹ç»ˆä½äº `data` å†…éƒ¨ï¼Œè¯·æ±‚å“åº”æ ¼å¼å®Œå…¨å¯¹ç§°
- âœ… **çº¯ WebSocket æ¶æ„** - æ—  REST API ç«¯ç‚¹ï¼Œæ‰€æœ‰äº¤äº’é€šè¿‡ WebSocket
- âœ… **ç»Ÿä¸€æ¶ˆæ¯åè®®** - æ‰€æœ‰è¯·æ±‚/å“åº”ä½¿ç”¨ç»Ÿä¸€ JSON æ ¼å¼
- âœ… **è¯­ä¹‰åŒ–äº¤æ˜“å¯¹å‘½å** - é‡‡ç”¨ `EXCHANGE:SYMBOL[.åç¼€]` æ ¼å¼ï¼Œæ”¯æŒç°è´§ã€æœŸè´§ã€æœŸæƒç­‰
- âœ… **ç»Ÿä¸€ç®¡ç†å™¨** - UnifiedWebSocketManager ç»Ÿä¸€ç®¡ç†æ‰€æœ‰è¿æ¥å’Œè®¢é˜…
- âœ… **æ™ºèƒ½è®¢é˜…** - è‡ªåŠ¨è®¡ç®—ã€å»é‡å’Œä¼˜åŒ–è®¢é˜…çŠ¶æ€
- âœ… **å¤šäº§å“ç±»å‹æ”¯æŒ** - ç°è´§ã€USDTæ°¸ç»­åˆçº¦ï¼ˆæœŸè´§ä»…æ”¯æŒæ°¸ç»­ï¼‰
- âœ… **å¤šäº¤æ˜“æ‰€æ”¯æŒ** - é€šè¿‡ç»Ÿä¸€æ¶ˆæ¯æ ¼å¼æ”¯æŒä¸åŒäº¤æ˜“æ‰€
- âœ… **å®æ—¶æ€§** - æ‰€æœ‰è¯·æ±‚å’Œå“åº”éƒ½æ˜¯å®æ—¶çš„
- âœ… **ç®€åŒ–æ¶æ„** - æ— éœ€ç»´æŠ¤å¤šä¸ª REST ç«¯ç‚¹

---

## ğŸ“‘ ç›®å½•

- [æ¦‚è¿°](#-æ¦‚è¿°)
- [æ¶æ„è®¾è®¡](#-æ¶æ„è®¾è®¡)
- [WebSocket ç«¯ç‚¹](#-websocket-ç«¯ç‚¹)
- [ç»Ÿä¸€æ¶ˆæ¯åè®®](#-ç»Ÿä¸€æ¶ˆæ¯åè®®)
  - [å®¢æˆ·ç«¯è¯·æ±‚](#-å®¢æˆ·ç«¯è¯·æ±‚)
  - [æœåŠ¡ç«¯å“åº”](#-æœåŠ¡ç«¯å“åº”)
  - [å®æ—¶æ•°æ®æ¨é€](#-å®æ—¶æ•°æ®æ¨é€)
- [æ¶ˆæ¯ç±»å‹è¯¦è§£](#-æ¶ˆæ¯ç±»å‹è¯¦è§£)
  - [GET è¯·æ±‚](#-get-è¯·æ±‚)
  - [è®¢é˜…/å–æ¶ˆè®¢é˜…](#-è®¢é˜…-å–æ¶ˆè®¢é˜…)
  - [é”™è¯¯å¤„ç†](#-é”™è¯¯å¤„ç†)
- [è¯­ä¹‰åŒ–äº¤æ˜“å¯¹å‘½åè§„èŒƒ](#-è¯­ä¹‰åŒ–äº¤æ˜“å¯¹å‘½åè§„èŒƒ)
- [çŠ¶æ€ç›‘æ§ä¸å¿ƒè·³æœºåˆ¶](#-çŠ¶æ€ç›‘æ§ä¸å¿ƒè·³æœºåˆ¶)
- [é”™è¯¯å¤„ç†](#-é”™è¯¯å¤„ç†-1)
- [æ€»ç»“](#-æ€»ç»“)

---

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### æ ¸å¿ƒåŸåˆ™ï¼šçº¯ WebSocket æ¶æ„

æ‰€æœ‰å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨çš„äº¤äº’éƒ½é€šè¿‡**å•ä¸€çš„ WebSocket è¿æ¥**å®Œæˆï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    è¡¨ç¤ºå±‚ (Presentation Layer)                   â”‚
â”‚                     FastAPI + WebSocket ç«¯ç‚¹                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ç»Ÿä¸€ç®¡ç†å™¨å±‚ (Unified Manager Layer)               â”‚
â”‚           UnifiedWebSocketManager - ç»Ÿä¸€è¿æ¥å’Œè®¢é˜…ç®¡ç†           â”‚
â”‚                                                                  â”‚
â”‚           â€¢ è¿æ¥ç®¡ç†          â€¢ è®¢é˜…è·Ÿè¸ª                         â”‚
â”‚           â€¢ æ™ºèƒ½è®¡ç®—          â€¢ æ¶ˆæ¯è·¯ç”±                         â”‚
â”‚           â€¢ çŠ¶æ€ç›‘æ§          â€¢ æŒ‡æ ‡ç»Ÿè®¡                         â”‚
â”‚           â€¢ ç»Ÿä¸€ç¼“å­˜          â€¢ æ•°æ®è½¬æ¢                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   äº¤æ˜“æ‰€æœåŠ¡å±‚ (Exchange Service Layer)         â”‚
â”‚  binance_api_client (éå®æ—¶)  +  binance_streams_client (å®æ—¶)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   åº•å±‚ (Underlying Layer)                       â”‚
â”‚                   å¸å®‰ WebSocket æ•°æ®æµ                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ¶æ„ä¼˜åŠ¿

1. **ç»Ÿä¸€ç®¡ç†å™¨** - æ‰€æœ‰è¿æ¥å’Œè®¢é˜…ç”± UnifiedWebSocketManager ç»Ÿä¸€ç®¡ç†
2. **æ™ºèƒ½è®¢é˜…** - è‡ªåŠ¨è®¡ç®—ã€å»é‡å’Œä¼˜åŒ–è®¢é˜…çŠ¶æ€
3. **åŒå®¢æˆ·ç«¯æ¶æ„** - API å®¢æˆ·ç«¯ï¼ˆéå®æ—¶ï¼‰+ Streams å®¢æˆ·ç«¯ï¼ˆå®æ—¶ï¼‰
4. **ç»Ÿä¸€ç¼“å­˜** - äº¤æ˜“æ‰€ä¿¡æ¯ç­‰æ•°æ®ç»Ÿä¸€ç¼“å­˜ç®¡ç†
5. **å¤šäº¤æ˜“æ‰€æ”¯æŒ** - é€šè¿‡ç»Ÿä¸€æ¶ˆæ¯æ ¼å¼æ”¯æŒä¸åŒäº¤æ˜“æ‰€
6. **ç®€åŒ–æ¶æ„** - æ— éœ€ç»´æŠ¤å¤šä¸ª REST ç«¯ç‚¹

### è®¾è®¡å†³ç­–ï¼šå€Ÿé‰´å¸å®‰WebSocket APIé£æ ¼

#### é—®é¢˜èƒŒæ™¯

åˆå§‹è®¾è®¡ä¸­å­˜åœ¨æ¦‚å¿µæ··æ·†ï¼š
- **GETæ•°æ®å“åº”**: ä½¿ç”¨ `action: "ack"` è¿”å›å®é™…æ•°æ®
- **è®¢é˜…ç¡®è®¤**: ä½¿ç”¨ `action: "ack"` è¿”å›ç©ºç¡®è®¤
- åŒä¸€ä¸ª `ack` æ¦‚å¿µæ—¢è¡¨ç¤ºæ•°æ®åˆè¡¨ç¤ºç¡®è®¤ï¼Œé€ æˆå¼€å‘è€…å›°æƒ‘

#### è§£å†³æ–¹æ¡ˆ

å‚è€ƒå¸å®‰WebSocket APIçš„è®¾è®¡æ¨¡å¼ï¼š
- **ç»Ÿä¸€æˆåŠŸå“åº”**: ä½¿ç”¨ `action: "success"`
- **è¯­ä¹‰æ¸…æ™°**: é€šè¿‡ `type` å­—æ®µåŒºåˆ†æ•°æ®å“åº”å’Œç¡®è®¤æ¶ˆæ¯
  - `type: "klines/config/search_symbols"` â†’ åŒ…å«å®é™…æ•°æ®
  - `type: "subscribe/unsubscribe"` â†’ ç©ºdataï¼Œä»…ç¡®è®¤

#### è®¾è®¡ä¼˜åŠ¿

1. **è¯­ä¹‰æ¸…æ™°**: å¼€å‘è€…ä¸€çœ¼å°±èƒ½åŒºåˆ†æ•°æ®å“åº”å’Œç¡®è®¤æ¶ˆæ¯
2. **ç¬¦åˆç›´è§‰**: `success` æ¯” `ack` æ›´ç›´è§‚
3. **å€Ÿé‰´æˆç†Ÿè®¾è®¡**: éµå¾ªå¸å®‰WebSocket APIç®€æ´é£æ ¼
4. **å‘åå…¼å®¹**: å¯å¹³æ»‘è¿‡æ¸¡ï¼Œå…¼å®¹æ—§ç‰ˆæœ¬å®¢æˆ·ç«¯

### ä¿ç•™çš„ç³»ç»Ÿç«¯ç‚¹ï¼ˆä»… 2 ä¸ªï¼‰

| HTTP æ–¹æ³• | è·¯å¾„ | åŠŸèƒ½æè¿° |
|-----------|------|----------|
| GET | `/` | æ ¹è·¯å¾„ï¼Œè¿”å›æœåŠ¡è¿è¡ŒçŠ¶æ€å’Œç‰ˆæœ¬ä¿¡æ¯ |
| GET | `/health` | å¥åº·æ£€æŸ¥ç«¯ç‚¹ |

---

## ğŸŒ WebSocket ç«¯ç‚¹

### ä¸»ç«¯ç‚¹ï¼šæ•°æ®é€šé“

- **è·¯å¾„**: `/ws/market`
- **å¼€å‘ç¯å¢ƒ**: `ws://localhost:8000/ws/market`
- **ç”Ÿäº§ç¯å¢ƒ**: `wss://your-domain.com/ws/market`
- **åè®®**: WebSocket (RFC 6455)
- **æ¶ˆæ¯æ ¼å¼**: JSON

### çŠ¶æ€ç›‘æ§ç«¯ç‚¹

- **è·¯å¾„**: `/ws/market/status`
- **ç”¨é€”**: å®æ—¶ç›‘æ§ WebSocket æœåŠ¡çŠ¶æ€
- **æ¨é€é¢‘ç‡**: æ¯ 5 ç§’

**çŠ¶æ€æ¨é€æ¶ˆæ¯æ ¼å¼**:
```json
{
    "type": "status_update",
    "data": {
        "metrics": {
            "active_connections": 5,
            "total_subscriptions": 12,
            "unique_symbols": 8,
            "exchange_subscriptions": {
                "BINANCE": 12
            }
        },
        "timestamp": 1703123456.789
    }
}
```

### å¿ƒè·³æœºåˆ¶ï¼ˆPing-Pongï¼‰

æœ¬ç³»ç»Ÿé‡‡ç”¨ **Uvicorn æœåŠ¡å™¨çº§åˆ«è‡ªåŠ¨ ping/pong** æœºåˆ¶ï¼Œä¸å¸å®‰ WebSocket API ä¿æŒå®Œå…¨ä¸€è‡´ã€‚

#### æŠ€æœ¯å®ç°æ–¹æ¡ˆ

**æœåŠ¡å™¨é…ç½®**ï¼š
- **Ping é—´éš”**: 20 ç§’
- **Ping è¶…æ—¶**: 60 ç§’ï¼ˆ1 åˆ†é’Ÿï¼‰
- **å®ç°æ–¹å¼**: Uvicorn ASGI æœåŠ¡å™¨è‡ªåŠ¨å¤„ç†ï¼ˆ--ws-ping-interval 20 --ws-ping-timeout 60ï¼‰

#### å·¥ä½œæœºåˆ¶

```
æ—¶é—´çº¿ç¤ºä¾‹ï¼š
T+0s   : WebSocket è¿æ¥å»ºç«‹
T+20s  : æœåŠ¡å™¨å‘é€ç¬¬ä¸€ä¸ª ping frame
T+40s  : æœåŠ¡å™¨å‘é€ç¬¬äºŒä¸ª ping frame
T+60s  : æœåŠ¡å™¨å‘é€ç¬¬ä¸‰ä¸ª ping frame
T+80s  : å¦‚æœå‰é¢æ‰€æœ‰ ping éƒ½è¶…æ—¶ï¼Œè¿æ¥è‡ªåŠ¨æ–­å¼€
```

#### å®¢æˆ·ç«¯è¦æ±‚

**å¿…é¡»æ”¯æŒ**ï¼š
- âœ… è‡ªåŠ¨å“åº”æœåŠ¡å™¨ ping frameï¼ˆå‘é€ pongï¼‰
- âœ… 60 ç§’å†…å“åº”æ‰€æœ‰ ping
- âœ… æ”¯æŒ unsolicited pongï¼ˆä¸»åŠ¨å‘é€ pongï¼‰

**å»ºè®®å®ç°**ï¼ˆJavaScript ç¤ºä¾‹ï¼‰ï¼š
```javascript
// å¤§å¤šæ•°æµè§ˆå™¨ WebSocket API ä¼šè‡ªåŠ¨å¤„ç† ping/pong
const ws = new WebSocket('wss://your-domain.com/ws/market');

ws.onopen = () => {
    console.log('WebSocket connected');
    // æµè§ˆå™¨ä¼šè‡ªåŠ¨å“åº”æœåŠ¡å™¨çš„ ping
};

ws.onmessage = (event) => {
    // å¤„ç†ä¸šåŠ¡æ¶ˆæ¯
    // æ³¨æ„ï¼šping/pong æ˜¯åè®®å±‚ï¼Œæµè§ˆå™¨ä¸ä¼šæš´éœ²ç»™åº”ç”¨å±‚
};

ws.onclose = (event) => {
    // è¿æ¥å…³é—­
    if (event.code === 1006) {
        // ä»£ç  1006 è¡¨ç¤ºå¼‚å¸¸å…³é—­ï¼ˆå¯èƒ½æ˜¯ ping è¶…æ—¶ï¼‰
        console.log('Connection lost due to ping timeout');
    }
};

// å¯é€‰ï¼šåº”ç”¨å±‚å¿ƒè·³ç›‘æ§ï¼ˆä¸å½±å“åè®®å±‚ ping/pongï¼‰
let lastMessageTime = Date.now();
setInterval(() => {
    if (Date.now() - lastMessageTime > 60000) {
        console.warn('No messages received for 60s, connection may be dead');
    }
}, 10000);

ws.onmessage = (event) => {
    lastMessageTime = Date.now();
    // å¤„ç†ä¸šåŠ¡æ¶ˆæ¯...
};
```

#### è¶…æ—¶å¤„ç†ç­–ç•¥

| åœºæ™¯ | å®¢æˆ·ç«¯è¡Œä¸º | å»ºè®®å¤„ç† |
|------|------------|----------|
| **æ­£å¸¸æƒ…å†µ** | æ­£å¸¸å“åº” ping | è¿æ¥ä¿æŒ |
| **ç½‘ç»œæ³¢åŠ¨** | å¶å°”ä¸¢åŒ…ï¼Œ60ç§’å†…æ¢å¤ | è¿æ¥ä¿æŒï¼ˆå®¹å¿ 1-2 æ¬¡ä¸¢åŒ…ï¼‰ |
| **æ­»è¿æ¥** | 60ç§’å†…æ— å“åº” | æœåŠ¡å™¨è‡ªåŠ¨æ–­å¼€ï¼Œå®¢æˆ·ç«¯åº”å®ç°é‡è¿ |
| **å®¢æˆ·ç«¯ä¸»åŠ¨æ–­å¼€** | å‘é€ close frame | æ­£å¸¸æ–­å¼€æµç¨‹ |

#### ä¼˜åŠ¿

1. **é›¶å¼€å‘æˆæœ¬** - åè®®å±‚è‡ªåŠ¨å¤„ç†ï¼Œæ— éœ€åº”ç”¨å±‚å®ç°
2. **æ€§èƒ½æœ€ä¼˜** - Uvicorn ä¼˜åŒ–çš„ C å®ç°ï¼Œä½å»¶è¿Ÿ
3. **æ ‡å‡†å…¼å®¹** - ä¸å¸å®‰ WebSocket API æœºåˆ¶ä¸€è‡´
4. **é€æ˜ç®¡ç†** - åº”ç”¨å±‚æ— éœ€æ„ŸçŸ¥å¿ƒè·³ç»†èŠ‚
5. **è‡ªåŠ¨æ¢å¤** - æ£€æµ‹åˆ°æ­»è¿æ¥è‡ªåŠ¨æ–­å¼€ï¼Œé¿å…èµ„æºæ³„éœ²

#### ç›‘æ§ä¸è°ƒè¯•

**æœåŠ¡å™¨ç«¯ç›‘æ§**ï¼š
- æŸ¥çœ‹ Uvicorn æ—¥å¿—ä¸­çš„ ping/pong è®°å½•
- ç›‘æ§è¿æ¥æ–­å¼€åŸå› ï¼ˆä»£ç  1006 è¡¨ç¤º ping è¶…æ—¶ï¼‰

**å®¢æˆ·ç«¯è°ƒè¯•**ï¼š
- ç›‘å¬ `onclose` äº‹ä»¶ï¼Œæ£€æŸ¥ `event.code`
- ä»£ç  1006 é€šå¸¸è¡¨ç¤º ping è¶…æ—¶
- å»ºè®®å®ç°è‡ªåŠ¨é‡è¿é€»è¾‘

#### ä¸åº”ç”¨å±‚å¿ƒè·³çš„åŒºåˆ«

| ç‰¹æ€§ | åè®®å±‚ ping/pongï¼ˆæ¨èï¼‰ | åº”ç”¨å±‚å¿ƒè·³ |
|------|--------------------------|------------|
| **å®ç°ä½ç½®** | Uvicorn æœåŠ¡å™¨ | åº”ç”¨ä»£ç  |
| **å¼€å‘æˆæœ¬** | é›¶ | ä¸­ç­‰ |
| **æ€§èƒ½å¼€é”€** | æä½ | ä½ |
| **å¯æ§æ€§** | ä½ï¼ˆè‡ªåŠ¨ï¼‰ | é«˜ï¼ˆè‡ªå®šä¹‰ï¼‰ |
| **å…¼å®¹æ€§** | æ ‡å‡† WebSocket | éœ€è¦è‡ªå®šä¹‰åè®® |
| **å¸å®‰ä¸€è‡´æ€§** | âœ… å®Œå…¨ä¸€è‡´ | âš ï¸ ä¸åŒ |

**ç»“è®º**ï¼šæ¨èä½¿ç”¨åè®®å±‚ ping/pongï¼Œä¸å¸å®‰ä¿æŒä¸€è‡´ï¼Œé›¶å¼€å‘æˆæœ¬ï¼Œæ€§èƒ½æœ€ä¼˜ã€‚

---

## ğŸ“‹ ç»Ÿä¸€å“åº”æ ¼å¼è§„èŒƒï¼ˆv2.1ï¼‰

> **æ ¸å¿ƒè¦æ±‚**: æ‰€æœ‰æœåŠ¡ç«¯å“åº”éµå¾ªç»Ÿä¸€çš„ JSON æ ¼å¼ï¼Œ**`type` å­—æ®µä½äº `data` å†…éƒ¨**ï¼Œä¸è¯·æ±‚æ ¼å¼ä¿æŒå¯¹ç§°ã€‚

### ç»Ÿä¸€å“åº”æ ¼å¼

```json
{
    "protocolVersion": "2.0",
    "action": "success",
    "requestId": "req_xxx",
    "timestamp": 1234567890,
    "data": {
        "type": "xxx",
        "xxx": {...}  // ä¸šåŠ¡æ•°æ®ç›´æ¥å±•å¼€
    }
}
```

**æ ¼å¼è¯´æ˜**:
| å­—æ®µ | ä½ç½® | è¯´æ˜ |
|------|------|------|
| `data.type` | dataå†…éƒ¨ | æ ‡è¯†å“åº”ç±»å‹ï¼ˆklines/quotes/search_symbolsç­‰ï¼‰ï¼Œä¸è¯·æ±‚æ ¼å¼ä¸€è‡´ |
| ä¸šåŠ¡å­—æ®µ | dataå†…éƒ¨ | ä¸šåŠ¡æ•°æ®ç›´æ¥å±•å¼€ï¼Œæ— éœ€å†ç”¨ `result` åŒ…è£¹ |

**ç»Ÿä¸€åŸåˆ™**:
1. **`type` å§‹ç»ˆåœ¨ `data` å†…éƒ¨** - è¯·æ±‚å’Œå“åº”çš„æ ¼å¼å¯¹ç§°
2. **ä¸šåŠ¡æ•°æ®ç›´æ¥å±•å¼€** - `bars`ã€`symbols`ã€`quotes` ç­‰ç›´æ¥æ”¾åœ¨ `data` ä¸‹
3. **æ—  `result` åŒ…è£¹å±‚** - é¿å…ä¸å¿…è¦çš„åµŒå¥—

### å„ç±»å‹å“åº” data å­—æ®µç¤ºä¾‹

| ç±»å‹ | data å†…éƒ¨å­—æ®µ |
|------|--------------|
| config | `type`, `supports_search`, `supported_resolutions`, ... |
| search_symbols | `type`, `symbols`, `total`, `count` |
| resolve_symbol | `type`, `name`, `ticker`, `description`, ... |
| klines | `type`, `symbol`, `interval`, `bars`, `count` |
| server_time | `type`, `server_time`, `timezone` |
| quotes | `type`, `quotes` |
| subscribe | `type`ï¼ˆä»…ç¡®è®¤ï¼‰ |
| unsubscribe | `type`ï¼ˆä»…ç¡®è®¤ï¼‰ |

---

## ğŸ·ï¸ è¯­ä¹‰åŒ–äº¤æ˜“å¯¹å‘½åè§„èŒƒ

### æ ¸å¿ƒåŸåˆ™ï¼šå‰ç«¯æ— æ„ŸçŸ¥äº§å“ç±»å‹

å‰ç«¯åªå…³å¿ƒèƒ½å¦è·å–å†å²æ•°æ®å’Œè®¢é˜…å®æ—¶æ•°æ®ï¼Œ**ä¸å…³å¿ƒåº•å±‚æ˜¯ç°è´§ã€æœŸè´§è¿˜æ˜¯å…¶ä»–äº§å“ç±»å‹**ã€‚åç«¯è´Ÿè´£å°†è¯­ä¹‰åŒ–çš„äº¤æ˜“å¯¹åç§°è½¬æ¢ä¸ºå¯¹åº”äº¤æ˜“æ‰€çš„APIæ ¼å¼ã€‚

### v2.0 è®¢é˜…é”®æ ¼å¼è§„èŒƒ

#### åŸºç¡€æ ¼å¼

```
{EXCHANGE}:{SYMBOL}[.{äº§å“åç¼€}]@{DATA_TYPE}[_{INTERVAL}]
```

#### æ ¼å¼ç¤ºä¾‹

**ç°è´§äº¤æ˜“**ï¼š
- `BINANCE:BTCUSDT@KLINE_1` - 1åˆ†é’ŸKçº¿ (TVåˆ†è¾¨ç‡: "1")
- `BINANCE:BTCUSDT@KLINE_60` - 1å°æ—¶Kçº¿ (TVåˆ†è¾¨ç‡: "60")
- `BINANCE:BTCUSDT@KLINE_D` - 1å¤©Kçº¿ (TVåˆ†è¾¨ç‡: "D")
- `BINANCE:BTCUSDT@TICKER` - å®æ—¶æŠ¥ä»·
- `BINANCE:BTCUSDT@TRADE` - å®æ—¶äº¤æ˜“

**æ°¸ç»­åˆçº¦**ï¼š
- `BINANCE:BTCUSDT.PERP@KLINE_1` - æ°¸ç»­åˆçº¦1åˆ†é’ŸKçº¿ (TVåˆ†è¾¨ç‡: "1")
- `BINANCE:BTCUSDT.PERP@KLINE_60` - æ°¸ç»­åˆçº¦1å°æ—¶Kçº¿ (TVåˆ†è¾¨ç‡: "60")
- `BINANCE:BTCUSDT.PERP@TICKER` - æ°¸ç»­åˆçº¦å®æ—¶æŠ¥ä»·

> **æ³¨æ„**: æœ¬ç³»ç»Ÿä»…æ”¯æŒæ°¸ç»­åˆçº¦æœŸè´§äº¤æ˜“ï¼Œå­£åº¦æœŸè´§å·²è¢«ç§»é™¤

#### åˆ†è¾¨ç‡æ ¼å¼è§„åˆ™

TV å›¾è¡¨åº“æ”¯æŒçš„åˆ†è¾¨ç‡æ ¼å¼å¦‚ä¸‹ï¼š

| ç±»å‹ | æ ¼å¼ | å¯çœç•¥å½¢å¼ | ç¤ºä¾‹ |
|------|------|-----------|------|
| å¤©çº§ | `xD` | `D` (=`1D`) | `1D`, `2D`, `3D`, `D` |
| å‘¨çº§ | `xW` | `W` (=`1W`) | `1W`, `2W`, `W` |
| æœˆçº§ | `xM` | `M` (=`1M`) | `1M`, `3M`, `M` |

**è¯´æ˜**:
- å½“å•ä½æ•°é‡ç­‰äº 1 æ—¶ï¼Œå¯ä»¥çœç•¥æ•°å­—ã€‚ä¾‹å¦‚ `D` = `1D`ï¼Œ`W` = `1W`ï¼Œ`M` = `1M`
- **å¹´çº§åˆ†è¾¨ç‡ä¸èƒ½ç”¨ `Y` è¡¨ç¤º**ï¼Œå¿…é¡»ç”¨ `12M`ï¼ˆ12ä¸ªæœˆ = 1å¹´ï¼‰

#### TVåˆ†è¾¨ç‡æ˜ å°„è¡¨

| TVåˆ†è¾¨ç‡ | è¯´æ˜ | å¸å®‰é—´éš” | æ”¯æŒçŠ¶æ€ |
|----------|------|----------|----------|
| **ç§’çº§æ—¶é—´å‘¨æœŸ** |
| `1s` | 1ç§’ | `1s` | ğŸ”¶ é¢„ç•™ï¼ˆå¸å®‰ä¸æ”¯æŒï¼‰ |
| `5s` | 5ç§’ | `5s` | ğŸ”¶ é¢„ç•™ï¼ˆå¸å®‰ä¸æ”¯æŒï¼‰ |
| `10s` | 10ç§’ | `10s` | ğŸ”¶ é¢„ç•™ï¼ˆå¸å®‰ä¸æ”¯æŒï¼‰ |
| `15s` | 15ç§’ | `15s` | ğŸ”¶ é¢„ç•™ï¼ˆå¸å®‰ä¸æ”¯æŒï¼‰ |
| `30s` | 30ç§’ | `30s` | ğŸ”¶ é¢„ç•™ï¼ˆå¸å®‰ä¸æ”¯æŒï¼‰ |
| **åˆ†é’Ÿçº§æ—¶é—´å‘¨æœŸ** |
| `1` | 1åˆ†é’Ÿ | `1m` | âœ… æ”¯æŒ |
| `3` | 3åˆ†é’Ÿ | `3m` | âœ… æ”¯æŒ |
| `5` | 5åˆ†é’Ÿ | `5m` | âœ… æ”¯æŒ |
| `15` | 15åˆ†é’Ÿ | `15m` | âœ… æ”¯æŒ |
| `30` | 30åˆ†é’Ÿ | `30m` | âœ… æ”¯æŒ |
| `45` | 45åˆ†é’Ÿ | `45m` | âœ… æ”¯æŒ |
| `60` | 1å°æ—¶ | `1h` | âœ… æ”¯æŒ |
| `120` | 2å°æ—¶ | `2h` | âœ… æ”¯æŒ |
| `240` | 4å°æ—¶ | `4h` | âœ… æ”¯æŒ |
| `360` | 6å°æ—¶ | `6h` | âœ… æ”¯æŒ |
| `480` | 8å°æ—¶ | `8h` | âœ… æ”¯æŒ |
| `720` | 12å°æ—¶ | `12h` | âœ… æ”¯æŒ |
| **å¤©çº§æ—¶é—´å‘¨æœŸ** |
| `D` | 1å¤© | `1d` | âœ… æ”¯æŒ |
| `1D` | 1å¤©ï¼ˆåˆ«åï¼‰ | `1d` | âœ… æ”¯æŒ |
| `2D` | 2å¤© | `2d` | ğŸ”¶ é¢„ç•™ï¼ˆå¸å®‰ä¸æ”¯æŒï¼‰ |
| `3D` | 3å¤© | `3d` | âœ… æ”¯æŒ |
| `4D` | 4å¤© | `4d` | ğŸ”¶ é¢„ç•™ï¼ˆå¸å®‰ä¸æ”¯æŒï¼‰ |
| `5D` | 5å¤© | `5d` | ğŸ”¶ é¢„ç•™ï¼ˆå¸å®‰ä¸æ”¯æŒï¼‰ |
| `7D` | 7å¤© | `7d` | ğŸ”¶ é¢„ç•™ï¼ˆå¸å®‰ä¸æ”¯æŒï¼‰ |
| **å‘¨çº§æ—¶é—´å‘¨æœŸ** |
| `W` | 1å‘¨ | `1w` | âœ… æ”¯æŒ |
| `2W` | 2å‘¨ | `2w` | ğŸ”¶ é¢„ç•™ï¼ˆå¸å®‰ä¸æ”¯æŒï¼‰ |
| **æœˆçº§æ—¶é—´å‘¨æœŸ** |
| `M` | 1æœˆ | `1M` | âœ… æ”¯æŒ |
| `3M` | 3æœˆ | `3M` | ğŸ”¶ é¢„ç•™ï¼ˆå¸å®‰ä¸æ”¯æŒï¼‰ |
| `6M` | 6æœˆ | `6M` | ğŸ”¶ é¢„ç•™ï¼ˆå¸å®‰ä¸æ”¯æŒï¼‰ |
| `9M` | 9æœˆ | `9M` | ğŸ”¶ é¢„ç•™ï¼ˆå¸å®‰ä¸æ”¯æŒï¼‰ |
| `12M` | 12æœˆ | `12M` | âœ… æ”¯æŒ |
| **å¹´çº§æ—¶é—´å‘¨æœŸ** |
| `12M` | 1å¹´ | `12M` | ğŸ”¶ é¢„ç•™ï¼ˆå¸å®‰ä¸æ”¯æŒï¼‰ |
| `24M` | 2å¹´ | `24M` | ğŸ”¶ é¢„ç•™ï¼ˆå¸å®‰ä¸æ”¯æŒï¼‰ |
| `36M` | 3å¹´ | `36M` | ğŸ”¶ é¢„ç•™ï¼ˆå¸å®‰ä¸æ”¯æŒï¼‰ |
| `60M` | 5å¹´ | `60M` | ğŸ”¶ é¢„ç•™ï¼ˆå¸å®‰ä¸æ”¯æŒï¼‰ |
| `120M` | 10å¹´ | `120M` | ğŸ”¶ é¢„ç•™ï¼ˆå¸å®‰ä¸æ”¯æŒï¼‰ |

> **è¯´æ˜**: TV å›¾è¡¨åº“ä¸æ”¯æŒ `Y` æ ¼å¼è¡¨ç¤ºå¹´ä»½ï¼Œå¹´çº§åˆ†è¾¨ç‡å¿…é¡»ç”¨ `xM` æ ¼å¼ï¼ˆæœˆä»½ï¼‰ã€‚ä¾‹å¦‚ `12M` = 1å¹´ï¼Œ`24M` = 2å¹´ã€‚

**è¯´æ˜**:
- âœ… **æ”¯æŒ**: å¸å®‰APIåŸç”Ÿæ”¯æŒï¼Œå¯æ­£å¸¸è·å–æ•°æ®
- ğŸ”¶ **é¢„ç•™**: æš‚ä¸æ”¯æŒï¼Œä¸ºæœªæ¥æ‰©å±•ä¿ç•™æ˜ å°„å…³ç³» |

#### v1.0 æ ¼å¼å…¼å®¹æ€§è¯´æ˜

v2.0 å®Œå…¨ä¸å…¼å®¹ v1.0 æ ¼å¼ã€‚å‰ç«¯éœ€è¦ä½¿ç”¨æ–°çš„è®¢é˜…é”®æ ¼å¼ã€‚

**v1.0 æ—§æ ¼å¼**ï¼ˆå·²åºŸå¼ƒï¼‰ï¼š
```json
{
    "subscriptions": {
        "kline": [
            {"symbol": "BINANCE:BTCUSDT", "interval": "1"}
        ]
    }
}
```

**v2.0 æ–°æ ¼å¼**ï¼š
```json
{
    "subscriptions": [
        "BINANCE:BTCUSDT@KLINE_1",
        "BINANCE:BTCUSDT.PERP@KLINE_1"
    ]
}
```

### ä¼ ç»Ÿäº¤æ˜“å¯¹æ ¼å¼ï¼ˆç”¨äºå†å²æ•°æ®æŸ¥è¯¢ï¼‰

```
åŸºç¡€æ ¼å¼: EXCHANGE:SYMBOL[.åç¼€]

ç°è´§: BINANCE:BTCUSDT
æ°¸ç»­åˆçº¦ (USDâ“ˆ-M): BINANCE:BTCUSDT.PERP
```

### æ ¼å¼è½¬æ¢è¯´æ˜

> **é‡è¦**: å†…éƒ¨ç»Ÿä¸€æ ¼å¼ä¸äº¤æ˜“æ‰€APIæ ¼å¼å¯èƒ½ä¸åŒï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è¿›è¡Œè½¬æ¢ã€‚

æ°¸ç»­åˆçº¦æ ¼å¼è½¬æ¢ç¤ºä¾‹:
- **å†…éƒ¨ç»Ÿä¸€æ ¼å¼**: `BINANCE:BTCUSDT.PERP`
- **å¸å®‰APIæ ¼å¼**: `BTCUSDT_PERPETUAL`

ç³»ç»Ÿä¼šåœ¨ä»¥ä¸‹ä½ç½®è‡ªåŠ¨è½¬æ¢ï¼š
1. **ç¼“å­˜åˆå§‹åŒ–æ—¶**: å°†äº¤æ˜“æ‰€APIæ ¼å¼è½¬æ¢ä¸ºå†…éƒ¨ç»Ÿä¸€æ ¼å¼å­˜å‚¨
2. **æ•°æ®æŸ¥è¯¢æ—¶**: å°†å†…éƒ¨ç»Ÿä¸€æ ¼å¼è½¬æ¢ä¸ºäº¤æ˜“æ‰€APIæ ¼å¼è°ƒç”¨

### å®Œæ•´äº§å“ç±»å‹æ”¯æŒ

| äº§å“ç±»å‹ | å‘½åæ ¼å¼ | ç¤ºä¾‹ | å¸å®‰APIç«¯ç‚¹ |
|---------|----------|------|-------------|
| **ç°è´§** | `EXCHANGE:SYMBOL` | `BINANCE:BTCUSDT` | `/api/v3/klines` |
| **æ°¸ç»­åˆçº¦ (USDâ“ˆ-M)** | `EXCHANGE:SYMBOL.PERP` | `BINANCE:BTCUSDT.PERP` | `/fapi/v1/continuousKlines` |

### äº¤æ˜“å¯¹æœç´¢å“åº”ç¤ºä¾‹

```json
{
    "protocolVersion": "2.0",
    "action": "success",
    "requestId": "req_1703123456789_002",
    "timestamp": 1703123456790,
    "data": {
        "type": "search_symbols",
        "symbols": [
            {
                "symbol": "BINANCE:BTCUSDT",
                "full_name": "BINANCE:BTCUSDT",
                "description": "æ¯”ç‰¹å¸/æ³°è¾¾å¸ (ç°è´§)",
                "exchange": "BINANCE",
                "ticker": "BTCUSDT",
                "type": "crypto"
            },
            {
                "symbol": "BINANCE:BTCUSDT.PERP",
                "full_name": "BINANCE:BTCUSDT.PERP",
                "description": "æ¯”ç‰¹å¸/æ³°è¾¾å¸æ°¸ç»­åˆçº¦",
                "exchange": "BINANCE",
                "ticker": "BTCUSDT.PERP",
                "type": "crypto"
            },
            {
                "symbol": "BINANCE:BTCUSDT.20260327",
                "full_name": "BINANCE:BTCUSDT.20260327",
                "description": "æ¯”ç‰¹å¸/æ³°è¾¾å¸2026å¹´3æœˆ27æ—¥æœŸè´§",
                "exchange": "BINANCE",
                "ticker": "BTCUSDT.20260327",
                "type": "crypto"
            }
        ],
        "total": 3,
        "count": 3
    }
}
```

### å‰ç«¯ä½¿ç”¨ç¤ºä¾‹

```javascript
// è·å–æ°¸ç»­åˆçº¦å†å²æ•°æ®
const historyRequest = {
    "protocolVersion": "2.0",
    "action": "get",
    "requestId": "history_futures_001",
    "timestamp": Date.now(),
    "data": {
        "type": "klines",
        "symbol": "BINANCE:BTCUSDT.PERP",  // å‰ç«¯ä½¿ç”¨è¯­ä¹‰åŒ–åç§°
        "interval": "60",
        "limit": 500
    }
};

// è®¢é˜…æ°¸ç»­åˆçº¦å®æ—¶æ•°æ®
const subscribeRequest = {
    "protocolVersion": "2.0",
    "action": "subscribe",
    "requestId": "sub_futures_001",
    "timestamp": Date.now(),
    "data": {
        "subscriptions": {
            "kline": [
                {
                    "symbol": "BINANCE:BTCUSDT.PERP",  // å‰ç«¯ä½¿ç”¨è¯­ä¹‰åŒ–åç§°
                    "interval": "60"
                }
            ]
        }
    }
};
```

**é‡è¦**: å‰ç«¯**æ— éœ€çŸ¥é“**åº•å±‚æ˜¯æ°¸ç»­åˆçº¦è¿˜æ˜¯ç°è´§ï¼Œåªéœ€è¦ä½¿ç”¨åç«¯æä¾›çš„äº¤æ˜“å¯¹åç§°å³å¯ï¼

---

## ğŸ“¡ ç»Ÿä¸€æ¶ˆæ¯åè®®

### æ¶ˆæ¯ç»“æ„

æ‰€æœ‰æ¶ˆæ¯éƒ½é‡‡ç”¨ç»Ÿä¸€çš„ JSON ç»“æ„ï¼Œä½†æ ¹æ®æ¶ˆæ¯ç±»å‹ï¼Œå­—æ®µæœ‰æ‰€ä¸åŒï¼š

**è¯·æ±‚æ¶ˆæ¯ï¼ˆå®¢æˆ·ç«¯ â†’ æœåŠ¡ç«¯ï¼‰**:
```json
{
    "protocolVersion": "2.0",    // åè®®ç‰ˆæœ¬å·
    "action": "action_type",      // åŠ¨ä½œç±»å‹
    "requestId": "req_xxx",       // è¯·æ±‚å”¯ä¸€æ ‡è¯†ç¬¦ï¼ˆå¿…éœ€ï¼‰
    "timestamp": 1234567890,      // Unix æ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰
    "data": {...}                 // æ¶ˆæ¯æ•°æ®
}
```

**ç¡®è®¤æ¶ˆæ¯ï¼ˆæœåŠ¡ç«¯ â†’ å®¢æˆ·ç«¯ï¼Œå¼‚æ­¥ä»»åŠ¡ç¬¬ä¸€é˜¶æ®µï¼‰**:
```json
{
    "protocolVersion": "2.0",    // åè®®ç‰ˆæœ¬å·
    "action": "ack",             // ç¡®è®¤æ”¶åˆ°è¯·æ±‚
    "requestId": "req_xxx",      // è¯·æ±‚å”¯ä¸€æ ‡è¯†ç¬¦ï¼ˆç”¨äºå…³è”ï¼‰
    "timestamp": 1234567890,      // Unix æ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰
    "data": {}                   // ç©ºå¯¹è±¡ï¼Œæ— éœ€é¢å¤–ä¿¡æ¯
}
```

**æˆåŠŸå“åº”æ¶ˆæ¯ï¼ˆæœåŠ¡ç«¯ â†’ å®¢æˆ·ç«¯ï¼‰**:
```json
{
    "protocolVersion": "2.0",    // åè®®ç‰ˆæœ¬å·
    "action": "success",         // æˆåŠŸçŠ¶æ€
    "requestId": "req_xxx",      // è¯·æ±‚å”¯ä¸€æ ‡è¯†ç¬¦ï¼ˆç”¨äºå…³è”è¯·æ±‚ï¼‰
    "timestamp": 1234567890,      // Unix æ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰
    "data": {...}                 // æ¶ˆæ¯æ•°æ®ï¼ˆåŒ…å«å®é™…å†…å®¹æˆ–ç¡®è®¤çŠ¶æ€ï¼‰
}
```

**é”™è¯¯å“åº”æ¶ˆæ¯ï¼ˆæœåŠ¡ç«¯ â†’ å®¢æˆ·ç«¯ï¼‰**:
```json
{
    "protocolVersion": "2.0",    // åè®®ç‰ˆæœ¬å·
    "action": "error",           // é”™è¯¯çŠ¶æ€
    "requestId": "req_xxx",      // è¯·æ±‚å”¯ä¸€æ ‡è¯†ç¬¦ï¼ˆç”¨äºå…³è”è¯·æ±‚ï¼‰
    "timestamp": 1234567890,      // Unix æ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰
    "data": {
        "errorCode": "XXX",      // é”™è¯¯ä»£ç 
        "errorMessage": "é”™è¯¯æè¿°"
    }
}
```

**æ›´æ–°æ¶ˆæ¯ï¼ˆæœåŠ¡ç«¯ â†’ å®¢æˆ·ç«¯ï¼Œå®æ—¶æ•°æ®æ¨é€ï¼‰**:
```json
{
    "protocolVersion": "2.0",    // åè®®ç‰ˆæœ¬å·
    "action": "update",           // åŠ¨ä½œç±»å‹
    "timestamp": 1234567890,      // Unix æ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰
    "data": {...}                 // æ¶ˆæ¯æ•°æ®ï¼ˆä¸åŒ…å« requestIdï¼Œéµå¾ª TradingView è§„èŒƒï¼‰
}
```

#### requestId ä¸ taskId çš„åŒºåˆ«

| å­—æ®µ | æ¥æº | ç”¨é€” | æ˜¯å¦è¿”å›å®¢æˆ·ç«¯ |
|------|------|------|--------------|
| `requestId` | å®¢æˆ·ç«¯ç”Ÿæˆ | å…³è”è¯·æ±‚å’Œæœ€ç»ˆå“åº” | âœ… æ˜¯ |
| `taskId` | æœåŠ¡ç«¯ç”Ÿæˆ | å†…éƒ¨ä»»åŠ¡ç®¡ç†ä¸æ•°æ®åº“æ˜ å°„ | âŒ å¦ |

**é‡è¦è¯´æ˜**ï¼š
- `requestId`ï¼šå®¢æˆ·ç«¯ç”Ÿæˆï¼Œç”¨äºè¿½è¸ªæ•´ä¸ªè¯·æ±‚-å“åº”æµç¨‹
- `taskId`ï¼šæœåŠ¡ç«¯ç”Ÿæˆï¼Œä»…ç”¨äºå†…éƒ¨ä»»åŠ¡ç®¡ç†å’Œæ•°æ®åº“æ˜ å°„ï¼Œ**ä¸è¿”å›ç»™å®¢æˆ·ç«¯**
- æ›´æ–°æ¶ˆæ¯ï¼ˆupdateï¼‰æ˜¯æœåŠ¡å™¨ä¸»åŠ¨æ¨é€çš„æ•°æ®ï¼Œéµå¾ª TradingView API è§„èŒƒï¼Œä¸åŒ…å« requestId å­—æ®µ

### ä¸‰é˜¶æ®µæ¶ˆæ¯æµç¨‹

> **é‡è¦è®¾è®¡åŸåˆ™**ï¼šæœ¬ç³»ç»Ÿ**æ‰€æœ‰è¯·æ±‚ç±»å‹**éƒ½éµå¾ª"å…ˆè¿”å› ackï¼Œç¡®è®¤æ”¶åˆ°è¯·æ±‚"çš„åŸåˆ™ã€‚

```
è¯·æ±‚ â†’ ackç¡®è®¤ â†’ (å¤„ç†) â†’ success/errorå›åº”
```

**ä¸‰ä¸ªé˜¶æ®µ**ï¼š

| é˜¶æ®µ | action | è¯´æ˜ |
|------|--------|------|
| 1 | `get`/`subscribe`/`unsubscribe` | å®¢æˆ·ç«¯å‘é€è¯·æ±‚ï¼ˆæºå¸¦ requestIdï¼‰ |
| 2 | `ack` | **æœåŠ¡ç«¯ç«‹å³ç¡®è®¤æ”¶åˆ°è¯·æ±‚**ï¼ˆè¿”å› requestIdï¼‰ |
| 3 | `success`/`error` | æœåŠ¡ç«¯è¿”å›å¤„ç†ç»“æœï¼ˆè¿”å› requestIdï¼‰ |

**é€‚ç”¨èŒƒå›´**ï¼šæœ¬ç³»ç»Ÿ**æ‰€æœ‰è¯·æ±‚ç±»å‹**éƒ½é‡‡ç”¨ä¸‰é˜¶æ®µæ¨¡å¼ï¼ŒåŒ…æ‹¬ï¼š
- ç›´æ¥æŸ¥è¯¢æ“ä½œï¼š`config`ã€`search_symbols`ã€`resolve_symbol`ã€`subscriptions`
- å¼‚æ­¥ä»»åŠ¡æ“ä½œï¼š`get_klines`ã€`get_server_time`ã€`get_quotes`
- è®¢é˜…æ“ä½œï¼š`subscribe`ã€`unsubscribe`

æ— è®ºæ•°æ®æ¥æºäºæœ¬åœ°æŸ¥è¯¢è¿˜æ˜¯è¿œç¨‹ API å¤„ç†ï¼Œéƒ½å¿…é¡»å…ˆè¿”å› ack ç¡®è®¤æ”¶åˆ°è¯·æ±‚ã€‚

### Action ç±»å‹æ€»è§ˆ

| action | æ–¹å‘ | ç”¨é€” |
|--------|------|------|
| `get` | å®¢æˆ·ç«¯â†’æœåŠ¡ç«¯ | è·å–æ•°æ®ï¼ˆé€šè¿‡ data.type åŒºåˆ†å…·ä½“æ“ä½œï¼‰ |
| `subscribe` | å®¢æˆ·ç«¯â†’æœåŠ¡ç«¯ | è®¢é˜…å®æ—¶æ•°æ® |
| `unsubscribe` | å®¢æˆ·ç«¯â†’æœåŠ¡ç«¯ | å–æ¶ˆè®¢é˜… |
| `ack` | æœåŠ¡ç«¯â†’å®¢æˆ·ç«¯ | ç¡®è®¤æ”¶åˆ°å¼‚æ­¥è¯·æ±‚ï¼ˆè¿”å› requestIdï¼‰ |
| `success` | æœåŠ¡ç«¯â†’å®¢æˆ·ç«¯ | æˆåŠŸå“åº”ï¼ˆæ•°æ®å“åº”æˆ–ä»»åŠ¡å®Œæˆï¼Œè¿”å› requestIdï¼‰ |
| `update` | æœåŠ¡ç«¯â†’å®¢æˆ·ç«¯ | æ•°æ®æ¨é€ï¼ˆå®æ—¶æ•°æ®ï¼Œä¸è¿”å› requestIdï¼‰ |
| `error` | æœåŠ¡ç«¯â†’å®¢æˆ·ç«¯ | é”™è¯¯æ¶ˆæ¯ï¼ˆè¿”å› requestIdï¼‰ |

**`success` action çš„è¯­ä¹‰è¯´æ˜**:

- **æ•°æ®å“åº”**: `action: "success"` + `type: "xxx"` â†’ åŒ…å«å®é™…æ•°æ®å†…å®¹
- **ä»»åŠ¡å®Œæˆ**: æ‰€æœ‰è¯·æ±‚éƒ½ç»è¿‡ä¸‰é˜¶æ®µæ¨¡å¼å¤„ç†ï¼Œé€šè¿‡ `type` å­—æ®µåŒºåˆ†å…·ä½“æ“ä½œç±»å‹

è¿™ç§è®¾è®¡ç¡®ä¿äº†è¯·æ±‚å¤„ç†çš„**ä¸€è‡´æ€§å’Œå¯é¢„æµ‹æ€§**ï¼Œæ‰€æœ‰è¯·æ±‚éƒ½éµå¾ª"å…ˆ ack ç¡®è®¤ â†’ å†å¤„ç† â†’ æœ€å success å“åº”"çš„ä¸‰é˜¶æ®µæ¨¡å¼ã€‚

**`get` action çš„ `data.type` ç±»å‹**:
| type | è¯´æ˜ | å¯¹åº” TradingView æ–¹æ³• |
|------|------|---------------------|
| `config` | è·å–æ•°æ®æºé…ç½® | `onReady` |
| `search_symbols` | æœç´¢äº¤æ˜“å¯¹ | `searchSymbols` |
| `resolve_symbol` | è·å–äº¤æ˜“å¯¹è¯¦æƒ… | `resolveSymbol` |
| `klines` | è·å– K çº¿å†å²æ•°æ® | `getBars` |
| `server_time` | è·å–æœåŠ¡å™¨æ—¶é—´ | `getServerTime` |
| `quotes` | æ‰¹é‡è·å–æŠ¥ä»·æ•°æ® | `getQuotes` |
| `subscriptions` | æŸ¥è¯¢å½“å‰å®¢æˆ·ç«¯è®¢é˜… | è‡ªå®šä¹‰æ‰©å±• |

**å‘Šè­¦é…ç½®ç±»å‹**ï¼ˆsignal-serviceï¼‰:
| type | è¯´æ˜ | ç”¨é€” |
|------|------|------|
| `create_alert_config` | åˆ›å»ºå‘Šè­¦é…ç½® | è®¾ç½®ä¿¡å·ç­–ç•¥å’Œå‚æ•° |
| `list_alert_configs` | åˆ—å‡ºå‘Šè­¦é…ç½® | æŸ¥è¯¢/ç­›é€‰ç”¨æˆ·çš„å‘Šè­¦ |
| `update_alert_config` | æ›´æ–°å‘Šè­¦é…ç½® | ä¿®æ”¹å‘Šè­¦é…ç½® |
| `delete_alert_config` | åˆ é™¤å‘Šè­¦é…ç½® | ç§»é™¤å‘Šè­¦ |
| `enable_alert_config` | å¯ç”¨å‘Šè­¦é…ç½® | æ¿€æ´»å‘Šè­¦ |
| `list_signals` | æŸ¥è¯¢å†å²ä¿¡å· | è·å–ä¿¡å·è®¡ç®—ç»“æœ |

**ç­–ç•¥å…ƒæ•°æ®ç±»å‹**ï¼ˆapi-serviceï¼‰:
| type | è¯´æ˜ | ç”¨é€” |
|------|------|------|
| `get_strategy_metadata` | è·å–æ‰€æœ‰ç­–ç•¥å…ƒæ•°æ® | è·å–å·²æ³¨å†Œç­–ç•¥åˆ—è¡¨åŠå…¶å‚æ•°å®šä¹‰ |
| `get_strategy_metadata_by_type` | è·å–æŒ‡å®šç­–ç•¥å…ƒæ•°æ® | æ ¹æ®ç­–ç•¥ç±»å‹è·å–è¯¦ç»†å‚æ•°å®šä¹‰ |

---

## ğŸ’¬ æ¶ˆæ¯ç±»å‹è¯¦è§£

### å®¢æˆ·ç«¯è¯·æ±‚

#### 1. GET è¯·æ±‚

æ‰€æœ‰è·å–æ•°æ®çš„æ“ä½œéƒ½ç»Ÿä¸€ä½¿ç”¨ `get` actionï¼Œé€šè¿‡ `data.type` åŒºåˆ†å…·ä½“æ“ä½œã€‚

##### 1.1 è·å–æ•°æ®æºé…ç½®

**ç¤ºä¾‹è¯·æ±‚**:
```json
{
    "protocolVersion": "2.0",
    "action": "get",
    "requestId": "req_1703123456789_001",
    "timestamp": 1703123456789,
    "data": {
        "type": "config"
    }
}
```

**è¯´æ˜**:
- å¯¹åº” TradingView çš„ `onReady` æ–¹æ³•
- ç”¨äºåˆå§‹åŒ–å›¾è¡¨åº“ï¼Œè·å–æ”¯æŒçš„åŠŸèƒ½é…ç½®

---

##### 1.2 æœç´¢äº¤æ˜“å¯¹

**ç¤ºä¾‹è¯·æ±‚**:
```json
{
    "protocolVersion": "2.0",
    "action": "get",
    "requestId": "req_1703123456789_002",
    "timestamp": 1703123456789,
    "data": {
        "type": "search_symbols",
        "query": "BTC",
        "exchange": "BINANCE",
        "type": "crypto",
        "limit": 50,
        "offset": 0
    }
}
```

**å­—æ®µè¯´æ˜**:
| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `type` | string | âœ… | å›ºå®šä¸º `search_symbols` |
| `query` | string | å¦ | æœç´¢å…³é”®è¯ |
| `exchange` | string | å¦ | äº¤æ˜“æ‰€ä»£ç  |
| `type` | string | å¦ | æ ‡çš„ç±»å‹ |
| `limit` | integer | å¦ | è¿”å›æ•°é‡é™åˆ¶ï¼ˆé»˜è®¤50ï¼Œæœ€å¤§100ï¼‰ |
| `offset` | integer | å¦ | åˆ†é¡µåç§»é‡ï¼ˆé»˜è®¤0ï¼‰ |

**è¯´æ˜**:
- å¯¹åº” TradingView çš„ `searchSymbols` æ–¹æ³•
- ç”¨äºæœç´¢äº¤æ˜“å¯¹åˆ—è¡¨

---

##### 1.3 è·å–äº¤æ˜“å¯¹è¯¦æƒ…

**ç¤ºä¾‹è¯·æ±‚**:
```json
{
    "protocolVersion": "2.0",
    "action": "get",
    "requestId": "req_1703123456789_003",
    "timestamp": 1703123456789,
    "data": {
        "type": "resolve_symbol",
        "symbol": "BINANCE:BTCUSDT"
    }
}
```

**å­—æ®µè¯´æ˜**:
| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `type` | string | âœ… | å›ºå®šä¸º `resolve_symbol` |
| `symbol` | string | âœ… | æ ‡çš„å…¨åï¼Œæ ¼å¼ï¼š`EXCHANGE:SYMBOL` |

**è¯´æ˜**:
- å¯¹åº” TradingView çš„ `resolveSymbol` æ–¹æ³•
- ç”¨äºè·å–äº¤æ˜“å¯¹çš„è¯¦ç»†ä¿¡æ¯

**å®Œæ•´å“åº”ç¤ºä¾‹**:
```json
{
    "protocolVersion": "2.0",
    "action": "success",
    "requestId": "req_1703123456789_003",
    "timestamp": 1703123456790,
    "data": {
        "type": "resolve_symbol",
        "name": "BTCUSDT",
        "base_name": ["NASDAQ:AAPL"],
        "ticker": "BINANCE:BTCUSDT",
        "description": "BTC/USDT",
        "long_description": "æ¯”ç‰¹å¸/æ³°è¾¾å¸ (ç°è´§)",
        "type": "crypto",
        "session": "24x7",
        "session_display": "24å°æ—¶",
        "session_holidays": "",
        "corrections": "",
        "exchange": "BINANCE",
        "listed_exchange": "BINANCE",
        "timezone": "Etc/UTC",
        "format": "price",
        "minmov": 1.0,
        "pricescale": 100,
        "minmove2": 0,
        "fractional": false,
        "variable_tick_size": "0.01 10 0.02 25 0.05",
        "has_intraday": true,
        "has_seconds": false,
        "has_ticks": false,
        "has_daily": true,
        "has_weekly_and_monthly": true,
        "supported_resolutions": ["1", "5", "15", "60", "240", "1D", "1W", "1M"],
        "intraday_multipliers": ["1", "5", "15", "60"],
        "seconds_multipliers": null,
        "daily_multipliers": ["1"],
        "weekly_multipliers": ["1"],
        "monthly_multipliers": ["1"],
        "build_seconds_from_ticks": false,
        "has_empty_bars": false,
        "visible_plots_set": "ohlcv",
        "volume_precision": 8,
        "data_status": "streaming",
        "delay": 0,
        "currency_code": "USDT",
        "original_currency_code": "USDT",
        "unit_id": "",
        "original_unit_id": "",
        "sector": "Technology",
        "industry": "Cryptocurrency",
        "expired": false,
        "expiration_date": null,
        "logo_urls": ["https://assets.coingecko.com/coins/images/1/large/bitcoin.png"]
    }
}
```

---

##### 1.4 è·å– K çº¿æ•°æ®

**ç¤ºä¾‹è¯·æ±‚**:
```json
{
    "protocolVersion": "2.0",
    "action": "get",
    "requestId": "req_1703123456789_004",
    "timestamp": 1703123456789,
    "data": {
        "type": "klines",
        "symbol": "BINANCE:BTCUSDT",
        "interval": "60",
        "from_time": 1703123456000,
        "to_time": 1703210000000
    }
}
```

**å­—æ®µè¯´æ˜**:
| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `type` | string | âœ… | å›ºå®šä¸º `klines` |
| `symbol` | string | âœ… | æ ‡çš„å…¨åï¼Œæ ¼å¼ï¼š`EXCHANGE:SYMBOL` |
| `interval` | string | âœ… | Kçº¿å‘¨æœŸï¼ˆå¦‚ `1`, `5`, `60`, `1D`ï¼Œä¸æ•°æ®åº“å­—æ®µä¸€è‡´ï¼‰ |
| `from_time` | integer | âœ… | å¼€å§‹æ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰ |
| `to_time` | integer | âœ… | ç»“æŸæ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰ |

**å‘¨æœŸæ˜ å°„**:
| å‰ç«¯å‘¨æœŸ | è¯´æ˜ | å¸å®‰é—´éš” | æ”¯æŒçŠ¶æ€ |
|----------|------|----------|----------|
| **ç§’çº§æ—¶é—´å‘¨æœŸ** |
| `1s` | 1ç§’ | `1s` | ğŸ”¶ é¢„ç•™ï¼ˆå¸å®‰ä¸æ”¯æŒï¼‰ |
| `5s` | 5ç§’ | `5s` | ğŸ”¶ é¢„ç•™ï¼ˆå¸å®‰ä¸æ”¯æŒï¼‰ |
| `10s` | 10ç§’ | `10s` | ğŸ”¶ é¢„ç•™ï¼ˆå¸å®‰ä¸æ”¯æŒï¼‰ |
| `15s` | 15ç§’ | `15s` | ğŸ”¶ é¢„ç•™ï¼ˆå¸å®‰ä¸æ”¯æŒï¼‰ |
| `30s` | 30ç§’ | `30s` | ğŸ”¶ é¢„ç•™ï¼ˆå¸å®‰ä¸æ”¯æŒï¼‰ |
| **åˆ†é’Ÿçº§æ—¶é—´å‘¨æœŸ** |
| `1` | 1åˆ†é’Ÿ | `1m` | âœ… æ”¯æŒ |
| `3` | 3åˆ†é’Ÿ | `3m` | âœ… æ”¯æŒ |
| `5` | 5åˆ†é’Ÿ | `5m` | âœ… æ”¯æŒ |
| `15` | 15åˆ†é’Ÿ | `15m` | âœ… æ”¯æŒ |
| `30` | 30åˆ†é’Ÿ | `30m` | âœ… æ”¯æŒ |
| `45` | 45åˆ†é’Ÿ | `45m` | âœ… æ”¯æŒ |
| `60` | 1å°æ—¶ | `1h` | âœ… æ”¯æŒ |
| `120` | 2å°æ—¶ | `2h` | âœ… æ”¯æŒ |
| `240` | 4å°æ—¶ | `4h` | âœ… æ”¯æŒ |
| `360` | 6å°æ—¶ | `6h` | âœ… æ”¯æŒ |
| `480` | 8å°æ—¶ | `8h` | âœ… æ”¯æŒ |
| `720` | 12å°æ—¶ | `12h` | âœ… æ”¯æŒ |
| **å¤©çº§æ—¶é—´å‘¨æœŸ** |
| `D` | 1å¤© | `1d` | âœ… æ”¯æŒ |
| `1D` | 1å¤©ï¼ˆåˆ«åï¼‰ | `1d` | âœ… æ”¯æŒ |
| `2D` | 2å¤© | `2d` | ğŸ”¶ é¢„ç•™ï¼ˆå¸å®‰ä¸æ”¯æŒï¼‰ |
| `3D` | 3å¤© | `3d` | âœ… æ”¯æŒ |
| `4D` | 4å¤© | `4d` | ğŸ”¶ é¢„ç•™ï¼ˆå¸å®‰ä¸æ”¯æŒï¼‰ |
| `5D` | 5å¤© | `5d` | ğŸ”¶ é¢„ç•™ï¼ˆå¸å®‰ä¸æ”¯æŒï¼‰ |
| `7D` | 7å¤© | `7d` | ğŸ”¶ é¢„ç•™ï¼ˆå¸å®‰ä¸æ”¯æŒï¼‰ |
| **å‘¨çº§æ—¶é—´å‘¨æœŸ** |
| `W` | 1å‘¨ | `1w` | âœ… æ”¯æŒ |
| `2W` | 2å‘¨ | `2w` | ğŸ”¶ é¢„ç•™ï¼ˆå¸å®‰ä¸æ”¯æŒï¼‰ |
| **æœˆçº§æ—¶é—´å‘¨æœŸ** |
| `M` | 1æœˆ | `1M` | âœ… æ”¯æŒ |
| `3M` | 3æœˆ | `3M` | ğŸ”¶ é¢„ç•™ï¼ˆå¸å®‰ä¸æ”¯æŒï¼‰ |
| `6M` | 6æœˆ | `6M` | ğŸ”¶ é¢„ç•™ï¼ˆå¸å®‰ä¸æ”¯æŒï¼‰ |
| `9M` | 9æœˆ | `9M` | ğŸ”¶ é¢„ç•™ï¼ˆå¸å®‰ä¸æ”¯æŒï¼‰ |
| `12M` | 12æœˆ | `12M` | âœ… æ”¯æŒ |
| **å¹´çº§æ—¶é—´å‘¨æœŸ** |
| `12M` | 1å¹´ | `12M` | ğŸ”¶ é¢„ç•™ï¼ˆå¸å®‰ä¸æ”¯æŒï¼‰ |
| `24M` | 2å¹´ | `24M` | ğŸ”¶ é¢„ç•™ï¼ˆå¸å®‰ä¸æ”¯æŒï¼‰ |
| `36M` | 3å¹´ | `36M` | ğŸ”¶ é¢„ç•™ï¼ˆå¸å®‰ä¸æ”¯æŒï¼‰ |
| `60M` | 5å¹´ | `60M` | ğŸ”¶ é¢„ç•™ï¼ˆå¸å®‰ä¸æ”¯æŒï¼‰ |
| `120M` | 10å¹´ | `120M` | ğŸ”¶ é¢„ç•™ï¼ˆå¸å®‰ä¸æ”¯æŒï¼‰ |

> **è¯´æ˜**: TV å›¾è¡¨åº“ä¸æ”¯æŒ `Y` æ ¼å¼è¡¨ç¤ºå¹´ä»½ï¼Œå¹´çº§åˆ†è¾¨ç‡å¿…é¡»ç”¨ `xM` æ ¼å¼ï¼ˆæœˆä»½ï¼‰ã€‚ä¾‹å¦‚ `12M` = 1å¹´ï¼Œ`24M` = 2å¹´ã€‚

**è¯´æ˜**:
- âœ… **æ”¯æŒ**: å¸å®‰APIåŸç”Ÿæ”¯æŒï¼Œå¯æ­£å¸¸è·å–æ•°æ®
- ğŸ”¶ **é¢„ç•™**: æš‚ä¸æ”¯æŒï¼Œä¸ºæœªæ¥æ‰©å±•ä¿ç•™æ˜ å°„å…³ç³»
- å¯¹åº” TradingView çš„ `getBars` æ–¹æ³•
- ç”¨äºè·å– K çº¿å†å²æ•°æ®

**å¼‚æ­¥ä»»åŠ¡ä¸‰é˜¶æ®µæµç¨‹**:

```
1. å®¢æˆ·ç«¯å‘é€è¯·æ±‚
2. æœåŠ¡ç«¯è¿”å› ack ç¡®è®¤ï¼ˆè¿”å› requestIdï¼‰
3. æœåŠ¡ç«¯å¼‚æ­¥å¤„ç†å®Œæˆåè¿”å› successï¼ˆè¿”å› requestId å’Œ klines æ•°æ®ï¼‰
```

**ç¼“å­˜æŸ¥è¯¢ç­–ç•¥ï¼ˆé‡è¦è®¾è®¡ï¼‰**:

> **âš ï¸ æ ¸å¿ƒä¼˜åŒ–ç‚¹ï¼šé¿å…é‡å¤è°ƒç”¨å¸å®‰ API**
>
> Kçº¿å†å²æ•°æ®æŸ¥è¯¢éµå¾ªä»¥ä¸‹ç­–ç•¥ï¼Œ**æ¯æ¬¡é‡æ„éƒ½å¿…é¡»ä¿æŒæ­¤é€»è¾‘**ï¼š

**å¤„ç†æµç¨‹**:
```
1. api-service æ¥æ”¶å‰ç«¯è¯·æ±‚
   â†“
2. æ ¹æ®å‘¨æœŸå¯¹é½æ—¶é—´ï¼ˆfrom_time, to_timeï¼‰
   â†“
3. æŸ¥è¯¢ klines_history è¡¨ï¼ŒéªŒè¯èµ·å§‹å’Œç»“æŸä¸¤ä¸ªç«¯ç‚¹çš„æ•°æ®
   â†“
4. åˆ¤æ–­é€»è¾‘ï¼š
   â”œâ”€â”€ èµ·å§‹ç«¯ç‚¹å­˜åœ¨ AND ç»“æŸç«¯ç‚¹å­˜åœ¨ â†’ ç›´æ¥ä»æ•°æ®åº“è¿”å›ï¼ˆä¸èµ°å¼‚æ­¥ä»»åŠ¡ï¼‰
   â””â”€â”€ ä»»æ„ç«¯ç‚¹ä¸å­˜åœ¨ â†’ åˆ›å»ºå¼‚æ­¥ä»»åŠ¡ï¼Œç”± binance-service è°ƒç”¨å¸å®‰ API
   â†“
5. å¼‚æ­¥ä»»åŠ¡å®Œæˆåï¼Œæ›´æ–° klines_history è¡¨
   â†“
6. data_processor æŸ¥è¯¢ klines_history è¿”å›æ•°æ®ç»™å‰ç«¯
```

**ç«¯ç‚¹éªŒè¯è§„åˆ™**:
- **åªéªŒè¯èµ·å§‹å’Œç»“æŸä¸¤ä¸ªæ—¶é—´ç‚¹**çš„Kçº¿æ•°æ®
- **ä¸­é—´æ•°æ®ä¸éªŒè¯**ï¼ˆç¼ºå¤±ä¸å½±å“å›¾è¡¨æ˜¾ç¤ºï¼Œå¯ç”±å‰ç«¯å¡«å……æˆ–å¿½ç•¥ï¼‰
- éªŒè¯é€šè¿‡ `check_kline_endpoints_exist()` æ–¹æ³•å®ç°

**è®¾è®¡ç†ç”±**:
| æ–¹é¢ | è¯´æ˜ |
|------|------|
| å‡å°‘APIè°ƒç”¨ | æ•°æ®åº“å·²æœ‰è¿‘80ä¸‡æ¡4h Kçº¿æ•°æ®ï¼Œæ— éœ€æ¯æ¬¡é‡å¤è·å– |
| ç«¯ç‚¹å…³é”®æ€§ | èµ·å§‹ç‚¹æ˜¯å›¾è¡¨å·¦è¾¹ç•Œï¼Œç»“æŸç‚¹æ˜¯å›¾è¡¨å³è¾¹ç•Œï¼Œå¿…é¡»å­˜åœ¨ |
| å‰ç«¯å®¹å¿ | TradingView å‰ç«¯å¯ä»¥å¤„ç†ä¸­é—´æ•°æ®ç¼ºå¤±ï¼ˆæ˜¾ç¤ºä¸ºæ–­ç‚¹æˆ–ç­‰å¾…åŠ è½½ï¼‰ |
| èµ„æºèŠ‚çœ | é¿å…ä¸å¿…è¦çš„ç½‘ç»œè¯·æ±‚å’ŒAPIé™æµé£é™© |

**ä»£ç ä½ç½®**:
- **api-service**: `src/gateway/task_router.py` - `_handle_get()` æ–¹æ³•
- **éªŒè¯æ–¹æ³•**: `TasksRepository.check_kline_endpoints_exist()`
- **æ•°æ®ä»“å‚¨**: `TasksRepository.query_klines_range()`

**æ—¥å¿—ç¤ºä¾‹**:
```
# ç¼“å­˜å‘½ä¸­ï¼ˆç«¯ç‚¹å®Œæ•´ï¼‰â†’ ç›´æ¥è¿”å›
INFO - ç¼“å­˜å‘½ä¸­ï¼ˆç«¯ç‚¹å®Œæ•´ï¼‰: BINANCE:BTCUSDT 240 (1763352000000 - 1771156800000)

# ç¼“å­˜ç¼ºå¤±ï¼ˆç«¯ç‚¹ä¸å®Œæ•´ï¼‰â†’ åˆ›å»ºå¼‚æ­¥ä»»åŠ¡
INFO - ç¼“å­˜ç¼ºå¤±ï¼ˆç«¯ç‚¹ä¸å®Œæ•´ï¼‰: BINANCE:BTCUSDT 240 ç¼ºå°‘: from_time, to_timeï¼Œåˆ›å»ºå¼‚æ­¥ä»»åŠ¡
```

**âš ï¸ é‡æ„æ³¨æ„äº‹é¡¹**:
> æ­¤è®¾è®¡æ˜¯ç³»ç»Ÿçš„æ ¸å¿ƒä¼˜åŒ–ç‚¹ï¼Œæ¯æ¬¡é‡æ„ api-service æ—¶å¿…é¡»ä¿ç•™ï¼š
> 1. æ—¶é—´å¯¹é½é€»è¾‘å¿…é¡»åœ¨åˆ›å»ºä»»åŠ¡å‰æ‰§è¡Œ
> 2. å¿…é¡»å…ˆæ£€æŸ¥ `klines_history` è¡¨çš„ç«¯ç‚¹æ•°æ®
> 3. åªæœ‰ç«¯ç‚¹ç¼ºå¤±æ—¶æ‰åˆ›å»ºå¼‚æ­¥ä»»åŠ¡
> 4. è¿åæ­¤è®¾è®¡ä¼šå¯¼è‡´ä¸å¿…è¦çš„ API è°ƒç”¨å’Œæ€§èƒ½é—®é¢˜

**ç¡®è®¤å“åº”ï¼ˆé˜¶æ®µ 2ï¼‰**:
```json
{
    "protocolVersion": "2.0",
    "action": "ack",
    "requestId": "req_1703123456789_004",
    "timestamp": 1703123456790,
    "data": {}
}
```

> **è¯´æ˜**: data ä¸ºç©ºå¯¹è±¡ï¼Œæ— éœ€é¢å¤–ä¿¡æ¯ã€‚requestId å·²è¶³å¤Ÿç”¨äºå…³è”è¯·æ±‚å’Œå“åº”ã€‚

**æˆåŠŸå“åº”ï¼ˆé˜¶æ®µ 3ï¼ŒåŒ…å« K çº¿æ•°æ®ï¼‰**:
```json
{
    "protocolVersion": "2.0",
    "action": "success",
    "requestId": "req_1703123456789_004",
    "timestamp": 1703123456800,
    "data": {
        "type": "klines",
        "symbol": "BINANCE:BTCUSDT",
        "interval": "60",
        "bars": [...],
        "count": 100,
        "no_data": false
    }
}
```

---

##### 1.5 è·å–æœåŠ¡å™¨æ—¶é—´

**ç¤ºä¾‹è¯·æ±‚**:
```json
{
    "protocolVersion": "2.0",
    "action": "get",
    "requestId": "req_1703123456789_005",
    "timestamp": 1703123456789,
    "data": {
        "type": "server_time"
    }
}
```

**è¯´æ˜**:
- å¯¹åº” TradingView çš„ `getServerTime` æ–¹æ³•
- ç”¨äºè·å–æœåŠ¡å™¨æ—¶é—´

---

##### 1.6 æŸ¥è¯¢å½“å‰å®¢æˆ·ç«¯è®¢é˜…

**ç¤ºä¾‹è¯·æ±‚**:
```json
{
    "protocolVersion": "2.0",
    "action": "get",
    "requestId": "req_1703123456789_006",
    "timestamp": 1703123456789,
    "data": {
        "type": "subscriptions"
    }
}
```

**å­—æ®µè¯´æ˜**:
| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `type` | string | âœ… | å›ºå®šä¸º `subscriptions` |

**è¯´æ˜**:
- è‡ªå®šä¹‰æ‰©å±•API
- ç”¨äºæŸ¥è¯¢å½“å‰å®¢æˆ·ç«¯çš„æ‰€æœ‰æ´»è·ƒè®¢é˜…
- è¿”å›å½“å‰è¿æ¥å·²è®¢é˜…çš„æ‰€æœ‰æ•°æ®æµ

---

##### 1.7 æ‰¹é‡è·å– Quotes æŠ¥ä»·æ•°æ®

**ç¤ºä¾‹è¯·æ±‚**:
```json
{
    "protocolVersion": "2.0",
    "action": "get",
    "requestId": "req_1703123456789_006",
    "timestamp": 1703123456789,
    "data": {
        "type": "quotes",
        "symbols": ["BINANCE:BTCUSDT", "BINANCE:ETHUSDT"]
    }
}
```

**å­—æ®µè¯´æ˜**:
| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `type` | string | âœ… | å›ºå®šä¸º `quotes` |
| `symbols` | string[] | âœ… | äº¤æ˜“å¯¹åˆ—è¡¨ï¼Œæ ¼å¼ï¼š`EXCHANGE:SYMBOL` |

**è¯´æ˜**:
- ç”¨äºæ‰¹é‡è·å–å¤šä¸ªäº¤æ˜“å¯¹çš„å®æ—¶æŠ¥ä»·æ•°æ®
- æ•°æ®æ¥æºï¼šå¸å®‰ 24hr ticker ç»Ÿè®¡ API
- æ”¯æŒå¤šäº¤æ˜“æ‰€æ··åˆæŸ¥è¯¢
- å•æ¬¡æœ€å¤š 50 ä¸ªäº¤æ˜“å¯¹

---

#### 2. è®¢é˜…è¯·æ±‚ (v2.0)

**æ ¼å¼è¦æ±‚**: ä½¿ç”¨è®¢é˜…é”®æ•°ç»„æ ¼å¼ï¼Œ`data` ä¸­åŒ…å« `subscriptions` æ•°ç»„å­—æ®µã€‚**ä»…æ”¯æŒæ•°ç»„æ ¼å¼ï¼Œä¸æ”¯æŒå­—å…¸æ ¼å¼ã€‚**

**ç¤ºä¾‹è¯·æ±‚**:
```json
{
    "protocolVersion": "2.0",
    "action": "subscribe",
    "requestId": "req_1703123456789_007",
    "timestamp": 1703123456789,
    "data": {
        "subscriptions": [
            "BINANCE:BTCUSDT@KLINE_1",
            "BINANCE:BTCUSDT@KLINE_60",
            "BINANCE:BTCUSDT@QUOTES",
            "BINANCE:ETHUSDT@KLINE_1",
            "BINANCE:BTCUSDT.PERP@KLINE_1"
        ]
    }
}
```

**è®¢é˜…é”®æ ¼å¼è¯´æ˜**:
- `{EXCHANGE}:{SYMBOL}[.{äº§å“åç¼€}]@{DATA_TYPE}[_{INTERVAL}]`
- æ•°æ®ç±»å‹ï¼š`KLINE`ã€`QUOTES`ã€`TRADE`ï¼ˆTVå…¼å®¹ï¼Œä½¿ç”¨å…¨å¤§å†™æ ¼å¼ï¼‰
- åˆ†è¾¨ç‡ï¼šTVæ ¼å¼ï¼Œå¦‚ `1`ã€`60`ã€`D` ç­‰
- **é‡è¦**: å‰ç«¯å‘é€çš„è®¢é˜…é”®æ ¼å¼ä¸å†…éƒ¨å­˜å‚¨æ ¼å¼å®Œå…¨ä¸€è‡´ï¼Œæ— éœ€å¤§å°å†™è½¬æ¢

**é€Ÿç‡é™åˆ¶**:
- æ¯æ¬¡å‘é€ä¸€ä¸ªè¯·æ±‚åŒ…
- æ¯ä¸ªåŒ…æœ€å¤šåŒ…å« **50ä¸ªæµ**
- è¯·æ±‚é—´éš”ï¼š250msï¼ˆ4æ¬¡/ç§’ï¼‰
- éµå®ˆå¸å®‰WebSocket APIçš„5 msg/sé™åˆ¶ï¼Œç•™å‡ºpingåŒ…ç©ºé—´

**è®¢é˜…ç±»å‹ï¼ˆå·²å®ç°ï¼‰**:
| è®¢é˜…ç±»å‹ | è®¢é˜…é”®ç¤ºä¾‹ | å¸å®‰å¯¹åº”æµ | TVå…¼å®¹ | æ›´æ–°é¢‘ç‡ |
|---------|-----------|-----------|--------|----------|
| `KLINE` | `BINANCE:BTCUSDT@KLINE_1` | `<symbol>@kline_<interval>` | âœ… æ˜¯ | å‘¨æœŸæ›´æ–°ï¼ˆæ¯ç§’èšåˆï¼‰ |
| `QUOTES` | `BINANCE:BTCUSDT@QUOTES` | `<symbol>@ticker` | âœ… æ˜¯ | å®æ—¶æ¨é€ |
| `TRADE` | `BINANCE:BTCUSDT@TRADE` | `<symbol>@trade` | âœ… æ˜¯ | å®æ—¶æ¨é€ |

> **é‡è¦**: TVä¸­ç§°ä¸º"QUOTES"è€Œé"TICKER"ï¼Œç³»ç»Ÿå†…éƒ¨å°†TICKERè½¬æ¢ä¸ºQUOTESä»¥ä¿æŒTVå…¼å®¹æ€§ã€‚

---

#### 3. å–æ¶ˆè®¢é˜…è¯·æ±‚ (v2.0)

**ç²¾ç¡®å–æ¶ˆ**:
```json
{
    "protocolVersion": "2.0",
    "action": "unsubscribe",
    "requestId": "req_1703123456789_008",
    "timestamp": 1703123456789,
    "data": {
        "subscriptions": [
            "BINANCE:BTCUSDT@KLINE_60",
            "BINANCE:BTCUSDT@QUOTES"
        ]
    }
}
```

**å…¨éƒ¨å–æ¶ˆ**:
```json
{
    "protocolVersion": "2.0",
    "action": "unsubscribe",
    "requestId": "req_1703123456789_009",
    "timestamp": 1703123456789,
    "data": {
        "all": true
    }
}
```

---

### æœåŠ¡ç«¯å“åº”

#### 1. GET è¯·æ±‚å“åº”

> **é‡è¦**ï¼šæ‰€æœ‰ GET è¯·æ±‚éƒ½éµå¾ªä¸‰é˜¶æ®µæ¨¡å¼ï¼šæ”¶åˆ°è¯·æ±‚ â†’ **ack ç¡®è®¤** â†’ å¤„ç† â†’ **success å“åº”**

æ‰€æœ‰ GET è¯·æ±‚çš„å“åº”éƒ½ä½¿ç”¨ç»Ÿä¸€çš„ `success` actionï¼Œé€šè¿‡ `type` å­—æ®µåŒºåˆ†å…·ä½“æ“ä½œã€‚**æ³¨æ„ï¼šsuccess æ˜¯æœ€ç»ˆå“åº”ï¼Œè€Œéç¬¬ä¸€é˜¶æ®µç¡®è®¤æ¶ˆæ¯ã€‚**

##### 1.1 æ•°æ®æºé…ç½®å“åº”

**æˆåŠŸå“åº”**:
```json
{
    "protocolVersion": "2.0",
    "action": "success",
    "requestId": "req_1703123456789_001",
    "timestamp": 1703123456790,
    "data": {
        "type": "config",
        "supports_search": true,
        "supports_group_request": false,
        "supports_marks": false,
        "supports_timescale_marks": false,
        "supports_time": true,
        "supported_resolutions": ["1", "5", "15", "60", "240", "1D", "1W", "1M"],
        "currency_codes": ["USDT", "BTC", "ETH", "BNB", "BUSD", "USDC", "FDUSD"],
        "symbols_types": [
            { "name": "All types", "value": "" },
            { "name": "Crypto", "value": "crypto" }
        ]
    }
}
```

---

##### 1.2 äº¤æ˜“å¯¹æœç´¢å“åº”

**æˆåŠŸå“åº”**:
```json
{
    "protocolVersion": "2.0",
    "action": "success",
    "requestId": "req_1703123456789_002",
    "timestamp": 1703123456790,
    "data": {
        "type": "search_symbols",
        "symbols": [
            {
                "symbol": "BINANCE:BTCUSDT",
                "full_name": "BINANCE:BTCUSDT",
                "description": "BTC/USDT",
                "exchange": "BINANCE",
                "ticker": "BTCUSDT",
                "type": "crypto"
            },
            {
                "symbol": "BINANCE:ETHUSDT",
                "full_name": "BINANCE:ETHUSDT",
                "description": "ETH/USDT",
                "exchange": "BINANCE",
                "ticker": "ETHUSDT",
                "type": "crypto"
            }
        ],
        "total": 2,
        "count": 2
    }
}
```

**å­—æ®µè¯´æ˜**:
| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| `symbol` | string | æ ‡çš„å…¨åï¼ˆæ ¼å¼ï¼šEXCHANGE:SYMBOLï¼‰ |
| `full_name` | string | æ ‡çš„å…¨åï¼ˆä¸ symbol ç›¸åŒï¼‰ |
| `description` | string | æ ‡çš„æè¿° |
| `exchange` | string | äº¤æ˜“æ‰€ |
| `ticker` | string | äº¤æ˜“ä»£ç  |
| `type` | string | æ ‡çš„ç±»å‹ |

---

##### 1.3 äº¤æ˜“å¯¹è¯¦æƒ…å“åº”

**æˆåŠŸå“åº”**:
```json
{
    "protocolVersion": "2.0",
    "action": "success",
    "requestId": "req_1703123456789_003",
    "timestamp": 1703123456790,
    "data": {
        "type": "resolve_symbol",
        "name": "BTCUSDT",
        "ticker": "BINANCE:BTCUSDT",
        "description": "BTC/USDT",
        "type": "crypto",
        "exchange": "BINANCE",
        "listed_exchange": "BINANCE",
        "currency_code": "USDT",
        "session": "24x7",
        "timezone": "Etc/UTC",
        "format": "price",
        "minmov": 1.0,
        "pricescale": 100,
        "has_intraday": true,
        "has_daily": true,
        "has_weekly_and_monthly": true,
        "visible_plots_set": "ohlcv",
        "data_status": "streaming",
        "supported_resolutions": ["1", "5", "15", "60", "240", "1D", "1W", "1M"],
        "intraday_multipliers": ["1", "5", "15", "60"],
        "daily_multipliers": ["1"],
        "weekly_multipliers": ["1"],
        "monthly_multipliers": ["1"],
        "volume_precision": 8,
        "delay": 0,
        "session_holidays": ""
    }
}
```

---

##### 1.4 K çº¿æ•°æ®å“åº”

**æˆåŠŸå“åº”**:
```json
{
    "protocolVersion": "2.0",
    "action": "success",
    "requestId": "req_1703123456789_004",
    "timestamp": 1703123456790,
    "data": {
        "type": "klines",
        "symbol": "BINANCE:BTCUSDT",
        "interval": "60",
        "bars": [
            {
                "time": 1703123456000,
                "open": 42000.50,
                "high": 42100.00,
                "low": 41950.00,
                "close": 42080.00,
                "volume": 125.4321
            }
        ],
        "count": 1,
        "no_data": false
    }
}
```

**Bar æ•°æ®ç»“æ„**:
```json
{
    "time": 1703123456000,      // baræ—¶é—´ï¼ˆUnixæ—¶é—´æˆ³ï¼Œæ¯«ç§’ï¼ŒUTCï¼‰
    "open": 42000.50,           // å¼€ç›˜ä»·
    "high": 42100.00,            // æœ€é«˜ä»·
    "low": 41950.00,            // æœ€ä½ä»·
    "close": 42080.00,          // æ”¶ç›˜ä»·
    "volume": 125.4321           // äº¤æ˜“é‡ï¼ˆå¯é€‰ï¼‰
}
```

---

##### 1.5 æœåŠ¡å™¨æ—¶é—´å“åº”

**æˆåŠŸå“åº”**:
```json
{
    "protocolVersion": "2.0",
    "action": "success",
    "requestId": "req_1703123456789_005",
    "timestamp": 1703123456790,
    "data": {
        "type": "server_time",
        "server_time": 1703123456789,
        "timezone": "UTC"
    }
}
```

---

##### 1.6 æŸ¥è¯¢å½“å‰å®¢æˆ·ç«¯è®¢é˜…å“åº”

**æˆåŠŸå“åº”**:
```json
{
    "protocolVersion": "2.0",
    "action": "success",
    "requestId": "req_1703123456789_006",
    "timestamp": 1703123456790,
    "data": {
        "type": "subscriptions",
        "subscriptions": [
            {
                "subscriptionKey": "BINANCE:BTCUSDT@KLINE_1",
                "dataType": "kline",
                "exchange": "BINANCE",
                "symbol": "BTCUSDT",
                "interval": "1",
                "productType": "spot",
                "status": "active",
                "subscribedAt": 1703123456000,
                "messageCount": 156,
                "lastMessageAt": 1703123456790
            },
            {
                "subscriptionKey": "BINANCE:BTCUSDT@QUOTES",
                "dataType": "quotes",
                "exchange": "BINANCE",
                "symbol": "BTCUSDT",
                "productType": "spot",
                "status": "active",
                "subscribedAt": 1703123456500,
                "messageCount": 89,
                "lastMessageAt": 1703123456785
            },
            {
                "subscriptionKey": "BINANCE:ETHUSDT@KLINE_60",
                "dataType": "kline",
                "exchange": "BINANCE",
                "symbol": "ETHUSDT",
                "interval": "60",
                "productType": "spot",
                "status": "active",
                "subscribedAt": 1703123457000,
                "messageCount": 23,
                "lastMessageAt": 1703123456770
            }
        ],
        "total": 3,
        "activeCount": 3,
        "inactiveCount": 0
    }
}
```

**å­—æ®µè¯´æ˜**:
| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| `subscriptions` | array | è®¢é˜…åˆ—è¡¨ |
| `subscriptions[].subscriptionKey` | string | è®¢é˜…é”®ï¼ˆv2.0æ ¼å¼ï¼‰ |
| `subscriptions[].dataType` | string | æ•°æ®ç±»å‹ï¼ˆkline/quotes/tradeï¼‰ |
| `subscriptions[].exchange` | string | äº¤æ˜“æ‰€ä»£ç  |
| `subscriptions[].symbol` | string | äº¤æ˜“å¯¹ä»£ç  |
| `subscriptions[].interval` | string | åˆ†è¾¨ç‡ï¼ˆå¦‚é€‚ç”¨ï¼‰ |
| `subscriptions[].productType` | string | äº§å“ç±»å‹ï¼ˆspot/perpetual/quarterlyï¼‰ |
| `subscriptions[].status` | string | è®¢é˜…çŠ¶æ€ï¼ˆactive/inactive/errorï¼‰ |
| `subscriptions[].subscribedAt` | number | è®¢é˜…æ—¶é—´æˆ³ |
| `subscriptions[].messageCount` | number | æ¥æ”¶åˆ°çš„æ¶ˆæ¯æ•°é‡ |
| `subscriptions[].lastMessageAt` | number | æœ€åä¸€æ¡æ¶ˆæ¯æ—¶é—´æˆ³ |
| `total` | number | æ€»è®¢é˜…æ•° |
| `activeCount` | number | æ´»è·ƒè®¢é˜…æ•° |
| `inactiveCount` | number | éæ´»è·ƒè®¢é˜…æ•° |

**è¯´æ˜**:
- è¿”å›å½“å‰å®¢æˆ·ç«¯çš„æ‰€æœ‰è®¢é˜…ä¿¡æ¯
- åŒ…æ‹¬è®¢é˜…é”®ã€çŠ¶æ€ã€ç»Ÿè®¡ä¿¡æ¯ç­‰
- ç”¨äºå‰ç«¯è‡ªåŠ©æŸ¥è¯¢å’Œç®¡ç†è®¢é˜…

**ç©ºè®¢é˜…å“åº”**:
```json
{
    "protocolVersion": "2.0",
    "action": "success",
    "requestId": "req_1703123456789_006",
    "timestamp": 1703123456790,
    "data": {
        "type": "subscriptions",
        "subscriptions": [],
        "total": 0,
        "activeCount": 0,
        "inactiveCount": 0
    }
}
```

---

##### 1.7 Quotes æŠ¥ä»·æ•°æ®å“åº”

**æˆåŠŸå“åº”**:
```json
{
    "protocolVersion": "2.0",
    "action": "success",
    "requestId": "req_1703123456789_006",
    "timestamp": 1703123456790,
    "data": {
        "type": "quotes",
        "quotes": [
            {
                "n": "BINANCE:BTCUSDT",
                "s": "ok",
                "v": {
                    "ch": 123.45,
                    "chp": 2.35,
                    "short_name": "BTCUSDT",
                    "exchange": "BINANCE",
                    "description": "æ¯”ç‰¹å¸/æ³°è¾¾å¸",
                    "lp": 50000.00,
                    "ask": 50001.00,
                    "bid": 49999.00,
                    "spread": 2.00,
                    "open_price": 49000.00,
                    "high_price": 50500.00,
                    "low_price": 48800.00,
                    "prev_close_price": 49876.55,
                    "volume": 1234.56
                }
            },
            {
                "n": "BINANCE:ETHUSDT",
                "s": "ok",
                "v": {
                    "ch": -50.25,
                    "chp": -1.35,
                    "lp": 3680.50,
                    "ask": 3681.00,
                    "bid": 3680.00,
                    "spread": 1.00,
                    "open_price": 3635.30,
                    "high_price": 3720.00,
                    "low_price": 3610.00,
                    "prev_close_price": 3730.75,
                    "volume": 234567.80
                }
            }
        ]
    }
}
```

**Quotes æ•°æ®å­—æ®µè¯´æ˜**:
| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| `n` | string | æ ‡çš„å…¨åï¼ˆEXCHANGE:SYMBOLï¼‰ |
| `s` | string | çŠ¶æ€ï¼ˆok/errorï¼‰ |
| `v.ch` | number | ä»·æ ¼å˜åŒ– |
| `v.chp` | number | ä»·æ ¼å˜åŒ–ç™¾åˆ†æ¯” |
| `v.short_name` | string | çŸ­åç§°ï¼ˆå¦‚ BTCUSDTï¼‰ |
| `v.exchange` | string | äº¤æ˜“æ‰€åç§°ï¼ˆå¦‚ BINANCEï¼‰ |
| `v.description` | string | æ ‡çš„æè¿°ï¼ˆå¦‚ æ¯”ç‰¹å¸/æ³°è¾¾å¸ï¼‰ |
| `v.lp` | number | æœ€æ–°ä»·æ ¼ï¼ˆlast priceï¼‰ |
| `v.ask` | number | å–ä»· |
| `v.bid` | number | ä¹°ä»· |
| `v.spread` | number | ä»·å·® |
| `v.open_price` | number | å¼€ç›˜ä»· |
| `v.high_price` | number | æœ€é«˜ä»· |
| `v.low_price` | number | æœ€ä½ä»· |
| `v.prev_close_price` | number | å‰æ”¶ç›˜ä»· |
| `v.volume` | number | æˆäº¤é‡ |

**æ•°æ®æ¥æº**:
- å¸å®‰ 24hr ticker ç»Ÿè®¡ APIï¼š`/api/v3/ticker/24hr`
- æ•°æ®è½¬æ¢ï¼šå°†å¸å®‰ ticker å­—æ®µæ˜ å°„ä¸º TradingView quotes æ ¼å¼

---

##### 1.8 å‘Šè­¦é…ç½®ç®¡ç†

å‘Šè­¦é…ç½®ç³»ç»Ÿç”¨äºåˆ›å»ºå’Œç®¡ç†äº¤æ˜“ç­–ç•¥å‘Šè­¦ï¼Œæ”¯æŒ MACD å…±æŒ¯ç­‰ä¿¡å·ç­–ç•¥çš„å®æ—¶ç›‘æ§ã€‚

###### 1.8.1 åˆ›å»ºå‘Šè­¦é…ç½®

**ç¤ºä¾‹è¯·æ±‚**:
```json
{
    "protocolVersion": "2.0",
    "action": "get",
    "requestId": "req_alert_001",
    "timestamp": 1704067200000,
    "data": {
        "type": "create_alert_config",
        "name": "macd_resonance_btcusdt",
        "description": "BTCUSDT MACDå…±æŒ¯å‘Šè­¦",
        "strategy_type": "MACDResonanceStrategyV5",
        "symbol": "BINANCE:BTCUSDT",
        "interval": "60",
        "trigger_type": "each_kline_close",
        "params": {
            "macd1_fastperiod": 12,
            "macd1_slowperiod": 26,
            "macd1_signalperiod": 9,
            "macd2_fastperiod": 4,
            "macd2_slowperiod": 20,
            "macd2_signalperiod": 4
        },
        "is_enabled": true,
        "created_by": "user_001"
    }
}
```

**å­—æ®µè¯´æ˜**:
| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `type` | string | âœ… | å›ºå®šä¸º `create_alert_config` |
| `name` | string | âœ… | å‘Šè­¦åç§° |
| `description` | string | âŒ | å‘Šè­¦æè¿° |
| `strategy_type` | string | âœ… | ç­–ç•¥ç±»å‹ï¼ˆå¦‚ `MACDResonanceStrategyV5`ã€`MACDResonanceStrategyV6`ã€`MACDResonanceShortStrategy`ã€`Alpha01Strategy`ï¼‰ |
| `symbol` | string | âœ… | äº¤æ˜“å¯¹ï¼ˆæ ¼å¼ï¼š`EXCHANGE:SYMBOL`ï¼‰ |
| `interval` | string | âœ… | Kçº¿å‘¨æœŸï¼ˆå¦‚ `1`, `60`, `1D`ï¼‰ |
| `trigger_type` | string | âœ… | è§¦å‘ç±»å‹ï¼ˆ`once_only`, `each_kline`, `each_kline_close`, `each_minute`ï¼‰ |
| `params` | object | âœ… | ç­–ç•¥å‚æ•°ï¼ˆJSONå¯¹è±¡ï¼‰ |
| `is_enabled` | boolean | âœ… | æ˜¯å¦å¯ç”¨ |
| `created_by` | string | âœ… | åˆ›å»ºè€…æ ‡è¯† |

**æˆåŠŸå“åº”**:
```json
{
    "protocolVersion": "2.0",
    "action": "success",
    "requestId": "req_alert_001",
    "timestamp": 1704067201000,
    "data": {
        "type": "create_alert_config",
        "id": "0189a1b2-c3d4-5e6f-7890-abcd12345678",
        "name": "macd_resonance_btcusdt",
        "description": "BTCUSDT MACDå…±æŒ¯å‘Šè­¦",
        "strategy_type": "MACDResonanceStrategyV5",
        "symbol": "BINANCE:BTCUSDT",
        "interval": "60",
        "trigger_type": "each_kline_close",
        "params": {
            "macd1_fastperiod": 12,
            "macd1_slowperiod": 26,
            "macd1_signalperiod": 9,
            "macd2_fastperiod": 4,
            "macd2_slowperiod": 20,
            "macd2_signalperiod": 4
        },
        "is_enabled": true,
        "created_at": "2026-02-13T10:00:00Z",
        "created_by": "user_001"
    }
}
```

---

###### 1.8.2 åˆ—å‡ºå‘Šè­¦é…ç½®

**ç¤ºä¾‹è¯·æ±‚**:
```json
{
    "protocolVersion": "2.0",
    "action": "get",
    "requestId": "req_list_001",
    "timestamp": 1704067200000,
    "data": {
        "type": "list_alert_configs",
        "page": 1,
        "page_size": 20,
        "strategy_type": "MACDResonanceStrategyV5",
        "symbol": "BINANCE:BTCUSDT"
    }
}
```

**æˆåŠŸå“åº”**:
```json
{
    "protocolVersion": "2.0",
    "action": "success",
    "requestId": "req_list_001",
    "timestamp": 1704067201000,
    "data": {
        "type": "list_alert_configs",
        "items": [
            {
                "id": "0189a1b2-c3d4-5e6f-7890-abcd12345678",
                "name": "macd_resonance_btcusdt",
                "description": "BTCUSDT MACDå…±æŒ¯å‘Šè­¦",
                "strategy_type": "MACDResonanceStrategyV5",
                "symbol": "BINANCE:BTCUSDT",
                "interval": "60",
                "trigger_type": "each_kline_close",
                "params": {
                    "macd1_fastperiod": 12,
                    "macd1_slowperiod": 26,
                    "macd1_signalperiod": 9,
                    "macd2_fastperiod": 5,
                    "macd2_slowperiod": 35,
                    "macd2_signalperiod": 5
                },
                "is_enabled": true,
                "created_at": "2026-02-13T10:00:00Z",
                "created_by": "user_001"
            }
        ],
        "total": 1,
        "page": 1,
        "page_size": 20
    }
}
```

---

###### 1.8.3 æŸ¥è¯¢å†å²ä¿¡å·

**ç¤ºä¾‹è¯·æ±‚**:
```json
{
    "protocolVersion": "2.0",
    "action": "get",
    "requestId": "req_signals_001",
    "timestamp": 1704067200000,
    "data": {
        "type": "list_signals",
        "page": 1,
        "page_size": 20,
        "symbol": "BINANCE:BTCUSDT",
        "strategy_type": "MACDResonanceStrategyV5",
        "from_time": 1703980800000,
        "to_time": 1704067200000
    }
}
```

**æˆåŠŸå“åº”**:
```json
{
    "protocolVersion": "2.0",
    "action": "success",
    "requestId": "req_signals_001",
    "timestamp": 1704067201000,
    "data": {
        "type": "list_signals",
        "items": [
            {
                "id": 1,
                "signal_id": "0189a1b3-c4d5-6e7f-8901-bcde23456789",
                "alert_id": "0189a1b2-c3d4-5e6f-7890-abcd12345678",
                "created_by": "user_001",
                "strategy_type": "MACDResonanceStrategyV5",
                "symbol": "BINANCE:BTCUSDT",
                "interval": "60",
                "signal_value": true,
                "computed_at": "2026-02-13T10:00:00Z"
            }
        ],
        "total": 1,
        "page": 1,
        "page_size": 20
    }
}
```

**ä¿¡å·å€¼è¯´æ˜**:
| å€¼ | è¯´æ˜ |
|---|------|
| `true` | åšå¤šä¿¡å· |
| `false` | åšç©ºä¿¡å· |
| `null` | æ— ä¿¡å·/è§‚æœ› |

---

###### 1.8.4 æ›´æ–°å‘Šè­¦é…ç½®

**è¯·æ±‚å­—æ®µè¯´æ˜**ï¼š

| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| type | string | âœ… | å›ºå®šä¸º `update_alert_config` |
| id | string | âœ… | å‘Šè­¦é…ç½® ID |
| name | string | - | å‘Šè­¦åç§° |
| description | string | - | å‘Šè­¦æè¿° |
| strategy_type | string | - | ç­–ç•¥ç±»å‹ï¼ˆå¦‚ MACDResonanceStrategyV5ï¼‰ |
| symbol | string | - | äº¤æ˜“å¯¹ï¼ˆå¦‚ BINANCE:BTCUSDTï¼‰ |
| interval | string | - | Kçº¿å‘¨æœŸï¼ˆå¦‚ 60ï¼‰ |
| trigger_type | string | - | è§¦å‘ç±»å‹ |
| params | object | - | ç­–ç•¥å‚æ•° |
| is_enabled | boolean | - | æ˜¯å¦å¯ç”¨ |

**ç¤ºä¾‹è¯·æ±‚**:
```json
{
    "protocolVersion": "2.0",
    "action": "get",
    "requestId": "req_update_001",
    "timestamp": 1704067200000,
    "data": {
        "type": "update_alert_config",
        "id": "0189a1b2-c3d4-5e6f-7890-abcd12345678",
        "name": "macd_resonance_btcusdt_updated",
        "strategy_type": "MACDResonanceStrategyV5",
        "params": {
            "fast1": 8,
            "macd1_slowperiod": 21,
            "macd1_signalperiod": 5,
            "macd2_fastperiod": 3,
            "macd2_slowperiod": 15,
            "macd2_signalperiod": 3
        }
    }
}
```

**æˆåŠŸå“åº”**ï¼š
```json
{
    "protocolVersion": "2.0",
    "action": "success",
    "requestId": "req_update_001",
    "timestamp": 1704067201000,
    "data": {
        "type": "update_alert_config",
        "id": "0189a1b2-c3d4-5e6f-7890-abcd12345678",
        "name": "macd_resonance_btcusdt_updated",
        "description": "æ›´æ–°åçš„æè¿°",
        "strategy_type": "MACDResonanceStrategyV5",
        "symbol": "BINANCE:BTCUSDT",
        "interval": "60",
        "trigger_type": "each_kline_close",
        "params": {
            "fast1": 8,
            "macd1_slowperiod": 21,
            "macd1_signalperiod": 5,
            "macd2_fastperiod": 3,
            "macd2_slowperiod": 15,
            "macd2_signalperiod": 3
        },
        "is_enabled": true,
        "created_at": "2026-02-13T10:00:00Z",
        "updated_at": "2026-02-13T11:00:00Z",
        "created_by": "user_001"
    }
}
```

**é‡è¦è¯´æ˜**ï¼š
- æ›´æ–°å“åº”è¿”å›å®Œæ•´çš„å‘Šè­¦é…ç½®æ•°æ®ï¼Œå‰ç«¯éœ€è¦ä½¿ç”¨æ­¤æ•°æ®æ›´æ–°æœ¬åœ°çŠ¶æ€
- ä¸ `create_alert_config` å“åº”æ ¼å¼ä¿æŒä¸€è‡´ï¼Œç¡®ä¿å‰ç«¯ç»Ÿä¸€å¤„ç†

---

###### 1.8.5 åˆ é™¤å‘Šè­¦é…ç½®

**ç¤ºä¾‹è¯·æ±‚**:
```json
{
    "protocolVersion": "2.0",
    "action": "get",
    "requestId": "req_delete_001",
    "timestamp": 1704067200000,
    "data": {
        "type": "delete_alert_config",
        "id": "0189a1b2-c3d4-5e6f-7890-abcd12345678"
    }
}
```

---

###### 1.8.6 å¯ç”¨/ç¦ç”¨å‘Šè­¦é…ç½®

**å¯ç”¨è¯·æ±‚**:
```json
{
    "protocolVersion": "2.0",
    "action": "get",
    "requestId": "req_enable_001",
    "timestamp": 1704067200000,
    "data": {
        "type": "enable_alert_config",
        "id": "0189a1b2-c3d4-5e6f-7890-abcd12345678"
    }
}
```

---

##### 1.9 ç­–ç•¥å…ƒæ•°æ®ç®¡ç†

ç­–ç•¥å…ƒæ•°æ®APIç”¨äºè·å–ç³»ç»Ÿå·²æ³¨å†Œçš„ç­–ç•¥åˆ—è¡¨åŠå…¶å‚æ•°å®šä¹‰ã€‚å‰ç«¯åœ¨åˆ›å»º/ç¼–è¾‘å‘Šè­¦æ—¶ï¼Œéœ€è¦å…ˆè°ƒç”¨ `get_strategy_metadata` è·å–ç­–ç•¥åˆ—è¡¨ï¼Œç„¶åæ ¹æ®ç”¨æˆ·é€‰æ‹©çš„ç­–ç•¥ç±»å‹çš„ `type` å­—æ®µï¼ˆç­–ç•¥ç±»åï¼‰ä½œä¸º `strategy_type` å€¼å‘é€è¯·æ±‚ã€‚

**é‡è¦**ï¼š
- `type` å­—æ®µçš„å€¼ä¸ºç­–ç•¥**ç±»å**ï¼ˆå¦‚ `MACDResonanceStrategyV5`ï¼‰ï¼Œå‰ç«¯å¿…é¡»ä½¿ç”¨æ­¤å€¼ä½œä¸ºåˆ›å»º/æ›´æ–°å‘Šè­¦æ—¶çš„ `strategy_type` å­—æ®µ
- å‰ç«¯**ç¦æ­¢**è‡ªè¡Œè½¬æ¢æˆ–æ˜ å°„ç­–ç•¥ç±»å‹ï¼Œå¿…é¡»ç›´æ¥ä½¿ç”¨åç«¯è¿”å›çš„ `type` å€¼
- å¯ç”¨ç­–ç•¥ç±»å‹ï¼š`MACDResonanceStrategyV5`ã€`MACDResonanceStrategyV6`ã€`MACDResonanceShortStrategy`ã€`Alpha01Strategy`ã€`RandomStrategy`

###### 1.9.1 è·å–æ‰€æœ‰ç­–ç•¥å…ƒæ•°æ®

**ç¤ºä¾‹è¯·æ±‚**:
```json
{
    "protocolVersion": "2.0",
    "action": "get",
    "requestId": "req_strategy_001",
    "timestamp": 1704067200000,
    "data": {
        "type": "get_strategy_metadata"
    }
}
```

**å­—æ®µè¯´æ˜**:
| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `type` | string | âœ… | å›ºå®šä¸º `get_strategy_metadata` |

**æˆåŠŸå“åº”**:
```json
{
    "protocolVersion": "2.0",
    "action": "success",
    "requestId": "req_strategy_001",
    "timestamp": 1704067201000,
    "data": {
        "type": "get_strategy_metadata",
        "strategies": [
            {
                "type": "MACDResonanceStrategyV5",
                "name": "MACDå…±æŒ¯ç­–ç•¥V5",
                "description": "åŒMACDæŒ‡æ ‡é‡‘å‰/æ­»å‰å…±æŒ¯ï¼Œç»“åˆEMAå‡çº¿ç³»ç»Ÿè¿‡æ»¤ï¼Œæ•æ‰è¶‹åŠ¿äº¤æ˜“æœºä¼š",
                "params": [
                    {
                        "name": "macd1_fastperiod",
                        "type": "int",
                        "default": 12,
                        "min": 1,
                        "max": 100,
                        "description": "MACD1å¿«é€ŸEMAå‘¨æœŸ"
                    },
                    {
                        "name": "macd1_slowperiod",
                        "type": "int",
                        "default": 26,
                        "min": 1,
                        "max": 200,
                        "description": "MACD1æ…¢é€ŸEMAå‘¨æœŸ"
                    },
                    {
                        "name": "macd1_signalperiod",
                        "type": "int",
                        "default": 9,
                        "min": 1,
                        "max": 50,
                        "description": "MACD1ä¿¡å·çº¿å‘¨æœŸ"
                    },
                    {
                        "name": "macd2_fastperiod",
                        "type": "int",
                        "default": 4,
                        "min": 1,
                        "max": 50,
                        "description": "MACD2å¿«é€ŸEMAå‘¨æœŸ"
                    },
                    {
                        "name": "macd2_slowperiod",
                        "type": "int",
                        "default": 20,
                        "min": 1,
                        "max": 100,
                        "description": "MACD2æ…¢é€ŸEMAå‘¨æœŸ"
                    },
                    {
                        "name": "macd2_signalperiod",
                        "type": "int",
                        "default": 4,
                        "min": 1,
                        "max": 50,
                        "description": "MACD2ä¿¡å·çº¿å‘¨æœŸ"
                    }
                ]
            },
            {
                "type": "MACDResonanceStrategyV6",
                "name": "MACDå…±æŒ¯ç­–ç•¥V6",
                "description": "MACDå…±æŒ¯ç­–ç•¥V6æ€§èƒ½ä¼˜åŒ–ç‰ˆï¼Œä½¿ç”¨numpyæ•°ç»„æ›¿ä»£pandas Seriesè¿›è¡Œè®¡ç®—ï¼Œå¤§å¹…æå‡æ€§èƒ½",
                "params": [
                    {
                        "name": "macd1_fastperiod",
                        "type": "int",
                        "default": 12,
                        "min": 1,
                        "max": 100,
                        "description": "MACD1å¿«é€ŸEMAå‘¨æœŸ"
                    },
                    {
                        "name": "macd1_slowperiod",
                        "type": "int",
                        "default": 26,
                        "min": 1,
                        "max": 200,
                        "description": "MACD1æ…¢é€ŸEMAå‘¨æœŸ"
                    },
                    {
                        "name": "macd1_signalperiod",
                        "type": "int",
                        "default": 9,
                        "min": 1,
                        "max": 50,
                        "description": "MACD1ä¿¡å·çº¿å‘¨æœŸ"
                    },
                    {
                        "name": "macd2_fastperiod",
                        "type": "int",
                        "default": 4,
                        "min": 1,
                        "max": 50,
                        "description": "MACD2å¿«é€ŸEMAå‘¨æœŸ"
                    },
                    {
                        "name": "macd2_slowperiod",
                        "type": "int",
                        "default": 20,
                        "min": 1,
                        "max": 100,
                        "description": "MACD2æ…¢é€ŸEMAå‘¨æœŸ"
                    },
                    {
                        "name": "macd2_signalperiod",
                        "type": "int",
                        "default": 4,
                        "min": 1,
                        "max": 50,
                        "description": "MACD2ä¿¡å·çº¿å‘¨æœŸ"
                    }
                ]
            },
            {
                "type": "MACDResonanceShortStrategy",
                "name": "MACDåšç©ºç­–ç•¥",
                "description": "åŸºäºåŒMACDå…±æŒ¯çš„åŸºæœ¬åšç©ºç­–ç•¥ï¼Œé€šè¿‡æ­»å‰ä¿¡å·æ•æ‰ä¸‹è·Œè¶‹åŠ¿ä¸­çš„åšç©ºæœºä¼š",
                "params": [
                    {
                        "name": "macd1_fastperiod",
                        "type": "int",
                        "default": 12,
                        "min": 1,
                        "max": 100,
                        "description": "MACD1å¿«é€ŸEMAå‘¨æœŸ"
                    },
                    {
                        "name": "macd1_slowperiod",
                        "type": "int",
                        "default": 26,
                        "min": 1,
                        "max": 200,
                        "description": "MACD1æ…¢é€ŸEMAå‘¨æœŸ"
                    },
                    {
                        "name": "macd1_signalperiod",
                        "type": "int",
                        "default": 9,
                        "min": 1,
                        "max": 50,
                        "description": "MACD1ä¿¡å·çº¿å‘¨æœŸ"
                    },
                    {
                        "name": "macd2_fastperiod",
                        "type": "int",
                        "default": 4,
                        "min": 1,
                        "max": 50,
                        "description": "MACD2å¿«é€ŸEMAå‘¨æœŸ"
                    },
                    {
                        "name": "macd2_slowperiod",
                        "type": "int",
                        "default": 20,
                        "min": 1,
                        "max": 100,
                        "description": "MACD2æ…¢é€ŸEMAå‘¨æœŸ"
                    },
                    {
                        "name": "macd2_signalperiod",
                        "type": "int",
                        "default": 4,
                        "min": 1,
                        "max": 50,
                        "description": "MACD2ä¿¡å·çº¿å‘¨æœŸ"
                    }
                ]
            },
            {
                "type": "Alpha01Strategy",
                "name": "Alpha01ç­–ç•¥",
                "description": "åŸºäºATRæ­¢æŸå’Œæ¢è½´ç‚¹çš„è¶‹åŠ¿è·Ÿè¸ªç­–ç•¥",
                "params": [
                    {
                        "name": "ema_period",
                        "type": "int",
                        "default": 50,
                        "min": 1,
                        "max": 500,
                        "description": "EMAå‘¨æœŸ"
                    },
                    {
                        "name": "volume_ma_period",
                        "type": "int",
                        "default": 20,
                        "min": 1,
                        "max": 200,
                        "description": "æˆäº¤é‡MAå‘¨æœŸ"
                    },
                    {
                        "name": "threshold",
                        "type": "float",
                        "default": 0.02,
                        "min": 0.0,
                        "max": 1.0,
                        "description": "é˜ˆå€¼"
                    }
                ]
            }
        ]
    }
}
```

**å­—æ®µè¯´æ˜**:
| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| `strategies` | array | ç­–ç•¥å…ƒæ•°æ®æ•°ç»„ |
| `strategies[].type` | string | ç­–ç•¥ç±»å‹æ ‡è¯†ç¬¦ |
| `strategies[].name` | string | ç­–ç•¥æ˜¾ç¤ºåç§° |
| `strategies[].description` | string | ç­–ç•¥æè¿° |
| `strategies[].params` | array | ç­–ç•¥å‚æ•°æ•°ç»„ |
| `params[].name` | string | å‚æ•°åç§° |
| `params[].type` | string | å‚æ•°ç±»å‹ï¼ˆint, float, boolï¼‰ |
| `params[].default` | number/boolean | é»˜è®¤å€¼ |
| `params[].min` | number | æœ€å°å€¼ |
| `params[].max` | number | æœ€å¤§å€¼ |
| `params[].description` | string | å‚æ•°æè¿° |

**ä½¿ç”¨åœºæ™¯**:
1. å‰ç«¯åŠ è½½å‘Šè­¦é…ç½®è¡¨å•æ—¶ï¼Œå…ˆè°ƒç”¨æ­¤æ¥å£è·å–ç­–ç•¥åˆ—è¡¨
2. ç”¨æˆ·é€‰æ‹©ç­–ç•¥åï¼Œå‰ç«¯æ ¹æ® `params` æ•°ç»„åŠ¨æ€æ¸²æŸ“å‚æ•°è¾“å…¥æ§ä»¶
3. å‚æ•°ç±»å‹å†³å®šä½¿ç”¨å“ªç§è¾“å…¥ç»„ä»¶ï¼ˆint/float ç”¨æ•°å­—è¾“å…¥æ¡†ï¼Œbool ç”¨å¼€å…³ï¼‰

---

###### 1.9.2 è·å–æŒ‡å®šç­–ç•¥å…ƒæ•°æ®

**ç¤ºä¾‹è¯·æ±‚**:
```json
{
    "protocolVersion": "2.0",
    "action": "get",
    "requestId": "req_strategy_002",
    "timestamp": 1704067200000,
    "data": {
        "type": "get_strategy_metadata_by_type",
        "strategy_type": "MACDResonanceStrategyV5"
    }
}
```

**å­—æ®µè¯´æ˜**:
| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `type` | string | âœ… | å›ºå®šä¸º `get_strategy_metadata_by_type` |
| `strategy_type` | string | âœ… | ç­–ç•¥ç±»å‹æ ‡è¯†ç¬¦ |

**æˆåŠŸå“åº”**:
```json
{
    "protocolVersion": "2.0",
    "action": "success",
    "requestId": "req_strategy_002",
    "timestamp": 1704067201000,
    "data": {
        "type": "get_strategy_metadata_by_type",
        "strategy": {
            "type": "MACDResonanceStrategyV5",
            "name": "MACDå…±æŒ¯ç­–ç•¥V5",
            "description": "åŒMACDæŒ‡æ ‡é‡‘å‰/æ­»å‰å…±æŒ¯ï¼Œç»“åˆEMAå‡çº¿ç³»ç»Ÿè¿‡æ»¤ï¼Œæ•æ‰è¶‹åŠ¿äº¤æ˜“æœºä¼š",
            "params": [
                {
                    "name": "macd1_fastperiod",
                    "type": "int",
                    "default": 12,
                    "min": 1,
                    "max": 100,
                    "description": "MACD1å¿«é€ŸEMAå‘¨æœŸ"
                }
            ]
        }
    }
}
```

---

#### 2. è®¢é˜…ç¡®è®¤å“åº” (v2.0)

> **é‡è¦**ï¼šè®¢é˜…è¯·æ±‚éµå¾ªä¸‰é˜¶æ®µæ¨¡å¼ï¼šæ”¶åˆ°è¯·æ±‚ â†’ **ack ç¡®è®¤** â†’ å¤„ç† â†’ **success å“åº”**
>
> **æ³¨æ„**ï¼š`success` å“åº”**ä¸æ˜¯å®æ—¶æ•°æ®**ï¼Œå®æ—¶æ•°æ®é€šè¿‡ç‹¬ç«‹çš„ `update` æ¨é€æ¶ˆæ¯ä¼ é€’ã€‚

**å“åº”æ ¼å¼**:
```json
// é˜¶æ®µ1: ack ç¡®è®¤
{
    "protocolVersion": "2.0",
    "action": "ack",
    "requestId": "req_1703123456789_007",
    "timestamp": 1703123456790,
    "data": {}
}

// é˜¶æ®µ2: success å“åº”
{
    "protocolVersion": "2.0",
    "action": "success",
    "requestId": "req_1703123456789_007",
    "timestamp": 1703123456790,
    "data": {
        "type": "subscribe"
    }
}
```

**ä¸‰é˜¶æ®µè¯´æ˜**ï¼š

| é˜¶æ®µ | action | æ˜¯å¦æœ‰ requestId | è¯´æ˜ |
|------|--------|------------------|------|
| 1 | `ack` | âœ… æœ‰ | ç¡®è®¤æ”¶åˆ°è®¢é˜…è¯·æ±‚ï¼Œè¿”å›ç©º data å¯¹è±¡ |
| 2 | `success` | âœ… æœ‰ | ç¡®è®¤è®¢é˜…å¤„ç†å®Œæˆï¼Œ**ä¸åŒ…å«å®é™…æ•°æ®**ï¼Œä»…ç¡®è®¤ç±»å‹ |
| - | `update` | âŒ æ—  | **å®æ—¶æ•°æ®æ¨é€**ï¼ˆç‹¬ç«‹æœºåˆ¶ï¼Œä¸å±äºè¯·æ±‚-å“åº”æµç¨‹ï¼‰ |

**é‡è¦åŒºåˆ†**ï¼š
- `success` å“åº”ï¼šè¯·æ±‚-å“åº”æ¨¡å¼çš„æœ€ç»ˆå›å¤ï¼ŒåŒ…å« `requestId`
- `update` æ¨é€ï¼šæœåŠ¡ç«¯ä¸»åŠ¨æ¨é€çš„å®æ—¶æ•°æ®ï¼Œ**ä¸åŒ…å« requestId**ï¼Œéµå¾ª TradingView è§„èŒƒ
- è®¢é˜…æ˜¯å¦æˆåŠŸé€šè¿‡åç»­çš„ `update` æ¨é€æ¶ˆæ¯æ¥éªŒè¯

---

#### 3. å–æ¶ˆè®¢é˜…ç¡®è®¤å“åº” (v2.0)

> **é‡è¦**ï¼šå–æ¶ˆè®¢é˜…è¯·æ±‚éµå¾ªä¸‰é˜¶æ®µæ¨¡å¼ï¼šæ”¶åˆ°è¯·æ±‚ â†’ **ack ç¡®è®¤** â†’ å¤„ç† â†’ **success å“åº”**

**å“åº”æ ¼å¼**:
```json
// é˜¶æ®µ1: ack ç¡®è®¤
{
    "protocolVersion": "2.0",
    "action": "ack",
    "requestId": "req_1703123456789_008",
    "timestamp": 1703123456790,
    "data": {}
}

// é˜¶æ®µ2: success å“åº”
{
    "protocolVersion": "2.0",
    "action": "success",
    "requestId": "req_1703123456789_008",
    "timestamp": 1703123456790,
    "data": {
        "type": "unsubscribe"
    }
}
```

**ä¸‰é˜¶æ®µè¯´æ˜**ï¼š

| é˜¶æ®µ | action | æ˜¯å¦æœ‰ requestId | è¯´æ˜ |
|------|--------|------------------|------|
| 1 | `ack` | âœ… æœ‰ | ç¡®è®¤æ”¶åˆ°å–æ¶ˆè®¢é˜…è¯·æ±‚ï¼Œè¿”å›ç©º data å¯¹è±¡ |
| 2 | `success` | âœ… æœ‰ | ç¡®è®¤å–æ¶ˆè®¢é˜…å¤„ç†å®Œæˆ |

**é‡è¦åŒºåˆ†**ï¼š
- `success` å“åº”ï¼šè¯·æ±‚-å“åº”æ¨¡å¼çš„æœ€ç»ˆå›å¤ï¼ŒåŒ…å« `requestId`
- å–æ¶ˆè®¢é˜…ä¸æ¶‰åŠå®æ—¶æ•°æ®æ¨é€ï¼Œå› æ­¤æ—  `update` æ¶ˆæ¯

---

### å®æ—¶æ•°æ®æ¨é€ (v2.0)

> **é‡è¦è¯´æ˜**ï¼š`update` æ¨é€æ˜¯**ç‹¬ç«‹äºè¯·æ±‚-å“åº”æµç¨‹**çš„å®æ—¶æ•°æ®æ¨é€æœºåˆ¶ã€‚
>
> - `success` å“åº”ï¼šå±äºè¯·æ±‚-å“åº”æ¨¡å¼ï¼Œæœ‰ `request `update` Id`
> -æ¨é€ï¼š**ä¸å±äºè¯·æ±‚-å“åº”æµç¨‹**ï¼Œ**æ—  requestId**ï¼Œæ˜¯æœåŠ¡ç«¯ä¸»åŠ¨æ¨é€

#### å‘½åè§„èŒƒ

**å‘½ååŒºåˆ†**ï¼š
- `content`: å®æ—¶æ¨é€çš„å®é™…æ•°æ®å†…å®¹ï¼ˆé¿å…ä¸æ•°æ®åº“ `payload` æ··æ·†ï¼‰
- `payload`: æ•°æ®åº“ä»»åŠ¡è¡¨ï¼ˆtasksï¼‰çš„è½½è·å­—æ®µ

#### é€ä¸ªæ¨é€æ ¼å¼

**Kçº¿æ•°æ®æ¨é€**:
```json
{
    "protocolVersion": "2.0",
    "action": "update",
    "timestamp": 1703123456790,
    "data": {
        "subscriptionKey": "BINANCE:BTCUSDT@KLINE_1",
        "content": {
            "time": 1703123400000,
            "open": 97000.00,
            "high": 97600.00,
            "low": 96800.00,
            "close": 97500.00,
            "volume": 125.43
        }
    }
}
```

**QUOTESæ•°æ®æ¨é€**:
```json
{
    "protocolVersion": "2.0",
    "action": "update",
    "timestamp": 1703123456790,
    "data": {
        "subscriptionKey": "BINANCE:BTCUSDT@QUOTES",
        "content": {
            "n": "BINANCE:BTCUSDT",
            "s": "ok",
            "v": {
                "ch": 123.45,
                "chp": 2.35,
                "short_name": "BTCUSDT",
                "exchange": "BINANCE",
                "description": "æ¯”ç‰¹å¸/æ³°è¾¾å¸",
                "lp": 97500.00,
                "ask": 97501.00,
                "bid": 97499.00,
                "spread": 2.00,
                "open_price": 96249.50,
                "high_price": 98000.00,
                "low_price": 95800.00,
                "prev_close_price": 97376.55,
                "volume": 45678.90
            }
        }
    }
}
```

**QUOTESæ•°æ®æ‰¹é‡æ¨é€**:
```json
{
    "protocolVersion": "2.0",
    "action": "update",
    "timestamp": 1703123456790,
    "data": {
        "subscriptionKey": "BINANCE:BTCUSDT@QUOTES,BINANCE:ETHUSDT@QUOTES",
        "content": [
            {
                "n": "BINANCE:BTCUSDT",
                "s": "ok",
                "v": {
                    "ch": 123.45,
                    "chp": 2.35,
                    "short_name": "BTCUSDT",
                    "exchange": "BINANCE",
                    "description": "æ¯”ç‰¹å¸/æ³°è¾¾å¸",
                    "lp": 97500.00,
                    "ask": 97501.00,
                    "bid": 97499.00,
                    "spread": 2.00,
                    "open_price": 96249.50,
                    "high_price": 98000.00,
                    "low_price": 95800.00,
                    "prev_close_price": 97376.55,
                    "volume": 45678.90
                }
            },
            {
                "n": "BINANCE:ETHUSDT",
                "s": "ok",
                "v": {
                    "ch": 5.67,
                    "chp": 1.23,
                    "short_name": "ETHUSDT",
                    "exchange": "BINANCE",
                    "description": "ä»¥å¤ªåŠ/æ³°è¾¾å¸",
                    "lp": 2300.00,
                    "ask": 2301.00,
                    "bid": 2299.00,
                    "spread": 2.00,
                    "open_price": 2275.50,
                    "high_price": 2310.00,
                    "low_price": 2265.00,
                    "prev_close_price": 2294.33,
                    "volume": 98765.43
                }
            }
        ]
    }
}
```

**TRADEæ•°æ®æ¨é€**:
```json
{
    "protocolVersion": "2.0",
    "action": "update",
    "timestamp": 1703123456790,
    "data": {
        "subscriptionKey": "BINANCE:BTCUSDT@TRADE",
        "content": {
            "price": 97500.00,
            "size": 0.123,
            "time": 1703123456790,
            "side": "buy"
        }
    }
}
```

#### å­—æ®µè¯´æ˜

**é€šç”¨å­—æ®µ**:
- `subscriptionKey`: è®¢é˜…é”®ï¼Œç”¨äºæ ‡è¯†æ•°æ®ç±»å‹å’Œäº¤æ˜“å¯¹
- `content`: å®æ—¶æ•°æ®å†…å®¹ï¼ˆé¿å…ä¸æ•°æ®åº“ tasks è¡¨çš„ payload æ··æ·†ï¼‰

**Kçº¿æ•°æ®å­—æ®µ** (TradingView Baræ ¼å¼):
- `time`: æ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰
- `open`: å¼€ç›˜ä»·
- `high`: æœ€é«˜ä»·
- `low`: æœ€ä½ä»·
- `close`: æ”¶ç›˜ä»·
- `volume`: æˆäº¤é‡ï¼ˆå¯é€‰ï¼‰
- `isBarClosed`: æ˜¯å¦ä¸ºå®Œæˆçš„Kçº¿

**QUOTESæ•°æ®å­—æ®µ** (TradingView Quotesæ ¼å¼):
- `n`: æ ‡çš„å…¨åï¼ˆå¦‚ BINANCE:BTCUSDTï¼‰
- `s`: çŠ¶æ€ï¼ˆok/errorï¼‰
- `v`: æŠ¥ä»·å€¼å¯¹è±¡ï¼ŒåŒ…å«ä»¥ä¸‹å­—æ®µï¼š
  - `ch`: ä»·æ ¼å˜åŒ–
  - `chp`: ä»·æ ¼å˜åŒ–ç™¾åˆ†æ¯”
  - `lp`: æœ€æ–°ä»·æ ¼
  - `ask`: å–ä»·
  - `bid`: ä¹°ä»·
  - `spread`: ä»·å·®
  - `open_price`: å¼€ç›˜ä»·
  - `high_price`: æœ€é«˜ä»·
  - `low_price`: æœ€ä½ä»·
  - `prev_close_price`: å‰æ”¶ç›˜ä»·
  - `volume`: æˆäº¤é‡
  - `short_name`: çŸ­åç§°
  - `exchange`: äº¤æ˜“æ‰€åç§°
  - `description`: æ ‡çš„æè¿°

#### v2.0 æ ¸å¿ƒæ”¹è¿›

1. **å»é™¤å†—ä½™å­—æ®µ**: ä¸å†åŒ…å« `symbol` å’Œ `interval` å­—æ®µï¼Œå› ä¸ºè®¢é˜…é”®å·²åŒ…å«è¿™äº›ä¿¡æ¯
2. **ç›´æ¥å…¼å®¹**: payloadç›´æ¥ä½¿ç”¨TradingViewæœŸæœ›çš„æ ¼å¼ï¼Œæ— éœ€é¢å¤–è½¬æ¢
3. **é€ä¸ªæ¨é€**: æ¯æ¡æ•°æ®ç‹¬ç«‹æ¨é€ï¼Œä¾¿äºå‰ç«¯å¤„ç†
4. **ç®€åŒ–ç»“æ„**: å‡å°‘åµŒå¥—å±‚çº§ï¼Œæé«˜å¯è¯»æ€§

**é‡è¦è¯´æ˜**:
- æ›´æ–°æ¶ˆæ¯ä¸­**ä¸åŒ…å«** `requestId` å­—æ®µ
- è¿™æ˜¯æœåŠ¡å™¨ä¸»åŠ¨æ¨é€çš„æ•°æ®ï¼Œæ²¡æœ‰å¯¹åº”çš„è¯·æ±‚
- éµå¾ª TradingView API å®˜æ–¹è§„èŒƒ

**æ¨é€ç­–ç•¥**:
| æ•°æ®ç±»å‹ | æ¨é€æ–¹å¼ | è¯´æ˜ |
|---------|---------|------|
| `kline` | æ‰¹é‡æ¨é€ | å‘¨æœŸæ€§èšåˆï¼ˆæ¯ç§’ï¼‰ |
| `quotes` | æ‰¹é‡æ¨é€ | 24hr ticker è½®è¯¢æ›´æ–°ï¼ˆæ¯ç§’ï¼‰ |
| `SIGNAL:{alert_id}` | å®æ—¶æ¨é€ | æŒ‡å®šå‘Šè­¦é…ç½®å®æ—¶æ¨é€ï¼ˆå‰ç«¯è®¢é˜…ï¼‰ |

**ä¿¡å·æ•°æ®æ¨é€**:
å½“ç­–ç•¥è®¡ç®—äº§ç”Ÿä¿¡å·æ—¶ï¼Œæ¨é€ `signal.new` æ¶ˆæ¯ã€‚**è®¾è®¡åŸåˆ™**ï¼šè®¢é˜…é”® `SIGNAL:{alert_id}` å·²è¡¨æ˜æ•°æ®ç±»å‹ï¼Œ`content` ç›´æ¥å±•å¼€ä¸šåŠ¡æ•°æ®ï¼Œæ— éœ€å†—ä½™çš„ `type` å­—æ®µï¼š

```json
{
    "protocolVersion": "2.0",
    "action": "update",
    "timestamp": 1704067205000,
    "data": {
        "subscriptionKey": "SIGNAL:0189a1b2-c3d4-5e6f-7890-abcd12345678",
        "content": {
            "alert_id": "0189a1b2-c3d4-5e6f-7890-abcd12345678",
            "name": "macd_resonance_btcusdt",
            "strategy_type": "MACDResonanceStrategyV5",
            "symbol": "BINANCE:BTCUSDT",
            "interval": "60",
            "signal_value": true,
            "computed_at": "2026-02-13T10:00:05Z"
        }
    }
}
```

**è®¾è®¡è¯´æ˜**:
- `subscriptionKey: SIGNAL:xxx` è¡¨æ˜è¿™æ˜¯ä¿¡å·æ•°æ®
- `content` ç›´æ¥å±•å¼€ä¸šåŠ¡å­—æ®µï¼Œä¸ KLINE æ•°æ®æ¨é€æ ¼å¼ä¸€è‡´
- å‰ç«¯é€šè¿‡ `subscriptionKey.startsWith('SIGNAL:')` è¯†åˆ«ä¿¡å·æ¨é€

**è®¢é˜…ä¿¡å·é€šé“**:
```json
{
    "protocolVersion": "2.0",
    "action": "subscribe",
    "requestId": "req_sub_001",
    "timestamp": 1704067200000,
    "data": {
        "subscriptions": [
            "SIGNAL:0189a1b2-c3d4-5e6f-7890-abcd12345678"
        ]
    }
}
```

**è¯´æ˜**ï¼š
- å‰ç«¯åˆ›å»ºå‘Šè­¦æ—¶ç”Ÿæˆ UUIDv4 `alert_id`
- è®¢é˜…é”®æ ¼å¼ä¸º `SIGNAL:{alert_id}`
- å‰ç«¯éœ€è¦æ‰‹åŠ¨è®¢é˜…æ‰èƒ½æ¥æ”¶ä¿¡å·æ¨é€
- å‰ç«¯é‡è¿åéœ€è¦é‡æ–°è®¢é˜…

---

## é”™è¯¯å¤„ç†

```json
{
    "protocolVersion": "2.0",
    "action": "error",
    "requestId": "req_1703123456789_004",
    "timestamp": 1703123456790,
    "data": {
        "type": "get",
        "errorCode": "INVALID_SYMBOL",
        "errorMessage": "Symbol BINANCE:INVALID not found"
    }
}
```

### é”™è¯¯ç å®šä¹‰

| é”™è¯¯ç  | è¯´æ˜ | ç¤ºä¾‹ |
|--------|------|------|
| `INVALID_SYMBOL` | äº¤æ˜“å¯¹ä¸å­˜åœ¨æˆ–ä¸æ”¯æŒ | `symbol=BINANCE:INVALID` |
| `INVALID_INTERVAL` | åˆ†è¾¨ç‡ä¸æ”¯æŒ | `resolution=999` |
| `INVALID_DATE_RANGE` | æ— æ•ˆçš„æ—¥æœŸèŒƒå›´ | `from_time >= to_time` |
| `EXCHANGE_NOT_FOUND` | äº¤æ˜“æ‰€ä¸å­˜åœ¨ | `INVALID:BTCUSDT` |
| `RATE_LIMIT_EXCEEDED` | è¯·æ±‚é¢‘ç‡è¶…é™ | å¤šæ¬¡å¿«é€Ÿè¯·æ±‚ |
| `INTERNAL_ERROR` | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ | æœªçŸ¥é”™è¯¯ |
| `SERVICE_UNAVAILABLE` | æœåŠ¡æš‚æ—¶ä¸å¯ç”¨ | ç»´æŠ¤æœŸé—´ |
| `INVALID_SYMBOLS` | æ— æ•ˆçš„äº¤æ˜“å¯¹åˆ—è¡¨ | symbols å‚æ•°æ ¼å¼é”™è¯¯ |
| `SYMBOL_NOT_FOUND` | äº¤æ˜“å¯¹ä¸å­˜åœ¨ | BINANCE:INVALID |
| `EXCHANGE_NOT_SUPPORTED` | äº¤æ˜“æ‰€ä¸æ”¯æŒ | UNKNOWN:BTCUSDT |
| `SUBSCRIPTION_NOT_FOUND` | è®¢é˜…ä¸å­˜åœ¨ | `subscriberId=not_found` |
| `TIMEOUT` | è¯·æ±‚è¶…æ—¶ | è®¢é˜…è¶…æ—¶ |
| `UNKNOWN_ACTION` | æœªçŸ¥åŠ¨ä½œç±»å‹ | `action=invalid_action` |
| `INVALID_PARAMETERS` | å‚æ•°é”™è¯¯ | ç¼ºå°‘å¿…è¦å‚æ•° |

---

## ğŸ“Š æ•°æ®æ¨¡å‹è¯¦ç»†å­—æ®µå®šä¹‰

### SymbolInfo äº¤æ˜“å¯¹ä¿¡æ¯æ¨¡å‹

**ç”¨é€”**: ç”¨äº `resolve_symbol` API å“åº”ï¼Œå®šä¹‰äº¤æ˜“å¯¹çš„å®Œæ•´ä¿¡æ¯ã€‚ä¸¥æ ¼ç¬¦åˆ TradingView å®˜æ–¹æ¥å£ `LibrarySymbolInfo` æ ‡å‡†ã€‚

**å®Œæ•´å­—æ®µå®šä¹‰**:

| å­—æ®µå | ç±»å‹ | å¿…éœ€ | è¯´æ˜ |
|--------|------|------|------|
| **åŸºç¡€æ ‡è¯†å­—æ®µ** | | | |
| `name` | string | âœ… | å“ç§åç§°ï¼Œå¦‚"BTCUSDT" |
| `base_name` | string[] | âŒ | åŸºç¡€ç¬¦å·æ•°ç»„ï¼Œå¦‚['NASDAQ:AAPL'] |
| `ticker` | string | âœ… | å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œå¦‚"BINANCE:BTCUSDT" |
| `description` | string | âœ… | å“ç§æè¿°ï¼Œå¦‚"BTC/USDT" |
| `long_description` | string | âŒ | é•¿æœŸæè¿° |
| **äº¤æ˜“ä¿¡æ¯** | | | |
| `type` | string | âœ… | å“ç§ç±»å‹ï¼Œä¸¥æ ¼ç¬¦åˆ SymbolType |
| `session` | string | âœ… | äº¤æ˜“æ—¶é—´ï¼Œå¦‚"24x7"æˆ–"0900-1600" |
| `session_display` | string | âŒ | æ˜¾ç¤ºç”¨äº¤æ˜“æ—¶é—´ |
| `session_holidays` | string | âŒ | éäº¤æ˜“æ—¥ï¼Œæ ¼å¼ï¼šYYYYMMDD |
| `corrections` | string | âŒ | äº¤æ˜“æ—¶é—´ä¿®æ­£ |
| **äº¤æ˜“æ‰€ä¿¡æ¯** | | | |
| `exchange` | string | âœ… | äº¤æ˜“æ‰€åç§°ï¼Œå¦‚"BINANCE" |
| `listed_exchange` | string | âœ… | ä¸Šå¸‚äº¤æ˜“æ‰€åç§° |
| `timezone` | string | âœ… | æ—¶åŒºï¼Œä¸¥æ ¼ç¬¦åˆ Timezone ç±»å‹ |
| **ä»·æ ¼æ ¼å¼** | | | |
| `format` | string | âœ… | æ˜¾ç¤ºæ ¼å¼ï¼Œä¸¥æ ¼ç¬¦åˆ SeriesFormat |
| `minmov` | number | âœ… | æœ€å°å˜åŠ¨å•ä½ |
| `pricescale` | number | âœ… | ä»·æ ¼ç²¾åº¦ |
| `minmove2` | number | âŒ | åˆ†æ•°çš„åˆ†æ•° |
| `fractional` | boolean | âŒ | æ˜¯å¦ä¸ºåˆ†æ•° |
| `variable_tick_size` | string | âŒ | åŠ¨æ€æœ€å°ä»·æ ¼å˜åŠ¨ |
| **åˆ†è¾¨ç‡æ”¯æŒæ ‡å¿—** | | | |
| `has_intraday` | boolean | âŒ | æ˜¯å¦æ”¯æŒæ—¥å†…æ•°æ® |
| `has_seconds` | boolean | âŒ | æ˜¯å¦æ”¯æŒç§’çº§æ•°æ® |
| `has_ticks` | boolean | âŒ | æ˜¯å¦æ”¯æŒTickæ•°æ® |
| `has_daily` | boolean | âŒ | æ˜¯å¦æ”¯æŒæ—¥çº¿æ•°æ® |
| `has_weekly_and_monthly` | boolean | âŒ | æ˜¯å¦æ”¯æŒå‘¨çº¿å’Œæœˆçº¿æ•°æ® |
| **åˆ†è¾¨ç‡å€æ•°æ•°ç»„ï¼ˆå…³é”®å­—æ®µï¼‰** | | | |
| `supported_resolutions` | string[] | âŒ | æ”¯æŒçš„åˆ†è¾¨ç‡åˆ—è¡¨ |
| `intraday_multipliers` | string[] | âŒ | æ—¥å†…åˆ†è¾¨ç‡å€æ•° |
| `seconds_multipliers` | string[] | âŒ | ç§’çº§åˆ†è¾¨ç‡å€æ•° |
| `daily_multipliers` | string[] | âŒ | æ—¥çº¿åˆ†è¾¨ç‡å€æ•° |
| `weekly_multipliers` | string[] | âŒ | å‘¨çº¿åˆ†è¾¨ç‡å€æ•° |
| `monthly_multipliers` | string[] | âŒ | æœˆçº¿åˆ†è¾¨ç‡å€æ•° |
| **é«˜çº§åŠŸèƒ½** | | | |
| `build_seconds_from_ticks` | boolean | âŒ | æ˜¯å¦å¯ä»¥ä»Tickæ•°æ®æ„å»ºç§’çº§æŸ±çŠ¶å›¾ |
| `has_empty_bars` | boolean | âŒ | æ˜¯å¦æ˜¾ç¤ºç©ºæŸ± |
| `visible_plots_set` | string | âŒ | å¯è§å›¾è¡¨é›†åˆï¼Œä¸¥æ ¼ç¬¦åˆ VisiblePlotsSet |
| `volume_precision` | number | âŒ | æˆäº¤é‡ç²¾åº¦ |
| `data_status` | string | âŒ | æ•°æ®çŠ¶æ€ï¼Œä¸¥æ ¼ç¬¦åˆ DataStatus |
| `delay` | number | âŒ | æ•°æ®å»¶è¿Ÿï¼ˆç§’ï¼‰ |
| **å…ƒæ•°æ®** | | | |
| `currency_code` | string | âŒ | äº¤æ˜“è´§å¸ |
| `original_currency_code` | string | âŒ | åŸå§‹è´§å¸ä»£ç  |
| `unit_id` | string | âŒ | å•ä½ID |
| `original_unit_id` | string | âŒ | åŸå§‹å•ä½ID |
| `sector` | string | âŒ | è¡Œä¸šåˆ†ç±» |
| `industry` | string | âŒ | ç»†åˆ†è¡Œä¸š |
| `expired` | boolean | âŒ | æ˜¯å¦è¿‡æœŸ |
| `expiration_date` | number | âŒ | åˆ°æœŸæ—¥æœŸï¼ˆæ—¶é—´æˆ³ï¼‰ |
| **Logoæ”¯æŒ** | | | |
| `logo_urls` | string[] | âŒ | ç¬¦å·Logoçš„URLæ•°ç»„ï¼Œæ”¯æŒå•ä¸ªæˆ–ä¸¤ä¸ªURL |

**ä¸¥æ ¼ç±»å‹è¦æ±‚**:

```typescript
// ä¸¥æ ¼ç±»å‹å®šä¹‰ï¼ˆä¸å‰ç«¯TypeScriptæ¥å£å¯¹é½ï¼‰
type SymbolType = "stock" | "index" | "forex" | "futures" | "bitcoin" | "crypto" | ...;
type SeriesFormat = "price" | "volume";
type VisiblePlotsSet = "ohlcv" | "ohlc" | "c" | "hlc";
type DataStatus = "streaming" | "endofday" | "delayed_streaming";
type Timezone = "Etc/UTC" | string;
```

### Bar Kçº¿æ•°æ®æ¨¡å‹

**ç”¨é€”**: ç”¨äº Kçº¿æ•°æ®æ¨é€ï¼Œä¸¥æ ¼ç¬¦åˆ TradingView å®˜æ–¹æ¥å£ `Bar` æ ‡å‡†ã€‚

**å®Œæ•´å­—æ®µå®šä¹‰**:

| å­—æ®µå | ç±»å‹ | å¿…éœ€ | è¯´æ˜ |
|--------|------|------|------|
| `time` | number | âœ… | Baræ—¶é—´ï¼ŒUnixçºªå…ƒå¼€å§‹ä»¥æ¥çš„æ¯«ç§’æ•°ï¼ˆUTCæ—¶åŒºï¼‰ |
| `open` | number | âœ… | å¼€ç›˜ä»· |
| `high` | number | âœ… | æœ€é«˜ä»· |
| `low` | number | âœ… | æœ€ä½ä»· |
| `close` | number | âœ… | æ”¶ç›˜ä»· |
| `volume` | number | âŒ | æˆäº¤é‡ï¼ˆå¯é€‰ï¼‰ |

**é‡è¦è¯´æ˜**:
- æ—¥çº¿ã€å‘¨çº¿ã€æœˆçº¿çš„timeåº”ä¸ºäº¤æ˜“æ—¥ï¼ˆè€Œéäº¤æ˜“æ—¶æ®µå¼€å§‹æ—¥ï¼‰00:00 UTC
- åº“æ ¹æ®LibrarySymbolInfoä¸­çš„sessionè°ƒæ•´æ—¶é—´
- volumeå­—æ®µå¯é€‰ï¼Œä½†å»ºè®®æä¾›ä»¥æ”¯æŒæˆäº¤é‡åˆ†æ

### QuotesValue æŠ¥ä»·æ•°æ®æ¨¡å‹

**ç”¨é€”**: ç”¨äº Quotes æŠ¥ä»·æ•°æ®æ¨é€ï¼Œä¸¥æ ¼ç¬¦åˆ TradingView å®˜æ–¹æ¥å£ `DatafeedQuoteValues` æ ‡å‡†ã€‚

**å®Œæ•´å­—æ®µå®šä¹‰**:

| å­—æ®µå | ç±»å‹ | å¿…éœ€ | è¯´æ˜ |
|--------|------|------|------|
| **åŸºç¡€æŠ¥ä»·å­—æ®µ** | | | |
| `ch` | number | âŒ | ä»·æ ¼å˜åŠ¨ï¼Œé€šå¸¸è®¡ç®—ä¸ºå½“å‰ä»·æ ¼ä¸å‰ä¸€æ—¥æ”¶ç›˜ä»·çš„å·®é¢ |
| `chp` | number | âŒ | ä»·æ ¼å˜åŠ¨ç™¾åˆ†æ¯” |
| `short_name` | string | âŒ | ç¬¦å·ç®€ç§° |
| `exchange` | string | âŒ | äº¤æ˜“æ‰€åç§° |
| `description` | string | âŒ | ç¬¦å·æè¿° |
| **ä»·æ ¼æ•°æ®** | | | |
| `lp` | number | âŒ | æœ€æ–°æˆäº¤ä»·æ ¼ï¼Œæ— è®ºä¹°è¿˜æ˜¯å– |
| `ask` | number | âŒ | å–ä»·ï¼ˆAskï¼‰- å–å®¶æ„¿æ„æ¥å—çš„æœ€ä½ä»·æ ¼ |
| `bid` | number | âŒ | ä¹°ä»·ï¼ˆBidï¼‰- ä¹°å®¶æ„¿æ„æ”¯ä»˜çš„æœ€é«˜ä»·æ ¼ |
| `spread` | number | âŒ | å·®ä»·ï¼ˆSpreadï¼‰- ä¹°ä»·å’Œå–ä»·ä¹‹é—´çš„å·®å€¼ |
| **å½“æ—¥æ•°æ®** | | | |
| `open_price` | number | âŒ | å½“æ—¥å¼€ç›˜ä»· |
| `high_price` | number | âŒ | å½“æ—¥æœ€é«˜ä»· |
| `low_price` | number | âŒ | å½“æ—¥æœ€ä½ä»· |
| `prev_close_price` | number | âŒ | å‰ä¸€äº¤æ˜“æ—¥æ”¶ç›˜ä»·ï¼ˆç§»åŠ¨ç«¯åº”ç”¨å¿…éœ€å­—æ®µï¼‰ |
| `volume` | number | âŒ | å½“æ—¥äº¤æ˜“é‡ |
| **æ‰©å±•å­—æ®µ** | | | |
| `original_name` | string | âŒ | åŸå§‹åç§° |
| `rtc` | number | âŒ | ç›˜å‰/ç›˜åä»·æ ¼ |
| `rtc_time` | number | âŒ | ç›˜å‰/ç›˜åä»·æ ¼æ›´æ–°æ—¶é—´ |
| `rch` | number | âŒ | ç›˜å‰/ç›˜åä»·æ ¼å˜åŠ¨ |
| `rchp` | number | âŒ | ç›˜å‰/ç›˜åä»·æ ¼å˜åŠ¨ç™¾åˆ†æ¯” |
| **æ‰©å±•å­—æ®µæ”¯æŒ** | | | |
| `[valueName: string]` | string\|number\|string[]\|number[] | âŒ | æ‰©å±•å­—æ®µæ”¯æŒï¼Œå…è®¸ä»»æ„é¢å¤–çš„é”®å€¼å¯¹ |

**æ•°æ®æ ¼å¼ç¤ºä¾‹**:
```json
{
    "ch": 123.45,
    "chp": 2.35,
    "short_name": "BTCUSDT",
    "exchange": "BINANCE",
    "description": "æ¯”ç‰¹å¸/æ³°è¾¾å¸",
    "lp": 50000.00,
    "ask": 50001.00,
    "bid": 49999.00,
    "spread": 2.00,
    "open_price": 49000.00,
    "high_price": 50500.00,
    "low_price": 48800.00,
    "prev_close_price": 49876.55,
    "volume": 1234.56
}
```

---

## ğŸ“ æ€»ç»“

æœ¬è®¾è®¡æ–¹æ¡ˆé‡‡ç”¨**çº¯ WebSocket æ¶æ„**ï¼Œä¸º TradingView å›¾è¡¨åº“æä¾›å®Œæ•´çš„æ•°æ®æœåŠ¡ã€‚ä¸»è¦ç‰¹ç‚¹åŒ…æ‹¬ï¼š

### 1. **ç»Ÿä¸€ç®¡ç†å™¨æ¶æ„**
   - UnifiedWebSocketManager ç»Ÿä¸€ç®¡ç†æ‰€æœ‰è¿æ¥å’Œè®¢é˜…
   - æ™ºèƒ½è®¢é˜…è®¡ç®—ï¼Œè‡ªåŠ¨å»é‡å’Œä¼˜åŒ–
   - å®æ—¶è¿æ¥çŠ¶æ€å’Œè®¢é˜…è·Ÿè¸ª
   - æä¾›å®Œæ•´çš„ç›‘æ§æŒ‡æ ‡

### 2. **åŒå®¢æˆ·ç«¯æ¶æ„**
   - API å®¢æˆ·ç«¯å¤„ç†éå®æ—¶æ•°æ®è¯·æ±‚
   - Streams å®¢æˆ·ç«¯å¤„ç†å®æ—¶æ•°æ®æµ
   - èŒè´£åˆ†ç¦»ï¼Œè¿æ¥ä¼˜åŒ–

### 3. **ç»Ÿä¸€æ¶ˆæ¯åè®®**
   - æ‰€æœ‰äº¤äº’éƒ½é€šè¿‡å•ä¸€ WebSocket è¿æ¥
   - ç»Ÿä¸€çš„ JSON æ¶ˆæ¯æ ¼å¼
   - æ”¯æŒæ‰€æœ‰ TradingView æ–¹æ³•

### 4. **æ™ºèƒ½è®¢é˜…ç®¡ç†**
   - å¼•ç”¨è®¡æ•°æœºåˆ¶ï¼Œé¿å…é‡å¤è®¢é˜…
   - æ”¯æŒå¤šå®¢æˆ·ç«¯å…±äº«æ•°æ®æµ
   - è‡ªåŠ¨æ¸…ç†æ— ç”¨çš„è®¢é˜…
   - ç»Ÿä¸€è®¢é˜…é”®æ ¼å¼ï¼ˆv2.0ï¼‰- å…¨å¤§å†™æ ¼å¼ï¼Œå¤§å°å†™ä¸€è‡´æ€§

### 5. **å·²å®ç°çš„å®æ—¶æ•°æ®**
   - K çº¿æ•°æ®è®¢é˜…å’Œæ¨é€
   - Quotes æŠ¥ä»·è®¢é˜…å’Œæ¨é€ï¼ˆåŸºäº 24hr ticker è½®è¯¢ï¼‰

### 6. **å¤šäº¤æ˜“æ‰€æ”¯æŒ**
   - é€šè¿‡ç»Ÿä¸€æ¶ˆæ¯æ ¼å¼æ”¯æŒä¸åŒäº¤æ˜“æ‰€
   - è½»æ¾æ‰©å±•æ–°äº¤æ˜“æ‰€
   - ç»Ÿä¸€é”™è¯¯å¤„ç†å’Œå“åº”æ ¼å¼

---

## ğŸ”— å‰åç«¯æ•°æ®æ¨¡å‹å¯¹é½è¯´æ˜

### æ¶æ„åŸåˆ™

æœ¬è®¾è®¡ä¸¥æ ¼éµå¾ª"**å¥‘çº¦é©±åŠ¨å¼€å‘**"ç†å¿µï¼Œåç«¯æ•°æ®æ¨¡å‹ä¸¥æ ¼æŒ‰ç…§å‰ç«¯ TypeScript æ¥å£æ„å»ºï¼Œå®ç°é›¶è½¬æ¢æˆæœ¬å’Œå®Œå…¨ç±»å‹å¯¹é½ã€‚

### æ•°æ®æµæ¶æ„

```
å‰ç«¯ TypeScript æ¥å£ â† â†’ åç«¯ Python æ¨¡å‹ â† â†’ TradingView åº“
     â†“                         â†“              â†“
  ç±»å‹å®šä¹‰              Pydantic æ¨¡å‹      å®˜æ–¹æ ‡å‡†
  (å•ä¸€äº‹å®æ¥æº)        (è¿è¡Œæ—¶éªŒè¯)      (æœ€ç»ˆç›®æ ‡)
```

### å¯¹é½ç­–ç•¥

1. **ç±»å‹ä¸¥æ ¼å¯¹é½**
   - å‰ç«¯ TypeScript æ¥å£å®šä¹‰ä¸¥æ ¼ç¬¦åˆ TradingView å®˜æ–¹æ ‡å‡†
   - åç«¯ Pydantic æ¨¡å‹ 100% å¯¹é½å‰ç«¯æ¥å£å­—æ®µ
   - å®ç°ç¼–è¯‘æ—¶å’Œè¿è¡Œæ—¶åŒé‡ç±»å‹éªŒè¯

2. **é›¶è½¬æ¢è®¾è®¡**
   - åç«¯ç›´æ¥è¾“å‡º TradingView å…¼å®¹æ ¼å¼
   - é¿å… datafeed å±‚è¿›è¡Œæ•°æ®è½¬æ¢
   - å‡å°‘é”™è¯¯æºå’Œæ€§èƒ½å¼€é”€

3. **å¥‘çº¦é©±åŠ¨å¼€å‘**
   - å‰ç«¯æ¥å£å˜æ›´è‡ªåŠ¨å½±å“åç«¯å®ç°
   - é€šè¿‡ç±»å‹ç³»ç»Ÿä¿è¯ä¸€è‡´æ€§
   - API æ–‡æ¡£ä¸ä»£ç åŒæ­¥æ›´æ–°

### å¯¹é½éªŒè¯

**SymbolInfo æ¨¡å‹å¯¹é½åº¦**: 100% âœ…
- æ‰€æœ‰å¿…éœ€å­—æ®µä¸¥æ ¼åŒ¹é…
- å¯é€‰å­—æ®µå®Œå…¨è¦†ç›–
- ä¸¥æ ¼ç±»å‹å®šä¹‰å®Œå…¨ä¸€è‡´

**Bar æ¨¡å‹å¯¹é½åº¦**: 100% âœ…
- å­—æ®µåã€ç±»å‹ã€å«ä¹‰å®Œå…¨ä¸€è‡´
- TradingView æ ‡å‡†å®Œå…¨å…¼å®¹

**QuotesValue æ¨¡å‹å¯¹é½åº¦**: 100% âœ…
- æŠ¥ä»·æ•°æ®å­—æ®µ 100% åŒ¹é…
- æ‰©å±•å­—æ®µæ”¯æŒå®Œæ•´å®ç°

---

## ğŸ“š å‚è€ƒèµ„æ–™

- [TradingView Charting Library å®˜æ–¹æ–‡æ¡£](https://www.tradingview.com/charting-library-docs/)
- [TradingView Datafeed API æ–‡æ¡£](https://www.tradingview.com/charting-library-docs/latest/api/datafeed-api)
- [TradingView Platform ç‰ˆæœ¬ä¸“ç”¨æ¥å£](https://www.tradingview.com/charting-library-docs/latest/trading_terminal/Watch-List)
- [WebSocket API æœ€ä½³å®è·µ](https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API)
- [å¸å®‰ WebSocket æ–‡æ¡£](https://binance-docs.github.io/apidocs/spot/en/#websocket-market-streams)

---

**æ–‡æ¡£ç‰ˆæœ¬**: v16.1.0
**æœ€åæ›´æ–°**: 2026å¹´2æœˆ14æ—¥
**æ›´æ–°å†…å®¹**:
- **v16.1.0**: å‘Šè­¦é…ç½®è®¢é˜…ä¼˜åŒ–
  - ç§»é™¤ `SIGNAL:ALERT` å…¨å±€è®¢é˜…ï¼Œæ”¹ä¸º `SIGNAL:{alert_id}` ç²¾å‡†è®¢é˜…
  - å‰ç«¯ä½¿ç”¨ UUIDv4 ç”Ÿæˆå‘Šè­¦ ID
  - åˆ›å»ºå‘Šè­¦è¯·æ±‚æ·»åŠ  `id` å­—æ®µï¼Œç”±å‰ç«¯ç”Ÿæˆ
  - å‰ç«¯é‡è¿åéœ€é‡æ–°è®¢é˜…
- **v16.0.0**: å‘Šè­¦é…ç½®ç³»ç»Ÿé›†æˆ
  - æ–°å¢å‘Šè­¦é…ç½®ç®¡ç†æ¶ˆæ¯ç±»å‹ï¼ˆcreate_alert_config, list_alert_configs, update_alert_config, delete_alert_config, enable_alert_config, list_signalsï¼‰
  - æ–°å¢å®æ—¶ä¿¡å·æ¨é€ï¼ˆsignal.newï¼‰å’Œè®¢é˜…é€šé“ï¼ˆSIGNAL:ALERT, SIGNAL:{alert_id}ï¼‰
  - å‘Šè­¦é…ç½®æ ¼å¼ä¸ç°æœ‰ WebSocket API åè®®å®Œå…¨ç»Ÿä¸€
- **v15.4.0**: GETç±»å‹å‘½åä¼˜åŒ–
  - `list_subscriptions` æ”¹ä¸º `subscriptions`ï¼Œé£æ ¼ä¸å…¶ä»–ç±»å‹ç»Ÿä¸€
- **v15.3.0**: ä¿®å¤APIå“åº”æ ¼å¼ä¸ç»Ÿä¸€é—®é¢˜
  - **`type` å­—æ®µç»Ÿä¸€ç§»è‡³ `data` å†…éƒ¨**ï¼Œä¸è¯·æ±‚æ ¼å¼ä¿æŒä¸€è‡´
  - ä¿®å¤æ‰€æœ‰å“åº”ç¤ºä¾‹ä¸­çš„ `type` å­—æ®µä½ç½®
  - ç¡®ä¿è¯·æ±‚å’Œå“åº”æ ¼å¼å®Œå…¨å¯¹ç§°ï¼Œé™ä½å‰ç«¯è§£æå¤æ‚åº¦
- **v15.2.0**: ç»Ÿä¸€WebSocket APIå“åº”æ ¼å¼
  - ä¿®å¤ä»»åŠ¡å®Œæˆå“åº”æ ¼å¼ä¸ä¸€è‡´é—®é¢˜
  - æ–°å¢ `TaskResultData` æ¨¡å‹ç”¨äºä»»åŠ¡å®Œæˆå“åº”
  - ä½¿ç”¨ Pydantic æ•°æ®æ¨¡å‹æ›¿ä»£ç¡¬ç¼–ç å­—å…¸
- **v15.1.0**: ä»»åŠ¡é€šçŸ¥ä¼˜åŒ– - å‡å°‘æ•°æ®åº“æŸ¥è¯¢
  - task.completed é€šçŸ¥åŒ…å« payloadï¼ˆrequestIdï¼‰å’Œ result
  - API ç½‘å…³æ— éœ€å†æŸ¥è¯¢ tasks è¡¨è·å–è¿™äº›ä¿¡æ¯
  - ä¼˜åŒ–åé™¤ get_klines å¤–æ— éœ€é¢å¤–æ•°æ®åº“æŸ¥è¯¢
- **v15.0.0**: ç§»é™¤ä»»åŠ¡ç³»ç»Ÿè®¾è®¡ç« èŠ‚ï¼ˆç§»è‡³ DATABASE_COORDINATED_ARCHITECTURE.mdï¼‰
- **v14.0.0**: å‰åç«¯æ•°æ®æ¨¡å‹å®Œå…¨å¯¹é½
  - æ–°å¢å®Œæ•´æ•°æ®æ¨¡å‹è¯¦ç»†å­—æ®µå®šä¹‰ç« èŠ‚
  - SymbolInfoã€Barã€QuotesValue æ¨¡å‹ä¸¥æ ¼å¯¹é½å‰ç«¯ TypeScript æ¥å£
  - æ·»åŠ å¥‘çº¦é©±åŠ¨å¼€å‘æ¶æ„è¯´æ˜
  - å®Œå–„ resolve_symbol å“åº”ç¤ºä¾‹ï¼ŒåŒ…å«æ‰€æœ‰å­—æ®µ
  - å®ç° 100% ç±»å‹å¯¹é½ï¼Œé›¶è½¬æ¢æˆæœ¬
- **v13.3.0**: æ‰¹é‡è®¢é˜…ä¼˜åŒ–ä¸æ ¼å¼è§„èŒƒ
  - ç§»é™¤v1.0å­—å…¸æ ¼å¼æ”¯æŒï¼Œä»…æ”¯æŒv2.0æ•°ç»„æ ¼å¼
  - ä¼˜åŒ–æ‰¹é‡è®¢é˜…é€Ÿç‡é™åˆ¶ï¼šæ¯åŒ…æœ€å¤š50ä¸ªæµï¼Œ250msé—´éš”ï¼ˆ4æ¬¡/ç§’ï¼‰
  - éµå®ˆå¸å®‰WebSocket APIçš„5 msg/sé™åˆ¶ï¼Œç•™å‡ºpingåŒ…ç©ºé—´
  - æå‡æ‰¹é‡è®¢é˜…å¤„ç†æ•ˆç‡å’Œæ€§èƒ½
- **v13.2.0**: è®¢é˜…é”®æ ¼å¼ä¼˜åŒ– - å¤§å°å†™ä¸€è‡´æ€§æ”¹è¿›
  - å‰ç«¯å‘é€çš„è®¢é˜…é”®æ ¼å¼ä¸å†…éƒ¨å­˜å‚¨æ ¼å¼å®Œå…¨ä¸€è‡´
  - ç§»é™¤ä¸å¿…è¦çš„å­—ç¬¦ä¸²å¤§å°å†™è½¬æ¢
  - æ•°æ®ç±»å‹ä½¿ç”¨å…¨å¤§å†™æ ¼å¼ï¼ˆKLINEã€TRADEã€TICKERç­‰ï¼‰
  - ç®€åŒ–è®¢é˜…å¤„ç†æµç¨‹ï¼Œæå‡æ€§èƒ½å’Œå¯è¯»æ€§
- **v13.1.0**: è®¾è®¡æ”¹è¿› - é‡‡ç”¨å¸å®‰é£æ ¼ï¼Œå»æ‰ackæ¦‚å¿µæ··æ·†
  - å°†"ack"å“åº”æ”¹ä¸º"success"å“åº”
  - æ˜ç¡®åŒºåˆ†æ•°æ®å“åº”ï¼ˆåŒ…å«å®é™…å†…å®¹ï¼‰å’Œç¡®è®¤æ¶ˆæ¯ï¼ˆç©ºdataï¼‰
  - å€Ÿé‰´å¸å®‰WebSocket APIçš„ç®€æ´è®¾è®¡é£æ ¼
  - æ·»åŠ success actionçš„è¯­ä¹‰è¯´æ˜ï¼Œæå‡å¼€å‘è€…ä½“éªŒ
- **v13.0.0**: æ–‡æ¡£é‡æ„ - ä¸“æ³¨äºAPIè§„èŒƒè®¾è®¡
  - ç§»é™¤æ‰€æœ‰Pythonä»£ç å®ç°
  - ä¿ç•™JSONæ¶ˆæ¯æ ¼å¼ç¤ºä¾‹
  - ç®€åŒ–æ¶æ„æè¿°ï¼Œä¸“æ³¨äºå¥‘çº¦è®¾è®¡
  - åˆ†ç¦»APIè§„èŒƒä¸å®ç°ç»†èŠ‚
- **v12.1.0**: Quotes æŠ¥ä»·æ•°æ®æ›¿æ¢ MiniTicker è®¾è®¡
- **v12.0.0**: è¯­ä¹‰åŒ–äº¤æ˜“å¯¹å‘½åä¸æ°¸ç»­æœŸè´§æ”¯æŒ
- **v11.0.0**: ç»Ÿä¸€ç®¡ç†å™¨æ¶æ„æ–‡æ¡£æ›´æ–°
- **v10.0.0**: é‡å¤§æ¶æ„å‡çº§ - çº¯ WebSocket æ¶æ„
**ä½œè€…**: Claude Assistant
