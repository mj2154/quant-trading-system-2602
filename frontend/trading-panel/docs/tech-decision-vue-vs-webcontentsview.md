# 技术选型：Vue vs WebContentsView

## 背景

本项目是一个个人量化交易应用程序，需要实现多标签页功能。在技术选型阶段，我们对比了两种方案：

1. **Vue 方案**：在单个 BrowserWindow 中使用 Vue 组件实现标签页切换
2. **WebContentsView 方案**：使用 Electron 的 WebContentsView（原 BrowserView）为每个标签页创建独立渲染进程

## 方案对比

### Vue 方案

| 优点 | 缺点 |
|------|------|
| 实现简单，开发成本低 | 复杂组件切换时可能有延迟 |
| 组件间通信方便 | 所有DOM在同一进程 |
| 弹窗、Toast等实现简单 | 单页面崩溃影响整个应用 |
| 维护成本低 | |
| 使用 keep-alive 可缓存组件状态 | |

### WebContentsView 方案

| 优点 | 缺点 |
|------|------|
| Tab切换接近原生体验 | 实现复杂度大幅增加 |
| 每个View独立渲染进程 | 弹窗跨窗口处理复杂 |
| 单个View崩溃不影响其他 | 全局快捷键需特殊处理 |
| 内存可按需释放 | IPC通信成本增加 |
| | 需要处理多进程数据同步 |

## 决策

**选择 Vue 方案**

### 理由

1. **应用规模**：个人量化交易应用的复杂度远低于商业级产品（如长桥Pro单页DOM 15000+），Vue 方案完全可以胜任

2. **开发效率**：个人项目资源有限，WebContentsView 带来的复杂度会显著拖慢开发进度

3. **优化空间**：Vue 方案有充足的优化手段：
   - 虚拟列表渲染大量数据
   - 组件懒加载
   - keep-alive 缓存组件状态
   - 合理的响应式数据设计

4. **渐进式升级**：如果未来确实遇到性能瓶颈，可以局部引入 WebContentsView

## 实现架构

```
┌─────────────────────────────────────┐
│ Electron (主进程)                    │
│   └── BrowserWindow                 │
│         └── Vue App (渲染进程)       │
│               ├── AppHeader (标签栏) │
│               ├── AppContent (内容区)│
│               └── AppFooter (状态栏) │
└─────────────────────────────────────┘
```

## 技术栈

- **框架**: Vue 3 + TypeScript
- **状态管理**: Pinia
- **UI 组件库**: Naive UI
- **桌面框架**: Electron
- **构建工具**: Vite

## 参考资料

- [长桥技术团队：使用 BrowserView 优化 Electron 应用的性能](https://juejin.cn/post/7412693080394342411)

---

*文档创建时间: 2024-12*
