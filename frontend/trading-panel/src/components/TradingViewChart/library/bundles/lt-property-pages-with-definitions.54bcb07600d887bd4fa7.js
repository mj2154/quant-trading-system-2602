"use strict";(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[8537,5231],{901146:(e,t,i)=>{i.d(t,{convertToInt:()=>o,floor:()=>r,limitedPrecision:()=>l});var n=i(110895);function r(e){return Math.floor(e)}function o(e){return parseInt(String(e))}function l(e){const t=new n.LimitedPrecisionNumericFormatter(e,!0);return e=>{if(null===e)return e;const i=t.parse(t.format(e));return i.res?i.value:null}}},639690:(e,t,i)=>{i.d(t,{getLinesStylesPropertiesDefinitions:()=>f});var n=i(609838),r=i(754617),o=i(114837),l=i(59668),s=i(871645);const a=new r.TranslatedString("change {title} price label visibility",n.t(null,void 0,i(98822))),c=new r.TranslatedString("change {title} extension",n.t(null,void 0,i(210390))),d=new r.TranslatedString("change {title} time label visibility",n.t(null,void 0,i(266960))),p=n.t(null,void 0,i(497273)),u=n.t(null,void 0,i(856822)),h=n.t(null,void 0,i(741410));function f(e,t,i){const n=(0,s.removeSpaces)(i.originalText()),r=[],f=(0,o.createLineStyleDefinition)(e,{lineColor:t.linecolor,lineWidth:t.linewidth,lineStyle:t.linestyle},i,"Line");if(r.push(f),"showPrice"in t){const o=(0,l.createCheckablePropertyDefinition)({checked:(0,l.convertToDefinitionProperty)(e,t.showPrice,a.format({title:i}))},{id:`${n}ShowPrice`,title:p});r.push(o)}if("extendLine"in t){const o=(0,l.createCheckablePropertyDefinition)({checked:(0,l.convertToDefinitionProperty)(e,t.extendLine,c.format({title:i}))},{id:`${n}ExtendLine`,title:h});r.push(o)}if("showTime"in t){const o=(0,l.createCheckablePropertyDefinition)({checked:(0,l.convertToDefinitionProperty)(e,t.showTime,d.format({title:i}))},{id:`${n}ShowTime`,title:u});r.push(o)}return{definitions:r}}},976282:(e,t,i)=>{i.r(t),i.d(t,{getSelectionStylePropertiesDefinitions:()=>y});var n=i(609838),r=i(538239),o=i(591852),l=i(754617),s=i(59668);const a=new l.TranslatedString("lines width",n.t(null,void 0,i(541594))),c=new l.TranslatedString("lines style",n.t(null,void 0,i(96400))),d=new l.TranslatedString("lines color",n.t(null,void 0,i(924621))),p=new l.TranslatedString("backgrounds color",n.t(null,void 0,i(461218))),u=new l.TranslatedString("backgrounds filled",n.t(null,void 0,i(48433))),h=new l.TranslatedString("text color",n.t(null,void 0,i(644461))),f=new l.TranslatedString("show price",n.t(null,void 0,i(559012)));function y(e,t){const l=[];if("linesWidths"in e||"linestyle"in e||"linesColors"in e){const p=(0,s.createLinePropertyDefinition)({width:e.linesWidths?new o.CollectiblePropertyUndoWrapper(new r.LineToolCollectedProperty(e.linesWidths),a,t):void 0,style:e.linestyle?new o.CollectiblePropertyUndoWrapper(new r.LineToolCollectedProperty(e.linestyle),c,t):void 0,color:e.linesColors?new o.CollectiblePropertyUndoWrapper(new r.LineToolCollectedProperty(e.linesColors),d,t):void 0},{id:"LineStyles",title:n.t(null,void 0,i(903554))});l.push(p)}if("showPrice"in e||"showPriceLabels"in e||"axisLabelVisible"in e){const{showPrice:a=[],showPriceLabels:c=[],axisLabelVisible:d=[]}=e,p=(0,s.createCheckablePropertyDefinition)({
checked:new o.CollectiblePropertyUndoWrapper(new r.LineToolCollectedProperty([...a,...c,...d]),f,t)},{id:"ShowPrice",title:n.t(null,void 0,i(497273))});l.push(p)}if("backgroundsColors"in e){const a=(0,s.createColorPropertyDefinition)({checked:e.fillBackground?new o.CollectiblePropertyUndoWrapper(new r.LineToolCollectedProperty(e.fillBackground),u,t):void 0,color:new o.CollectiblePropertyUndoWrapper(new r.LineToolCollectedProperty(e.backgroundsColors),p,t)},{id:"BackgroundColors",title:n.t(null,void 0,i(379468))});l.push(a)}if("textsColors"in e){const a=(0,s.createLinePropertyDefinition)({color:new o.CollectiblePropertyUndoWrapper(new r.LineToolCollectedProperty(e.textsColors),h,t)},{id:"TextColors",title:n.t(null,void 0,i(770320))});l.push(a)}return{definitions:l}}},552147:(e,t,i)=>{i.d(t,{getTrendLineToolsStylePropertiesDefinitions:()=>B});var n=i(609838),r=i(754617),o=i(114837),l=i(59668),s=i(963632),a=i(818840),c=i(871645);const d=new r.TranslatedString("change {title} middle point visibility",n.t(null,void 0,i(327470))),p=new r.TranslatedString("change {title} price labels visibility",n.t(null,void 0,i(343))),u=new r.TranslatedString("change {title} price range visibility",n.t(null,void 0,i(463962))),h=new r.TranslatedString("change {title} percent change visibility",n.t(null,void 0,i(887246))),f=new r.TranslatedString("change {title} change in pips visibility",n.t(null,void 0,i(681340))),y=new r.TranslatedString("change {title} bars range visibility",n.t(null,void 0,i(598845))),g=new r.TranslatedString("change {title} date/time range visibility",n.t(null,void 0,i(937563))),v=new r.TranslatedString("change {title} distance visibility",n.t(null,void 0,i(145153))),_=new r.TranslatedString("change {title} angle visibility",n.t(null,void 0,i(959288))),P=new r.TranslatedString("change {title} always show stats",n.t(null,void 0,i(980390))),T=new r.TranslatedString("change {title} stats position",n.t(null,void 0,i(286722))),D=[{value:a.StatsPosition.Left,title:n.t(null,void 0,i(411626))},{value:a.StatsPosition.Center,title:n.t(null,void 0,i(224197))},{value:a.StatsPosition.Right,title:n.t(null,void 0,i(50421))},{value:a.StatsPosition.Auto,title:n.t(null,void 0,i(221469))}],w=n.t(null,void 0,i(312516)),m=n.t(null,void 0,i(942747)),S=n.t(null,void 0,i(916053)),b=n.t(null,void 0,i(962362)),C=n.t(null,void 0,i(173525)),x=n.t(null,void 0,i(104518)),L=n.t(null,void 0,i(189073)),A=n.t(null,void 0,i(462374)),k=n.t(null,void 0,i(503369)),V=n.t(null,void 0,i(600390)),M=n.t(null,void 0,i(893857)),$=n.t(null,void 0,i(226754)),W=n.t(null,void 0,i(942349));function B(e,t,i,n){const r=(0,c.removeSpaces)(i.originalText()),a=[],B=t,R=(0,o.createLineStyleDefinition)(e,{...B,lineColor:t.linecolor,lineWidth:t.linewidth,lineStyle:t.linestyle},i,"Line");a.push(R);const I=(0,l.createCheckablePropertyDefinition)({checked:(0,l.convertToDefinitionProperty)(e,t.showMiddlePoint,d.format({title:i}))},{id:`${r}MiddlePoint`,title:n&&n.middlePoint||w});a.push(I);const z=(0,l.createCheckablePropertyDefinition)({checked:(0,
l.convertToDefinitionProperty)(e,t.showPriceLabels,p.format({title:i}))},{id:`${r}ShowPriceLabels`,title:n&&n.showPriceLabelsTitle||m});a.push(z);const N=[],E=(0,l.createCheckablePropertyDefinition)({checked:(0,l.convertToDefinitionProperty)(e,t.showPriceRange,u.format({title:i}))},{id:`${r}PriceRange`,title:n&&n.priceRange||b});N.push(E);const U=(0,l.createCheckablePropertyDefinition)({checked:(0,l.convertToDefinitionProperty)(e,t.showPercentPriceRange,h.format({title:i}))},{id:`${r}PercentChange`,title:n&&n.percentChange||C});N.push(U);const O=(0,l.createCheckablePropertyDefinition)({checked:(0,l.convertToDefinitionProperty)(e,t.showPipsPriceRange,f.format({title:i}))},{id:`${r}PipsChange`,title:n&&n.pipsChange||x});N.push(O);const G=(0,l.createCheckablePropertyDefinition)({checked:(0,l.convertToDefinitionProperty)(e,t.showBarsRange,y.format({title:i}))},{id:`${r}BarsRange`,title:n&&n.barRange||L});if(N.push(G),"showDateTimeRange"in t){const o=(0,l.createCheckablePropertyDefinition)({checked:(0,l.convertToDefinitionProperty)(e,t.showDateTimeRange,g.format({title:i}))},{id:`${r}DateTimeRange`,title:n&&n.dateTimeRange||A});N.push(o)}if("showDistance"in t){const o=(0,l.createCheckablePropertyDefinition)({checked:(0,l.convertToDefinitionProperty)(e,t.showDistance,v.format({title:i}))},{id:`${r}Distance`,title:n&&n.distance||k});N.push(o)}if("showAngle"in t){const o=(0,l.createCheckablePropertyDefinition)({checked:(0,l.convertToDefinitionProperty)(e,t.showAngle,_.format({title:i}))},{id:`${r}Angle`,title:n&&n.angle||V});N.push(o)}const F=[];F.push((0,l.createPropertyDefinitionsCheckableListOptionsGroup)(N,void 0,[],"trendLineToolCheckableListGroup",$));const H=(0,l.createOptionsPropertyDefinition)({option:(0,l.convertToDefinitionProperty)(e,t.statsPosition,T.format({title:i}))},{id:"trendLineToolStatsPosition",title:n&&n.statsPosition||S,options:new s.WatchedValue(D)});F.push(H);const j=(0,l.createCheckablePropertyDefinition)({checked:(0,l.convertToDefinitionProperty)(e,t.alwaysShowStats,P.format({title:i}))},{id:`${r}ShowStats`,title:n&&n.showStats||M});return F.push(j),a.push((0,l.createPropertyDefinitionsGeneralGroup)(F,`${r}StatsGroup`,W)),{definitions:a}}},47341:(e,t,i)=>{i.d(t,{createTextStyleDefinition:()=>C});var n=i(609838),r=i(754617),o=i(59668),l=i(871645)
;const s=new r.TranslatedString("change {toolName} text visibility",n.t(null,void 0,i(856634))),a=new r.TranslatedString("change {toolName} text color",n.t(null,void 0,i(864500))),c=new r.TranslatedString("change {toolName} text font size",n.t(null,void 0,i(221781))),d=new r.TranslatedString("change {toolName} text font bold",n.t(null,void 0,i(224701))),p=new r.TranslatedString("change {toolName} text font italic",n.t(null,void 0,i(342694))),u=new r.TranslatedString("change {toolName} text",n.t(null,void 0,i(166668))),h=new r.TranslatedString("change {toolName} labels alignment vertical",n.t(null,void 0,i(531689))),f=new r.TranslatedString("change {toolName} labels alignment horizontal",n.t(null,void 0,i(388277))),y=new r.TranslatedString("change {toolName} labels direction",n.t(null,void 0,i(61160))),g=new r.TranslatedString("change {toolName} text background visibility",n.t(null,void 0,i(31133))),v=new r.TranslatedString("change {toolName} text background color",n.t(null,void 0,i(222231))),_=new r.TranslatedString("change {toolName} text border visibility",n.t(null,void 0,i(158704))),P=new r.TranslatedString("change {toolName} text border width",n.t(null,void 0,i(535423))),T=new r.TranslatedString("change {toolName} text border color",n.t(null,void 0,i(836666))),D=new r.TranslatedString("change {toolName} text wrap",n.t(null,void 0,i(339587))),w=n.t(null,void 0,i(379468)),m=n.t(null,void 0,i(38408)),S=n.t(null,void 0,i(407560)),b=n.t(null,void 0,i(606060));function C(e,t,i,n){const r={},C={id:`${(0,l.removeSpaces)(i.originalText())}Text`,title:n.customTitles&&n.customTitles.text||"",placeholder:n.placeholder??b};if(void 0===t.showText||n.hideTextCheckbox||(r.checked=(0,o.convertToDefinitionProperty)(e,t.showText,s.format({toolName:i}))),void 0!==t.textColor&&(r.color=(0,o.getColorDefinitionProperty)(e,t.textColor,t.transparency||null,a.format({toolName:i}))),void 0!==t.fontSize&&(r.size=(0,o.convertToDefinitionProperty)(e,t.fontSize,c.format({toolName:i}))),void 0!==t.bold&&(r.bold=(0,o.convertToDefinitionProperty)(e,t.bold,d.format({toolName:i}))),void 0!==t.italic&&(r.italic=(0,o.convertToDefinitionProperty)(e,t.italic,p.format({toolName:i}))),void 0!==t.text){const l=u.format({toolName:i});r.text=(0,o.convertToDefinitionProperty)(e,t.text,l,void 0),C.isEditable=Boolean(n.isEditable),C.isMultiLine=Boolean(n.isMultiLine)}if(void 0!==t.vertLabelsAlign&&(r.alignmentVertical=(0,o.convertToDefinitionProperty)(e,t.vertLabelsAlign,h.format({toolName:i})),C.alignmentVerticalItems=n.alignmentVerticalItems),void 0!==t.horzLabelsAlign&&(r.alignmentHorizontal=(0,o.convertToDefinitionProperty)(e,t.horzLabelsAlign,f.format({toolName:i})),C.alignmentHorizontalItems=n.alignmentHorizontalItems),void 0!==t.textOrientation&&(r.orientation=(0,o.convertToDefinitionProperty)(e,t.textOrientation,y.format({toolName:i}))),void 0!==t.backgroundVisible&&(r.backgroundVisible=(0,o.convertToDefinitionProperty)(e,t.backgroundVisible,g.format({toolName:i}))),void 0!==t.backgroundColor){let n=null
;void 0!==t.backgroundTransparency&&(n=t.backgroundTransparency),r.backgroundColor=(0,o.getColorDefinitionProperty)(e,t.backgroundColor,n,v.format({toolName:i}))}return void 0===t.backgroundVisible&&void 0===t.backgroundColor||(C.backgroundTitle=n.customTitles&&n.customTitles.backgroundTitle||w),void 0!==t.borderVisible&&(r.borderVisible=(0,o.convertToDefinitionProperty)(e,t.borderVisible,_.format({toolName:i}))),void 0!==t.borderWidth&&(r.borderWidth=(0,o.convertToDefinitionProperty)(e,t.borderWidth,P.format({toolName:i}))),void 0!==t.borderColor&&(r.borderColor=(0,o.getColorDefinitionProperty)(e,t.borderColor,null,T.format({toolName:i}))),void 0===t.borderVisible&&void 0===t.borderColor&&void 0===t.borderWidth||(C.borderTitle=n.customTitles&&n.customTitles.borderTitle||m),void 0!==t.wrap&&(r.wrap=(0,o.convertToDefinitionProperty)(e,t.wrap,D.format({toolName:i})),C.wrapTitle=n.customTitles&&n.customTitles.wrapTitle||S),(0,o.createTextPropertyDefinition)(r,C)}},993876:(e,t,i)=>{i.r(t),i.d(t,{ArrowMarkDefinitionsViewModel:()=>d});var n=i(609838),r=i(754617),o=i(47341),l=i(633170),s=i(59668);const a=new r.TranslatedString("change arrow color",n.t(null,void 0,i(77931))),c=n.t(null,void 0,i(511858));class d extends l.LineDataSourceDefinitionsViewModel{_textPropertyDefinitions(){const e=this._source.properties().childs();return{definitions:[(0,o.createTextStyleDefinition)(this._propertyApplier,{text:e.text,textColor:e.color,fontSize:e.fontsize,bold:e.bold,italic:e.italic},new r.TranslatedString(this._source.name(),this._source.translatedType()),{isEditable:!0,isMultiLine:!0})]}}_stylePropertyDefinitions(){const e=this._source.properties().childs();return{definitions:[(0,s.createColorPropertyDefinition)({color:(0,s.getColorDefinitionProperty)(this._propertyApplier,e.arrowColor,null,a)},{id:"ArrowColor",title:c})]}}}},965042:(e,t,i)=>{i.r(t),i.d(t,{ArrowMarkerDefinitionsViewModel:()=>p});var n=i(609838),r=i(754617),o=i(59668),l=i(633170),s=i(871645),a=i(47341);const c=new r.TranslatedString("change {title} color",n.t(null,void 0,i(749442))),d=n.t(null,void 0,i(747370));class p extends l.LineDataSourceDefinitionsViewModel{_stylePropertyDefinitions(){const e=this._source.properties().childs(),t=this._source.name(),i=new r.TranslatedString(t,this._source.translatedType());return{definitions:[(0,o.createColorPropertyDefinition)({color:(0,o.getColorDefinitionProperty)(this._propertyApplier,e.backgroundColor,null,c.format({title:i}))},{id:(0,s.removeSpaces)(`${t}Color`),title:d})]}}_textPropertyDefinitions(){const e=this._source.properties().childs();return{definitions:[(0,a.createTextStyleDefinition)(this._propertyApplier,{text:e.text,textColor:e.textColor,fontSize:e.fontsize,bold:e.bold,italic:e.italic},new r.TranslatedString(this._source.name(),this._source.translatedType()),{isEditable:!0,isMultiLine:!0})]}}}},518143:(e,t,i)=>{i.r(t),i.d(t,{BarsPatternDefinitionsViewModel:()=>T});var n=i(609838),r=i(754617),o=i(633170),l=i(59668),s=i(963632),a=i(620308),c=i(901146),d=i(871645)
;const p=new r.TranslatedString("change {title} color",n.t(null,void 0,i(749442))),u=new r.TranslatedString("change {title} mode",n.t(null,void 0,i(657462))),h=new r.TranslatedString("change {title} mirrored",n.t(null,void 0,i(885198))),f=new r.TranslatedString("change {title} flipped",n.t(null,void 0,i(710643))),y=n.t(null,void 0,i(747370)),g=n.t(null,void 0,i(403214)),v=n.t(null,void 0,i(928941)),_=n.t(null,void 0,i(563271)),P=[{value:a.LineToolBarsPatternMode.Bars,title:n.t(null,void 0,i(949275))},{value:a.LineToolBarsPatternMode.OpenClose,title:n.t(null,void 0,i(398136))},{value:a.LineToolBarsPatternMode.Line,title:n.t(null,void 0,i(30216))},{value:a.LineToolBarsPatternMode.LineOpen,title:n.t(null,void 0,i(980332))},{value:a.LineToolBarsPatternMode.LineHigh,title:n.t(null,void 0,i(118387))},{value:a.LineToolBarsPatternMode.LineLow,title:n.t(null,void 0,i(153880))},{value:a.LineToolBarsPatternMode.LineHL2,title:n.t(null,void 0,i(832982))}];class T extends o.LineDataSourceDefinitionsViewModel{_stylePropertyDefinitions(){const e=this._source.properties().childs(),t=this._source.name(),i=new r.TranslatedString(t,this._source.translatedType()),n=(0,d.removeSpaces)(t);return{definitions:[(0,l.createColorPropertyDefinition)({color:(0,l.getColorDefinitionProperty)(this._propertyApplier,e.color,null,p.format({title:i}))},{id:`${n}Color`,title:y}),(0,l.createOptionsPropertyDefinition)({option:(0,l.convertToDefinitionProperty)(this._propertyApplier,e.mode,u.format({title:i}),[c.convertToInt])},{id:`${n}Mode`,title:g,options:new s.WatchedValue(P)}),(0,l.createCheckablePropertyDefinition)({checked:(0,l.convertToDefinitionProperty)(this._propertyApplier,e.mirrored,h.format({title:i}))},{id:`${n}Mirrored`,title:v}),(0,l.createCheckablePropertyDefinition)({checked:(0,l.convertToDefinitionProperty)(this._propertyApplier,e.flipped,f.format({title:i}))},{id:`${n}Flipped`,title:_})]}}}},169820:(e,t,i)=>{i.r(t),i.d(t,{BrushDefinitionsViewModel:()=>u});var n=i(609838),r=i(754617),o=i(114837),l=i(633170),s=i(59668),a=i(871645);const c=new r.TranslatedString("change {title} background visibility",n.t(null,void 0,i(830839))),d=new r.TranslatedString("change {title} background color",n.t(null,void 0,i(949765))),p=n.t(null,void 0,i(379468));class u extends l.LineDataSourceDefinitionsViewModel{_stylePropertyDefinitions(){const e=this._source.properties().childs(),t=this._source.name(),i=new r.TranslatedString(t,this._source.translatedType());return{definitions:[(0,o.createLineStyleDefinition)(this._propertyApplier,{lineColor:e.linecolor,lineWidth:e.linewidth,leftEnd:e.leftEnd,rightEnd:e.rightEnd},i,"Line"),(0,s.createColorPropertyDefinition)({checked:(0,s.convertToDefinitionProperty)(this._propertyApplier,e.fillBackground,c.format({title:i})),color:(0,s.getColorDefinitionProperty)(this._propertyApplier,e.backgroundColor,e.transparency,d.format({title:i}))},{id:(0,a.removeSpaces)(`${t}BackgroundColor`),title:p})]}}_coordinatesPropertyDefinitions(){return null}}},360095:(e,t,i)=>{i.r(t),i.d(t,{CalloutDefinitionsViewModel:()=>l})
;var n=i(47341),r=i(633170),o=i(754617);class l extends r.LineDataSourceDefinitionsViewModel{_textPropertyDefinitions(){const e=this._source.properties().childs();return{definitions:[(0,n.createTextStyleDefinition)(this._propertyApplier,{textColor:e.color,fontSize:e.fontsize,bold:e.bold,italic:e.italic,text:e.text,backgroundColor:e.backgroundColor,backgroundTransparency:e.transparency,borderColor:e.bordercolor,borderWidth:e.linewidth,wrap:e.wordWrap},new o.TranslatedString(this._source.name(),this._source.translatedType()),{isEditable:!0,isMultiLine:!0})]}}}},623959:(e,t,i)=>{i.r(t),i.d(t,{CrossLineDefinitionsViewModel:()=>c});var n=i(609838),r=i(754617),o=i(633170),l=i(639690),s=i(47341);const a=n.t(null,void 0,i(770320));class c extends o.LineDataSourceDefinitionsViewModel{_stylePropertyDefinitions(){const e=this._source.properties().childs();return(0,l.getLinesStylesPropertiesDefinitions)(this._propertyApplier,e,new r.TranslatedString(this._source.name(),this._source.translatedType()))}_textPropertyDefinitions(){const e=this._source.properties().childs();if("showLabel"in e){return{definitions:[(0,s.createTextStyleDefinition)(this._propertyApplier,{...e,textColor:e.textcolor,fontSize:e.fontsize},new r.TranslatedString(this._source.name(),this._source.translatedType()),{isEditable:!0,isMultiLine:!0,customTitles:{text:a}})]}}return null}}},650312:(e,t,i)=>{i.r(t),i.d(t,{CyclicAndSineLinesPatternDefinitionsViewModel:()=>a});var n=i(609838),r=i(754617),o=i(114837),l=i(633170);const s=n.t(null,void 0,i(156982));class a extends l.LineDataSourceDefinitionsViewModel{_stylePropertyDefinitions(){const e=this._source.properties().childs();return{definitions:[(0,o.createLineStyleDefinition)(this._propertyApplier,{lineColor:e.linecolor,lineWidth:e.linewidth,lineStyle:e.linestyle},new r.TranslatedString(this._source.name(),this._source.translatedType()),"Line",{line:s})]}}}},981288:(e,t,i)=>{i.r(t),i.d(t,{ElliottPatternDefinitionsViewModel:()=>y});var n=i(609838),r=i(754617),o=i(114837),l=i(633170),s=i(59668),a=i(963632),c=i(871645);const d=new r.TranslatedString("change {title} color",n.t(null,void 0,i(749442))),p=new r.TranslatedString("change {title} degree",n.t(null,void 0,i(86650))),u=n.t(null,void 0,i(747370)),h=n.t(null,void 0,i(332998)),f=n.t(null,void 0,i(623403));class y extends l.LineDataSourceDefinitionsViewModel{_stylePropertyDefinitions(){const e=this._source.properties().childs(),t=this._source.name(),i=new r.TranslatedString(t,this._source.translatedType());return{definitions:[(0,s.createColorPropertyDefinition)({color:(0,s.getColorDefinitionProperty)(this._propertyApplier,e.color,null,d.format({title:i}))},{id:(0,c.removeSpaces)(`${t}BackgroundColor`),title:u}),(0,o.createLineStyleDefinition)(this._propertyApplier,{showLine:e.showWave,lineWidth:e.linewidth},i,"Line",{line:h}),(0,s.createOptionsPropertyDefinition)({option:(0,s.convertToDefinitionProperty)(this._propertyApplier,e.degree,p.format({title:i}))},{id:`${t}Degree`,title:f,options:new a.WatchedValue(this._source.availableDegreesValues())})]}}}},
411002:(e,t,i)=>{i.r(t),i.d(t,{EllipseCircleDefinitionsViewModel:()=>l});var n=i(754617),r=i(47341),o=i(723674);class l extends o.GeneralFiguresDefinitionsViewModelBase{_textPropertyDefinitions(){const e=this._source.properties().childs();return{definitions:[(0,r.createTextStyleDefinition)(this._propertyApplier,{textColor:e.textColor,text:e.text,bold:e.bold,italic:e.italic,fontSize:e.fontSize},new n.TranslatedString(this._source.name(),this._source.translatedType()),{isEditable:!0,isMultiLine:!0})]}}}},625236:(e,t,i)=>{i.r(t),i.d(t,{FibCirclesDefinitionsViewModel:()=>b});var n=i(650151),r=i(609838),o=i(754617),l=i(114837),s=i(59668),a=i(633170),c=i(871645),d=i(588447);const p=new o.TranslatedString("change {title} level {index} line visibility",r.t(null,void 0,i(74991))),u=new o.TranslatedString("change {title} levels visibility",r.t(null,void 0,i(54517))),h=new o.TranslatedString("change {title} level {index} line color",r.t(null,void 0,i(300664))),f=new o.TranslatedString("change {title} level {index} line width",r.t(null,void 0,i(497870))),y=new o.TranslatedString("change {title} level {index} line coeff",r.t(null,void 0,i(127154))),g=new o.TranslatedString("change {title} all lines color",r.t(null,void 0,i(859577))),v=new o.TranslatedString("change {title} background visibility",r.t(null,void 0,i(830839))),_=new o.TranslatedString("change {title} background transparency",r.t(null,void 0,i(313783))),P=new o.TranslatedString("change {title} coeffs as percents visibility",r.t(null,void 0,i(31753))),T=r.t(null,void 0,i(551574)),D=r.t(null,void 0,i(528683)),w=r.t(null,void 0,i(379468)),m=r.t(null,void 0,i(79650)),S=r.t(null,void 0,i(53912));class b extends a.LineDataSourceDefinitionsViewModel{_stylePropertyDefinitions(){const e=[],t=this._source.properties().childs(),i=this._source.name(),r=(0,c.removeSpaces)(i),a=new o.TranslatedString(i,this._source.translatedType()),b=t.trendline.childs(),C=(0,l.createLineStyleDefinition)(this._propertyApplier,{showLine:b.visible,lineColor:b.color,lineStyle:b.linestyle,lineWidth:b.linewidth},a,"TrendLine",{line:T});e.push(C);const x=this._source.levelsCount();for(let i=1;i<=x;i++){const n=t[`level${i}`].childs(),o=(0,s.createLeveledLinePropertyDefinition)({checked:(0,s.convertToDefinitionProperty)(this._propertyApplier,n.visible,p.format({title:a,index:i})),color:(0,s.getColorDefinitionProperty)(this._propertyApplier,n.color,null,h.format({title:a,index:i})),width:(0,s.convertToDefinitionProperty)(this._propertyApplier,n.linewidth,f.format({title:a,index:i})),level:(0,s.convertToDefinitionProperty)(this._propertyApplier,n.coeff,y.format({title:a,index:i}))},{id:`${r}LineLevel${i}`});e.push(o)}const L=(0,s.createColorPropertyDefinition)({color:(0,s.getColorDefinitionProperty)(this._propertyApplier,new d.CollectibleColorPropertyUndoWrapper((0,n.ensureNotNull)(this._source.lineColorsProperty()),this._propertyApplier,null),null,g.format({title:a}),!0)},{id:`${r}AllLineColor`,title:D});e.push(L);const A=(0,s.createTransparencyPropertyDefinition)({checked:(0,
s.convertToDefinitionProperty)(this._propertyApplier,t.fillBackground,v.format({title:a})),transparency:(0,s.convertToDefinitionProperty)(this._propertyApplier,t.transparency,_.format({title:a}))},{id:`${r}Background`,title:w});e.push(A);const k=(0,s.createCheckablePropertyDefinition)({checked:(0,s.convertToDefinitionProperty)(this._propertyApplier,t.showCoeffs,u.format({title:a}))},{id:`${r}Levels`,title:m});e.push(k);const V=(0,s.createCheckablePropertyDefinition)({checked:(0,s.convertToDefinitionProperty)(this._propertyApplier,t.coeffsAsPercents,P.format({title:a}))},{id:`${r}Percentage`,title:S});return e.push(V),{definitions:e}}}},923317:(e,t,i)=>{i.r(t),i.d(t,{FibDrawingsWith24LevelsDefinitionsViewModel:()=>j});var n=i(650151),r=i(609838),o=i(754617),l=i(114837),s=i(59668),a=i(633170),c=i(816618),d=i(586970),p=i(963632),u=i(871645),h=i(588447);const f=new o.TranslatedString("change {title} level {index} line visibility",r.t(null,void 0,i(74991))),y=new o.TranslatedString("change {title} level {index} line color",r.t(null,void 0,i(300664))),g=new o.TranslatedString("change {title} level {index} line coeff",r.t(null,void 0,i(127154))),v=new o.TranslatedString("change {title} all lines color",r.t(null,void 0,i(859577))),_=new o.TranslatedString("change {title} background visibility",r.t(null,void 0,i(830839))),P=new o.TranslatedString("change {title} background transparency",r.t(null,void 0,i(313783))),T=new o.TranslatedString("change {title} reverse",r.t(null,void 0,i(50762))),D=new o.TranslatedString("change {title} prices visibility",r.t(null,void 0,i(904714))),w=new o.TranslatedString("change {title} labels alignment",r.t(null,void 0,i(258312))),m=new o.TranslatedString("change {title} text alignment",r.t(null,void 0,i(355134))),S=new o.TranslatedString("change {title} text visibility",r.t(null,void 0,i(730353))),b=new o.TranslatedString("change {title} labels font size",r.t(null,void 0,i(419658))),C=new o.TranslatedString("change {title} style",r.t(null,void 0,i(598463))),x=new o.TranslatedString("change {title} fib levels based on log scale",r.t(null,void 0,i(85509))),L=r.t(null,void 0,i(551574)),A=r.t(null,void 0,i(936937)),k=r.t(null,void 0,i(68461)),V=r.t(null,void 0,i(825112)),M=r.t(null,void 0,i(279192)),$=r.t(null,void 0,i(264531)),W=r.t(null,void 0,i(364489)),B=r.t(null,void 0,i(629416)),R=r.t(null,void 0,i(79650)),I=r.t(null,void 0,i(5119)),z=r.t(null,void 0,i(770320)),N=r.t(null,void 0,i(702573)),E=r.t(null,void 0,i(528683)),U=r.t(null,void 0,i(379468)),O=r.t(null,void 0,i(766086)),G=[{id:"values",value:!1,title:r.t(null,void 0,i(660092))},{id:"percents",value:!0,title:r.t(null,void 0,i(833120))}],F=[{id:c.VerticalAlign.Top,value:c.VerticalAlign.Bottom,title:r.t(null,void 0,i(697118))},{id:c.VerticalAlign.Middle,value:c.VerticalAlign.Middle,title:r.t(null,void 0,i(668833))},{id:c.VerticalAlign.Bottom,value:c.VerticalAlign.Top,title:r.t(null,void 0,i(327567))}],H=[8,10,11,12,14,16,18,20,22,24].map((e=>({title:String(e),value:e})));class j extends a.LineDataSourceDefinitionsViewModel{constructor(e,t){
super(e,t),this._disabledBasedOnLog=null;if("fibLevelsBasedOnLogScale"in this._source.properties().childs()){const e=this._source.priceScale();null!==e&&(this._disabledBasedOnLog=new p.WatchedValue(Boolean(!e.mode().log)),this._createPropertyRages(),e.modeChanged().subscribe(this,((e,t)=>{null!==this._disabledBasedOnLog&&this._disabledBasedOnLog.setValue(Boolean(!t.log))})))}}destroy(){super.destroy();const e=this._source.priceScale();null!==e&&e.modeChanged().unsubscribeAll(this)}_stylePropertyDefinitions(){const e=[],t=this._source.properties(),i=t.childs(),r=this._source.name(),a=(0,u.removeSpaces)(r),c=new o.TranslatedString(r,this._source.translatedType());if("trendline"in i){const t=i.trendline.childs(),n=(0,l.createLineStyleDefinition)(this._propertyApplier,{showLine:t.visible,lineColor:t.color,lineStyle:t.linestyle,lineWidth:t.linewidth},c,"TrendLine",{line:L});e.push(n)}const j=i.levelsStyle.childs(),Y={lineStyle:j.linestyle,lineWidth:j.linewidth},X={line:A};"extendLines"in i&&(Y.extendRight=i.extendLines,X.extendRightTitle=M),"extendLinesLeft"in i&&(Y.extendLeft=i.extendLinesLeft,X.extendLeftTitle=$),"extendRight"in i&&(Y.extendRight=i.extendRight,X.extendRightTitle=k),"extendLeft"in i&&(Y.extendLeft=i.extendLeft,X.extendLeftTitle=V);const q=(0,l.createLineStyleDefinition)(this._propertyApplier,Y,c,"LevelsStyleLine",X);e.push(q);const K=[],J=this._source.levelsCount();for(let e=1;e<=J;e++){const t=i[`level${e}`].childs(),n=(0,s.createLeveledLinePropertyDefinition)({checked:(0,s.convertToDefinitionProperty)(this._propertyApplier,t.visible,f.format({title:c,index:e})),color:(0,s.getColorDefinitionProperty)(this._propertyApplier,t.color,null,y.format({title:c,index:e})),level:(0,s.convertToDefinitionProperty)(this._propertyApplier,t.coeff,g.format({title:c,index:e}))},{id:`${a}LineLevel${e}`});K.push(n)}const Q=(0,s.createPropertyDefinitionsLeveledLinesGroup)(K,`${a}LeveledLinesGroup`);e.push((0,s.createPropertyDefinitionsGeneralGroup)([Q],`${a}Group`));const Z=(0,s.createColorPropertyDefinition)({color:(0,s.getColorDefinitionProperty)(this._propertyApplier,new h.CollectibleColorPropertyUndoWrapper((0,n.ensureNotNull)(this._source.lineColorsProperty()),this._propertyApplier,null),null,v.format({title:c}),!0)},{id:`${a}AllLineColor`,title:E});e.push(Z);const ee=(0,s.createTransparencyPropertyDefinition)({checked:(0,s.convertToDefinitionProperty)(this._propertyApplier,i.fillBackground,_.format({title:c})),transparency:(0,s.convertToDefinitionProperty)(this._propertyApplier,i.transparency,P.format({title:c}))},{id:`${a}Background`,title:U});e.push(ee);const te=i;if("reverse"in te){const t=(0,s.createCheckablePropertyDefinition)({checked:(0,s.convertToDefinitionProperty)(this._propertyApplier,te.reverse,T.format({title:c}))},{id:`${a}Reverse`,title:W});e.push(t)}const ie=(0,s.createCheckablePropertyDefinition)({checked:(0,s.convertToDefinitionProperty)(this._propertyApplier,i.showPrices,D.format({title:c}))},{id:`${a}Prices`,title:B});e.push(ie);const ne=(0,s.createOptionsPropertyDefinition)({checked:(0,
s.convertToDefinitionProperty)(this._propertyApplier,i.showCoeffs,C.format({title:c})),option:(0,s.convertToDefinitionProperty)(this._propertyApplier,i.coeffsAsPercents,C.format({title:c}))},{id:`${a}PitchStyle`,title:R,options:new p.WatchedValue(G)});e.push(ne);const re=(0,s.createTwoOptionsPropertyDefinition)({option1:(0,s.convertToDefinitionProperty)(this._propertyApplier,i.horzLabelsAlign,w.format({title:c})),option2:(0,s.convertToDefinitionProperty)(this._propertyApplier,i.vertLabelsAlign,w.format({title:c}))},{id:`${a}Alignment`,title:I,optionsItems1:new p.WatchedValue(d.availableAlignmentHorizontalItems),optionsItems2:new p.WatchedValue(F)});e.push(re);const oe=t.child("showText"),le=t.child("horzTextAlign"),se=t.child("vertTextAlign");if(oe&&le&&se){const t=(0,s.createTwoOptionsPropertyDefinition)({checked:(0,s.convertToDefinitionProperty)(this._propertyApplier,oe,S.format({title:c})),option1:(0,s.convertToDefinitionProperty)(this._propertyApplier,le,m.format({title:c})),option2:(0,s.convertToDefinitionProperty)(this._propertyApplier,se,m.format({title:c}))},{id:`${a}Text`,title:z,optionsItems1:new p.WatchedValue(d.availableAlignmentHorizontalItems),optionsItems2:new p.WatchedValue(F)});e.push(t)}const ae=(0,s.createOptionsPropertyDefinition)({option:(0,s.convertToDefinitionProperty)(this._propertyApplier,i.labelFontSize,b.format({title:c}))},{id:`${a}FontSize`,title:N,options:new p.WatchedValue(H)});if(e.push(ae),"fibLevelsBasedOnLogScale"in i&&null!==this._disabledBasedOnLog){const t=(0,s.createCheckablePropertyDefinition)({disabled:(0,s.convertFromWVToDefinitionProperty)(this._propertyApplier,this._disabledBasedOnLog,x.format({title:c})),checked:(0,s.convertToDefinitionProperty)(this._propertyApplier,i.fibLevelsBasedOnLogScale,x.format({title:c}))},{id:`${a}BasedOnLog`,title:O});e.push(t)}return{definitions:e}}}},586970:(e,t,i)=>{i.r(t),i.d(t,{FibTimezoneDefinitionsViewModel:()=>x,availableAlignmentHorizontalItems:()=>C,availableAlignmentVerticalItems:()=>b});var n=i(650151),r=i(609838),o=i(754617),l=i(59668),s=i(633170),a=i(816618),c=i(963632),d=i(871645),p=i(588447)
;const u=new o.TranslatedString("change {title} level {index} line visibility",r.t(null,void 0,i(74991))),h=new o.TranslatedString("change {title} level {index} line color",r.t(null,void 0,i(300664))),f=new o.TranslatedString("change {title} level {index} line width",r.t(null,void 0,i(497870))),y=new o.TranslatedString("change {title} level {index} line style",r.t(null,void 0,i(764707))),g=new o.TranslatedString("change {title} level {index} line coeff",r.t(null,void 0,i(127154))),v=new o.TranslatedString("change {title} all lines color",r.t(null,void 0,i(859577))),_=new o.TranslatedString("change {title} background visibility",r.t(null,void 0,i(830839))),P=new o.TranslatedString("change {title} background transparency",r.t(null,void 0,i(313783))),T=new o.TranslatedString("change {title} labels visibility",r.t(null,void 0,i(593340))),D=new o.TranslatedString("change {title} labels alignment",r.t(null,void 0,i(258312))),w=r.t(null,void 0,i(528683)),m=r.t(null,void 0,i(379468)),S=r.t(null,void 0,i(5119)),b=[{id:a.VerticalAlign.Bottom,value:a.VerticalAlign.Top,title:r.t(null,void 0,i(697118))},{id:a.VerticalAlign.Middle,value:a.VerticalAlign.Middle,title:r.t(null,void 0,i(668833))},{id:a.VerticalAlign.Top,value:a.VerticalAlign.Bottom,title:r.t(null,void 0,i(327567))}],C=[{id:a.HorizontalAlign.Left,value:a.HorizontalAlign.Left,title:r.t(null,void 0,i(411626))},{id:a.HorizontalAlign.Center,value:a.HorizontalAlign.Center,title:r.t(null,void 0,i(224197))},{id:a.HorizontalAlign.Right,value:a.HorizontalAlign.Right,title:r.t(null,void 0,i(50421))}];class x extends s.LineDataSourceDefinitionsViewModel{_stylePropertyDefinitions(){const e=[],t=this._source.properties().childs(),i=this._source.name(),r=(0,d.removeSpaces)(i),s=new o.TranslatedString(i,this._source.translatedType()),a=this._source.levelsCount();for(let i=1;i<=a;i++){const n=t[`level${i}`].childs(),o=(0,l.createLeveledLinePropertyDefinition)({checked:(0,l.convertToDefinitionProperty)(this._propertyApplier,n.visible,u.format({title:s,index:i})),color:(0,l.getColorDefinitionProperty)(this._propertyApplier,n.color,null,h.format({title:s,index:i})),width:(0,l.convertToDefinitionProperty)(this._propertyApplier,n.linewidth,f.format({title:s,index:i})),style:(0,l.convertToDefinitionProperty)(this._propertyApplier,n.linestyle,y.format({title:s,index:i})),level:(0,l.convertToDefinitionProperty)(this._propertyApplier,n.coeff,g.format({title:s,index:i}))},{id:`${r}LineLevel${i}`});e.push(o)}const x=(0,l.createColorPropertyDefinition)({color:(0,l.getColorDefinitionProperty)(this._propertyApplier,new p.CollectibleColorPropertyUndoWrapper((0,n.ensureNotNull)(this._source.lineColorsProperty()),this._propertyApplier,null),null,v.format({title:s}),!0)},{id:`${r}AllLineColor`,title:w});e.push(x);const L=(0,l.createTransparencyPropertyDefinition)({checked:(0,l.convertToDefinitionProperty)(this._propertyApplier,t.fillBackground,_.format({title:s})),transparency:(0,l.convertToDefinitionProperty)(this._propertyApplier,t.transparency,P.format({title:s}))},{id:`${r}Background`,title:m})
;e.push(L);const A=(0,l.createTwoOptionsPropertyDefinition)({checked:(0,l.convertToDefinitionProperty)(this._propertyApplier,t.showLabels,T.format({title:s})),option1:(0,l.convertToDefinitionProperty)(this._propertyApplier,t.horzLabelsAlign,D.format({title:s})),option2:(0,l.convertToDefinitionProperty)(this._propertyApplier,t.vertLabelsAlign,D.format({title:s}))},{id:`${r}Labels`,title:S,optionsItems1:new c.WatchedValue(C),optionsItems2:new c.WatchedValue(b)});return e.push(A),{definitions:e}}}},272163:(e,t,i)=>{i.r(t),i.d(t,{FlagMarkDefinitionsViewModel:()=>c});var n=i(609838),r=i(754617),o=i(633170),l=i(59668);const s=new r.TranslatedString("change flag color",n.t(null,void 0,i(577883))),a=n.t(null,void 0,i(333885));class c extends o.LineDataSourceDefinitionsViewModel{_stylePropertyDefinitions(){const e=this._source.properties().childs();return{definitions:[(0,l.createColorPropertyDefinition)({color:(0,l.getColorDefinitionProperty)(this._propertyApplier,e.flagColor,null,s)},{id:"FlagColor",title:a})]}}}},568435:(e,t,i)=>{i.r(t),i.d(t,{GannComplexAndFixedDefinitionsViewModel:()=>I,isGannComplexLineTool:()=>R});var n=i(650151),r=i(609838),o=i(754617),l=i(47341),s=i(59668),a=i(633170),c=i(157890),d=i(963632),p=i(901146),u=i(871645),h=i(588447);const f=new o.TranslatedString("change {title} level {index} line visibility",r.t(null,void 0,i(74991))),y=new o.TranslatedString("change {title} level {index} line color",r.t(null,void 0,i(300664))),g=new o.TranslatedString("change {title} level {index} line width",r.t(null,void 0,i(497870))),v=new o.TranslatedString("change {title} all lines color",r.t(null,void 0,i(859577))),_=new o.TranslatedString("change {title} background visibility",r.t(null,void 0,i(830839))),P=new o.TranslatedString("change {title} background transparency",r.t(null,void 0,i(313783))),T=new o.TranslatedString("change {title} reverse",r.t(null,void 0,i(50762))),D=new o.TranslatedString("change {title} fan {index} line visibility",r.t(null,void 0,i(728833))),w=new o.TranslatedString("change {title} fan {index} line color",r.t(null,void 0,i(162500))),m=new o.TranslatedString("change {title} fan {index} line width",r.t(null,void 0,i(206298))),S=new o.TranslatedString("change {title} arcs {index} line visibility",r.t(null,void 0,i(604313))),b=new o.TranslatedString("change {title} arcs {index} line color",r.t(null,void 0,i(895582))),C=new o.TranslatedString("change {title} arcs {index} line width",r.t(null,void 0,i(508745))),x=new o.TranslatedString("change top margin",r.t(null,void 0,i(674883))),L=r.t(null,void 0,i(364489)),A=r.t(null,void 0,i(528683)),k=r.t(null,void 0,i(379468)),V=r.t(null,void 0,i(478393)),M=r.t(null,void 0,i(627177)),$=r.t(null,void 0,i(79650)),W=r.t(null,void 0,i(584885)),B=r.t(null,void 0,i(259129));function R(e){return e instanceof c.LineToolGannComplex}class I extends a.LineDataSourceDefinitionsViewModel{_stylePropertyDefinitions(){const e=[],t=this._source.properties().childs(),i=this._source.name(),r=(0,
u.removeSpaces)(i),a=new o.TranslatedString(i,this._source.translatedType()),c=[],I=t.levels.childCount();for(let e=0;e<I;e++){const i=t.levels.childs()[e].childs(),n=(0,s.createLeveledLinePropertyDefinition)({checked:(0,s.convertToDefinitionProperty)(this._propertyApplier,i.visible,f.format({title:a,index:e})),color:(0,s.getColorDefinitionProperty)(this._propertyApplier,i.color,null,y.format({title:a,index:e})),width:(0,s.convertToDefinitionProperty)(this._propertyApplier,i.width,g.format({title:a,index:e}))},{id:`${r}LineLevel${e}`,title:`${e}`});c.push(n)}const z=(0,s.createPropertyDefinitionsLeveledLinesGroup)(c,`${r}LeveledLinesGroup`);e.push((0,s.createPropertyDefinitionsGeneralGroup)([z],`${r}LevelGroup`,$));const N=[],E=t.fanlines.childCount();for(let e=0;e<E;e++){const i=t.fanlines.childs()[e].childs(),n=(0,s.createLeveledLinePropertyDefinition)({checked:(0,s.convertToDefinitionProperty)(this._propertyApplier,i.visible,D.format({title:a,index:e})),color:(0,s.getColorDefinitionProperty)(this._propertyApplier,i.color,null,w.format({title:a,index:e})),width:(0,s.convertToDefinitionProperty)(this._propertyApplier,i.width,m.format({title:a,index:e}))},{id:`${r}FanLineLevel${e}`,title:`${i.x.value()}x${i.y.value()}`});N.push(n)}const U=(0,s.createPropertyDefinitionsLeveledLinesGroup)(N,`${r}FanLeveledLinesGroup`);e.push((0,s.createPropertyDefinitionsGeneralGroup)([U],`${r}FanLinesGroup`,W));const O=[],G=t.arcs.childCount();for(let e=0;e<G;e++){const i=t.arcs.childs()[e].childs(),n=(0,s.createLeveledLinePropertyDefinition)({checked:(0,s.convertToDefinitionProperty)(this._propertyApplier,i.visible,S.format({title:a,index:e})),color:(0,s.getColorDefinitionProperty)(this._propertyApplier,i.color,null,b.format({title:a,index:e})),width:(0,s.convertToDefinitionProperty)(this._propertyApplier,i.width,C.format({title:a,index:e}))},{id:`${r}ArcsLineLevel${e}`,title:`${i.x.value()}x${i.y.value()}`});O.push(n)}const F=(0,s.createPropertyDefinitionsLeveledLinesGroup)(O,`${r}ArcsLeveledLinesGroup`);e.push((0,s.createPropertyDefinitionsGeneralGroup)([F],`${r}ArcsLinesGroup`,B));const H=(0,s.createColorPropertyDefinition)({color:(0,s.getColorDefinitionProperty)(this._propertyApplier,new h.CollectibleColorPropertyUndoWrapper((0,n.ensureNotNull)(this._source.lineColorsProperty()),this._propertyApplier,v.format({title:a})),null,null)},{id:`${r}AllLineColor`,title:A});e.push(H);const j=t.arcsBackground.childs(),Y=(0,s.createTransparencyPropertyDefinition)({checked:(0,s.convertToDefinitionProperty)(this._propertyApplier,j.fillBackground,_.format({title:a})),transparency:(0,s.convertToDefinitionProperty)(this._propertyApplier,j.transparency,P.format({title:a}))},{id:`${r}Background`,title:k});e.push(Y);const X=(0,s.createCheckablePropertyDefinition)({checked:(0,s.convertToDefinitionProperty)(this._propertyApplier,t.reverse,T.format({title:a}))},{id:`${r}Reverse`,title:L});if(e.push(X),R(this._source)){const t=this._source,i=t.properties().childs(),n=(0,s.createNumberPropertyDefinition)({value:(0,
s.convertToDefinitionProperty)(this._propertyApplier,i.scaleRatio,x,[(0,p.limitedPrecision)(7),e=>null!==e?parseFloat(t.getScaleRatioFormatter().format(e,{ignoreLocaleNumberFormat:!0,noExponentialForm:!0})):null])},{id:"scaleRatio",title:V,min:new d.WatchedValue(1e-7),max:new d.WatchedValue(1e8),step:new d.WatchedValue(t.getScaleRatioStep())});e.push(n);const r=i.labelsStyle.childs(),o=(0,l.createTextStyleDefinition)(this._propertyApplier,{showText:i.showLabels,fontSize:r.fontSize,bold:r.bold,italic:r.italic},a,{customTitles:{text:M}});e.push(o)}return{definitions:e}}}},475432:(e,t,i)=>{i.r(t),i.d(t,{GannFanDefinitionsViewModel:()=>D});var n=i(650151),r=i(609838),o=i(754617),l=i(59668),s=i(633170),a=i(871645),c=i(588447);const d=new o.TranslatedString("change {title} level {index} line visibility",r.t(null,void 0,i(74991))),p=new o.TranslatedString("change {title} level {index} line color",r.t(null,void 0,i(300664))),u=new o.TranslatedString("change {title} level {index} line width",r.t(null,void 0,i(497870))),h=new o.TranslatedString("change {title} level {index} line style",r.t(null,void 0,i(764707))),f=new o.TranslatedString("change {title} all lines color",r.t(null,void 0,i(859577))),y=new o.TranslatedString("change {title} background visibility",r.t(null,void 0,i(830839))),g=new o.TranslatedString("change {title} background transparency",r.t(null,void 0,i(313783))),v=new o.TranslatedString("change {title} labels visibility",r.t(null,void 0,i(593340))),_=r.t(null,void 0,i(528683)),P=r.t(null,void 0,i(379468)),T=r.t(null,void 0,i(5119));class D extends s.LineDataSourceDefinitionsViewModel{_stylePropertyDefinitions(){const e=[],t=this._source.properties().childs(),i=this._source.name(),r=(0,a.removeSpaces)(i),s=new o.TranslatedString(i,this._source.translatedType()),D=this._source.levelsCount();for(let i=1;i<=D;i++){const n=t[`level${i}`].childs(),o=(0,l.createLeveledLinePropertyDefinition)({checked:(0,l.convertToDefinitionProperty)(this._propertyApplier,n.visible,d.format({title:s,index:i})),color:(0,l.getColorDefinitionProperty)(this._propertyApplier,n.color,null,p.format({title:s,index:i})),width:(0,l.convertToDefinitionProperty)(this._propertyApplier,n.linewidth,u.format({title:s,index:i})),style:(0,l.convertToDefinitionProperty)(this._propertyApplier,n.linestyle,h.format({title:s,index:i}))},{id:`${r}LineLevel${i}`,title:`${n.coeff1.value()}/${n.coeff2.value()}`});e.push(o)}const w=(0,l.createColorPropertyDefinition)({color:(0,l.getColorDefinitionProperty)(this._propertyApplier,new c.CollectibleColorPropertyUndoWrapper((0,n.ensureNotNull)(this._source.lineColorsProperty()),this._propertyApplier,null),null,f.format({title:s}))},{id:`${r}AllLineColor`,title:_});e.push(w);const m=(0,l.createTransparencyPropertyDefinition)({checked:(0,l.convertToDefinitionProperty)(this._propertyApplier,t.fillBackground,y.format({title:s})),transparency:(0,l.convertToDefinitionProperty)(this._propertyApplier,t.transparency,g.format({title:s}))},{id:`${r}Background`,title:P});e.push(m);const S=(0,
l.createCheckablePropertyDefinition)({checked:(0,l.convertToDefinitionProperty)(this._propertyApplier,t.showLabels,v.format({title:s}))},{id:`${r}Labels`,title:T});return e.push(S),{definitions:e}}}},569447:(e,t,i)=>{i.r(t),i.d(t,{GannSquareDefinitionsViewModel:()=>$});var n=i(650151),r=i(609838),o=i(754617),l=i(59668),s=i(633170),a=i(871645),c=i(588447);const d=new o.TranslatedString("change {title} level {index} line visibility",r.t(null,void 0,i(74991))),p=new o.TranslatedString("change {title} level {index} line color",r.t(null,void 0,i(300664))),u=new o.TranslatedString("change {title} level {index} line coeff",r.t(null,void 0,i(127154))),h=new o.TranslatedString("change {title} all lines color",r.t(null,void 0,i(859577))),f=new o.TranslatedString("change {title} background visibility",r.t(null,void 0,i(830839))),y=new o.TranslatedString("change {title} background transparency",r.t(null,void 0,i(313783))),g=new o.TranslatedString("change {title} reverse",r.t(null,void 0,i(50762))),v=new o.TranslatedString("change {title} left labels visibility",r.t(null,void 0,i(63021))),_=new o.TranslatedString("change {title} right labels visibility",r.t(null,void 0,i(508390))),P=new o.TranslatedString("change {title} top labels visibility",r.t(null,void 0,i(681301))),T=new o.TranslatedString("change {title} bottom labels visibility",r.t(null,void 0,i(362130))),D=new o.TranslatedString("change {title} fans visibility",r.t(null,void 0,i(115972))),w=new o.TranslatedString("change {title} fans line color",r.t(null,void 0,i(801716))),m=r.t(null,void 0,i(528683)),S=r.t(null,void 0,i(379468)),b=r.t(null,void 0,i(158557)),C=r.t(null,void 0,i(958476)),x=r.t(null,void 0,i(165e3)),L=r.t(null,void 0,i(228971)),A=r.t(null,void 0,i(274939)),k=r.t(null,void 0,i(917129)),V=r.t(null,void 0,i(136335)),M=r.t(null,void 0,i(364489));class $ extends s.LineDataSourceDefinitionsViewModel{_stylePropertyDefinitions(){const e=[],t=this._source.properties().childs(),i=this._source.name(),r=(0,a.removeSpaces)(i),s=new o.TranslatedString(i,this._source.translatedType()),$=[],W=this._source.hLevelsCount();for(let e=1;e<=W;e++){const i=t[`hlevel${e}`].childs(),n=(0,l.createLeveledLinePropertyDefinition)({checked:(0,l.convertToDefinitionProperty)(this._propertyApplier,i.visible,d.format({title:s,index:e})),color:(0,l.getColorDefinitionProperty)(this._propertyApplier,i.color,null,p.format({title:s,index:e})),level:(0,l.convertToDefinitionProperty)(this._propertyApplier,i.coeff,u.format({title:s,index:e}))},{id:`${r}HLineLevel${e}`});$.push(n)}const B=(0,l.createPropertyDefinitionsLeveledLinesGroup)($,`${r}HLeveledLinesGroup`),R=(0,l.createCheckablePropertyDefinition)({checked:(0,l.convertToDefinitionProperty)(this._propertyApplier,t.showLeftLabels,v.format({title:s}))},{id:`${r}LeftLabels`,title:x}),I=(0,l.createCheckablePropertyDefinition)({checked:(0,l.convertToDefinitionProperty)(this._propertyApplier,t.showRightLabels,_.format({title:s}))},{id:`${r}RightLabels`,title:L}),z=(0,l.createTransparencyPropertyDefinition)({checked:(0,
l.convertToDefinitionProperty)(this._propertyApplier,t.fillHorzBackground,f.format({title:s})),transparency:(0,l.convertToDefinitionProperty)(this._propertyApplier,t.horzTransparency,y.format({title:s}))},{id:`${r}BackgroundH`,title:S}),N=(0,l.createPropertyDefinitionsGeneralGroup)([B,R,I,z],`${r}HLevelGroup`,b);e.push(N);const E=[],U=this._source.vLevelsCount();for(let e=1;e<=U;e++){const i=t[`vlevel${e}`].childs(),n=(0,l.createLeveledLinePropertyDefinition)({checked:(0,l.convertToDefinitionProperty)(this._propertyApplier,i.visible,d.format({title:s,index:e})),color:(0,l.getColorDefinitionProperty)(this._propertyApplier,i.color,null,p.format({title:s,index:e})),level:(0,l.convertToDefinitionProperty)(this._propertyApplier,i.coeff,u.format({title:s,index:e}))},{id:`${r}VLineLevel${e}`});E.push(n)}const O=(0,l.createPropertyDefinitionsLeveledLinesGroup)(E,`${r}VLeveledLinesGroup`),G=(0,l.createCheckablePropertyDefinition)({checked:(0,l.convertToDefinitionProperty)(this._propertyApplier,t.showTopLabels,P.format({title:s}))},{id:`${r}TopLabels`,title:A}),F=(0,l.createCheckablePropertyDefinition)({checked:(0,l.convertToDefinitionProperty)(this._propertyApplier,t.showBottomLabels,T.format({title:s}))},{id:`${r}BottomLabels`,title:k}),H=(0,l.createTransparencyPropertyDefinition)({checked:(0,l.convertToDefinitionProperty)(this._propertyApplier,t.fillVertBackground,f.format({title:s})),transparency:(0,l.convertToDefinitionProperty)(this._propertyApplier,t.vertTransparency,y.format({title:s}))},{id:`${r}BackgroundV`,title:S}),j=(0,l.createPropertyDefinitionsGeneralGroup)([O,G,F,H],`${r}VLevelGroup`,C);e.push(j);const Y=(0,l.createColorPropertyDefinition)({color:(0,l.getColorDefinitionProperty)(this._propertyApplier,new c.CollectibleColorPropertyUndoWrapper((0,n.ensureNotNull)(this._source.lineColorsProperty()),this._propertyApplier,null),null,h.format({title:s}),!0)},{id:`${r}AllLineColor`,title:m});e.push(Y);const X=t.fans.childs(),q=(0,l.createColorPropertyDefinition)({checked:(0,l.convertToDefinitionProperty)(this._propertyApplier,X.visible,D.format({title:s})),color:(0,l.getColorDefinitionProperty)(this._propertyApplier,X.color,null,w.format({title:s}))},{id:`${r}FansLines`,title:V});e.push(q);const K=(0,l.createCheckablePropertyDefinition)({checked:(0,l.convertToDefinitionProperty)(this._propertyApplier,t.reverse,g.format({title:s}))},{id:`${r}Reverse`,title:M});return e.push(K),{definitions:e}}}},593457:(e,t,i)=>{i.r(t),i.d(t,{GeneralBezierDefinitionsViewModel:()=>u});var n=i(609838),r=i(754617),o=i(114837),l=i(633170),s=i(59668),a=i(871645);const c=new r.TranslatedString("change {title} background visibility",n.t(null,void 0,i(830839))),d=new r.TranslatedString("change {title} background color",n.t(null,void 0,i(949765))),p=n.t(null,void 0,i(379468));class u extends l.LineDataSourceDefinitionsViewModel{_stylePropertyDefinitions(){const e=this._source.properties().childs(),t=this._source.name(),i=new r.TranslatedString(t,this._source.translatedType());return{definitions:[(0,o.createLineStyleDefinition)(this._undoModel,{
lineColor:e.linecolor,lineWidth:e.linewidth,lineStyle:e.linestyle,extendLeft:e.extendLeft,extendRight:e.extendRight,leftEnd:e.leftEnd,rightEnd:e.rightEnd},i,"Line"),(0,s.createColorPropertyDefinition)({checked:(0,s.convertToDefinitionProperty)(this._undoModel,e.fillBackground,c.format({title:i})),color:(0,s.getColorDefinitionProperty)(this._undoModel,e.backgroundColor,e.transparency,d.format({title:i}))},{id:(0,a.removeSpaces)(`${t}BackgroundColor`),title:p})]}}}},631823:(e,t,i)=>{i.r(t),i.d(t,{GeneralDatePriceRangeDefinitionsViewModel:()=>z});var n=i(609838),r=i(754617),o=i(114837),l=i(47341),s=i(633170),a=i(59668),c=i(871645);const d=new r.TranslatedString("change {title} background visibility",n.t(null,void 0,i(830839))),p=new r.TranslatedString("change {title} background color",n.t(null,void 0,i(949765))),u=new r.TranslatedString("change {title} extend top",n.t(null,void 0,i(320867))),h=new r.TranslatedString("change {title} extend bottom",n.t(null,void 0,i(159665))),f=new r.TranslatedString("change {title} extend left",n.t(null,void 0,i(335139))),y=new r.TranslatedString("change {title} price range visibility",n.t(null,void 0,i(463962))),g=new r.TranslatedString("change {title} percent change visibility",n.t(null,void 0,i(887246))),v=new r.TranslatedString("change {title} change in pips visibility",n.t(null,void 0,i(681340))),_=new r.TranslatedString("change {title} bars range visibility",n.t(null,void 0,i(598845))),P=new r.TranslatedString("change {title} date/time range visibility",n.t(null,void 0,i(937563))),T=new r.TranslatedString("change {title} volume visibility",n.t(null,void 0,i(436336))),D=n.t(null,void 0,i(903554)),w=n.t(null,void 0,i(38408)),m=n.t(null,void 0,i(379468)),S=n.t(null,void 0,i(671397)),b=n.t(null,void 0,i(376410)),C=n.t(null,void 0,i(825112)),x=n.t(null,void 0,i(68461)),L=n.t(null,void 0,i(942349)),A=n.t(null,void 0,i(226754)),k=n.t(null,void 0,i(189073)),V=n.t(null,void 0,i(462374)),M=n.t(null,void 0,i(937644)),$=n.t(null,void 0,i(962362)),W=n.t(null,void 0,i(173525)),B=n.t(null,void 0,i(104518)),R=n.t(null,void 0,i(374872)),I=n.t(null,void 0,i(273863));class z extends s.LineDataSourceDefinitionsViewModel{_stylePropertyDefinitions(){const e=[],t=this._source.properties().childs(),s=this._source.name(),z=(0,c.removeSpaces)(s),N=new r.TranslatedString(s,this._source.translatedType()),E=(0,o.createLineStyleDefinition)(this._propertyApplier,{lineColor:t.linecolor,lineWidth:t.linewidth},N,"Line",{line:D});e.push(E);const U=t.hasOwnProperty("borderWidth");if(U){const i=(0,o.createLineStyleDefinition)(this._propertyApplier,{showLine:t.drawBorder,lineColor:t.borderColor,lineWidth:t.borderWidth},N,"Border",{line:w});e.push(i)}const O=(0,a.createColorPropertyDefinition)({checked:(0,a.convertToDefinitionProperty)(this._propertyApplier,t.fillBackground,d.format({title:N})),color:(0,a.getColorDefinitionProperty)(this._propertyApplier,t.backgroundColor,t.backgroundTransparency,p.format({title:N}))},{id:`${z}BackgroundColor`,title:m});e.push(O);const G=function(e){return e.hasOwnProperty("extendTop")
}(t);if(G){const r=(0,a.createCheckablePropertyDefinition)({checked:(0,a.convertToDefinitionProperty)(this._propertyApplier,t.extendTop,u.format({title:N}))},{id:`${z}ExtendTop`,title:S}),o=(0,a.createCheckablePropertyDefinition)({checked:(0,a.convertToDefinitionProperty)(this._propertyApplier,t.extendBottom,h.format({title:N}))},{id:`${z}ExtendBottom`,title:b});e.push((0,a.createPropertyDefinitionsCheckableListOptionsGroup)([r,o],void 0,[],"lineExtend",n.t(null,void 0,i(741410)),void 0,void 0,n.t(null,void 0,i(980736))))}const F=function(e){return e.hasOwnProperty("extendLeft")}(t);if(F){const r=(0,a.createCheckablePropertyDefinition)({checked:(0,a.convertToDefinitionProperty)(this._propertyApplier,t.extendLeft,f.format({title:N}))},{id:`${z}ExtendLeft`,title:C}),o=(0,a.createCheckablePropertyDefinition)({checked:(0,a.convertToDefinitionProperty)(this._propertyApplier,t.extendRight,h.format({title:N}))},{id:`${z}ExtendRight`,title:x});e.push((0,a.createPropertyDefinitionsCheckableListOptionsGroup)([r,o],void 0,[],"lineExtend",n.t(null,void 0,i(741410)),void 0,void 0,n.t(null,void 0,i(980736))))}const H=[];if(F||U){const e=(0,a.createCheckablePropertyDefinition)({checked:(0,a.convertToDefinitionProperty)(this._propertyApplier,t.showPriceRange,y.format({title:N}))},{id:`${z}PriceRange`,title:$});H.push(e);const i=(0,a.createCheckablePropertyDefinition)({checked:(0,a.convertToDefinitionProperty)(this._propertyApplier,t.showPercentPriceRange,g.format({title:N}))},{id:`${z}PercentChange`,title:W});H.push(i);const n=(0,a.createCheckablePropertyDefinition)({checked:(0,a.convertToDefinitionProperty)(this._propertyApplier,t.showPipsPriceRange,v.format({title:N}))},{id:`${z}PipsChange`,title:B});H.push(n)}if(G||U){const e=(0,a.createCheckablePropertyDefinition)({checked:(0,a.convertToDefinitionProperty)(this._propertyApplier,t.showBarsRange,_.format({title:N}))},{id:`${z}BarsRange`,title:k});H.push(e);const i=(0,a.createCheckablePropertyDefinition)({checked:(0,a.convertToDefinitionProperty)(this._propertyApplier,t.showDateTimeRange,P.format({title:N}))},{id:`${z}DateTimeRange`,title:V});H.push(i);const n=(0,a.createCheckablePropertyDefinition)({checked:(0,a.convertToDefinitionProperty)(this._propertyApplier,t.showVolume,T.format({title:N}))},{id:`${z}ShowVolume`,title:M});H.push(n)}const j=[];j.push((0,a.createPropertyDefinitionsCheckableListOptionsGroup)(H,void 0,[],"datePriceRangeCheckableListGroup",A));const Y=(0,l.createTextStyleDefinition)(this._propertyApplier,{textColor:t.textcolor,backgroundColor:t.labelBackgroundColor,backgroundTransparency:t.backgroundTransparency,fontSize:t.fontsize,backgroundVisible:t.fillLabelBackground},N,{isEditable:!0,isMultiLine:!0,customTitles:{text:R,backgroundTitle:I}});return j.push(Y),e.push((0,a.createPropertyDefinitionsGeneralGroup)(j,`${z}InfoGroup`,L)),{definitions:e}}_textPropertyDefinitions(){const e=this._source.properties().childs().customText.childs();return{definitions:[(0,l.createTextStyleDefinition)(this._propertyApplier,{...e,textColor:e.color,fontSize:e.fontsize
},new r.TranslatedString(this._source.name(),this._source.translatedType()),{isEditable:!0,isMultiLine:!0})]}}}},723674:(e,t,i)=>{i.r(t),i.d(t,{GeneralFiguresDefinitionsViewModel:()=>f,GeneralFiguresDefinitionsViewModelBase:()=>h});var n=i(609838),r=i(754617),o=i(114837),l=i(633170),s=i(59668),a=i(871645);const c=new r.TranslatedString("change {title} background visibility",n.t(null,void 0,i(830839))),d=new r.TranslatedString("change {title} background color",n.t(null,void 0,i(949765))),p=n.t(null,void 0,i(38408)),u=n.t(null,void 0,i(379468));class h extends l.LineDataSourceDefinitionsViewModel{_stylePropertyDefinitions(){const e=this._source.properties().childs(),t=this._source.name(),i=new r.TranslatedString(t,this._source.translatedType()),n=(0,o.createLineStyleDefinition)(this._propertyApplier,{lineColor:e.color,lineWidth:e.linewidth,lineStyle:e.linestyle},i,"Line",{line:p}),l="transparency"in e?e.transparency:null;return{definitions:[n,(0,s.createColorPropertyDefinition)({checked:(0,s.convertToDefinitionProperty)(this._propertyApplier,e.fillBackground,c.format({title:i})),color:(0,s.getColorDefinitionProperty)(this._propertyApplier,e.backgroundColor,l,d.format({title:i}))},{id:(0,a.removeSpaces)(`${t}BackgroundColor`),title:u})]}}}class f extends h{}},551523:(e,t,i)=>{i.r(t),i.d(t,{GeneralTrendFiguresDefinitionsViewModel:()=>g});var n=i(609838),r=i(754617),o=i(114837),l=i(47341),s=i(633170),a=i(59668),c=i(816618),d=i(871645);const p=new r.TranslatedString("change {title} background visibility",n.t(null,void 0,i(830839))),u=new r.TranslatedString("change {title} background color",n.t(null,void 0,i(949765))),h=[{value:c.VerticalAlign.Bottom,title:n.t(null,void 0,i(697118))},{value:c.VerticalAlign.Middle,title:n.t(null,void 0,i(391612))},{value:c.VerticalAlign.Top,title:n.t(null,void 0,i(327567))}],f=n.t(null,void 0,i(629416)),y=n.t(null,void 0,i(379468));class g extends s.LineDataSourceDefinitionsViewModel{_stylePropertyDefinitions(){const e=this._source.properties().childs(),t=this._source.name(),i=new r.TranslatedString(t,this._source.translatedType());return{definitions:[(0,o.createLineStyleDefinition)(this._propertyApplier,{...e,lineColor:e.linecolor,lineWidth:e.linewidth,lineStyle:e.linestyle},i,"Line"),(0,l.createTextStyleDefinition)(this._propertyApplier,{showText:e.showPrices,textColor:e.textcolor,fontSize:e.fontsize,bold:e.bold,italic:e.italic},i,{customTitles:{text:f}}),(0,a.createColorPropertyDefinition)({checked:(0,a.convertToDefinitionProperty)(this._propertyApplier,e.fillBackground,p.format({title:i})),color:(0,a.getColorDefinitionProperty)(this._propertyApplier,e.backgroundColor,e.transparency,u.format({title:i}))},{id:(0,d.removeSpaces)(`${t}Background`),title:y})]}}_textPropertyDefinitions(){const e=this._source.properties().childs();return{definitions:[(0,l.createTextStyleDefinition)(this._propertyApplier,{textColor:e.labelTextColor,text:e.labelText,bold:e.labelBold,italic:e.labelItalic,fontSize:e.labelFontSize,horzLabelsAlign:e.labelHorzAlign,vertLabelsAlign:e.labelVertAlign,
showText:e.labelVisible},new r.TranslatedString(this._source.name(),this._source.translatedType()),{isEditable:!0,isMultiLine:!0,alignmentVerticalItems:h})]}}}},895957:(e,t,i)=>{i.r(t),i.d(t,{GhostFeedDefinitionsViewModel:()=>b});var n=i(609838),r=i(754617),o=i(633170),l=i(59668),s=i(963632),a=i(871645);const c=new r.TranslatedString("change {title} candle up color",n.t(null,void 0,i(921631))),d=new r.TranslatedString("change {title} candle down color",n.t(null,void 0,i(680022))),p=new r.TranslatedString("change {title} candle border visibility",n.t(null,void 0,i(188530))),u=new r.TranslatedString("change {title} candle border up color",n.t(null,void 0,i(397345))),h=new r.TranslatedString("change {title} candle border down color",n.t(null,void 0,i(181139))),f=new r.TranslatedString("change {title} candle wick visibility",n.t(null,void 0,i(185382))),y=new r.TranslatedString("change {title} candle wick color",n.t(null,void 0,i(233589))),g=new r.TranslatedString("change {title} transparency",n.t(null,void 0,i(551085))),v=new r.TranslatedString("change {title} average HL value",n.t(null,void 0,i(839393))),_=new r.TranslatedString("change {title} variance value",n.t(null,void 0,i(523171))),P=n.t(null,void 0,i(745054)),T=n.t(null,void 0,i(600333)),D=n.t(null,void 0,i(632163)),w=n.t(null,void 0,i(819788)),m=n.t(null,void 0,i(252648)),S=n.t(null,void 0,i(829566));class b extends o.LineDataSourceDefinitionsViewModel{_stylePropertyDefinitions(){const e=this._source.properties().childs(),t=this._source.name(),i=(0,a.removeSpaces)(t),n=new r.TranslatedString(t,this._source.translatedType()),o=e.candleStyle.childs();return{definitions:[(0,l.createTwoColorsPropertyDefinition)({color1:(0,l.getColorDefinitionProperty)(this._propertyApplier,o.upColor,null,c.format({title:n})),color2:(0,l.getColorDefinitionProperty)(this._propertyApplier,o.downColor,null,d.format({title:n}))},{id:`${i}Candle2Colors`,title:P}),(0,l.createTwoColorsPropertyDefinition)({checked:(0,l.convertToDefinitionProperty)(this._propertyApplier,o.drawBorder,p.format({title:n})),color1:(0,l.getColorDefinitionProperty)(this._propertyApplier,o.borderUpColor,null,u.format({title:n})),color2:(0,l.getColorDefinitionProperty)(this._propertyApplier,o.borderDownColor,null,h.format({title:n}))},{id:`${i}CandleBorder2Colors`,title:T}),(0,l.createColorPropertyDefinition)({checked:(0,l.convertToDefinitionProperty)(this._propertyApplier,o.drawWick,f.format({title:n})),color:(0,l.getColorDefinitionProperty)(this._propertyApplier,o.wickColor,null,y.format({title:n}))},{id:`${i}CandleWickColor`,title:D}),(0,l.createTransparencyPropertyDefinition)({transparency:(0,l.convertToDefinitionProperty)(this._propertyApplier,e.transparency,g.format({title:n}))},{id:`${i}Transparency`,title:w})]}}_inputsPropertyDefinitions(){const e=this._source.properties().childs(),t=this._source.name(),i=(0,a.removeSpaces)(t),n=new r.TranslatedString(t,this._source.translatedType());return{definitions:[(0,l.createNumberPropertyDefinition)({value:(0,
l.convertToDefinitionProperty)(this._propertyApplier,e.averageHL,v.format({title:n}))},{id:`${i}AvgHL`,title:m,type:0,min:new s.WatchedValue(1),max:new s.WatchedValue(5e4),step:new s.WatchedValue(1)}),(0,l.createNumberPropertyDefinition)({value:(0,l.convertToDefinitionProperty)(this._propertyApplier,e.variance,_.format({title:n}))},{id:`${i}Variance`,title:S,type:0,min:new s.WatchedValue(1),max:new s.WatchedValue(100),step:new s.WatchedValue(1)})]}}}},372577:(e,t,i)=>{i.r(t),i.d(t,{HighlighterDefinitionsViewModel:()=>u});var n=i(609838),r=i(871645),o=i(754617),l=i(963632),s=i(59668),a=i(114837),c=i(633170);const d=new o.TranslatedString("change {title} width",n.t(null,void 0,i(60111))),p=[8,12,20,32,48,64,80,96].map((e=>({value:e,title:`${e.toString()}px`})));class u extends c.LineDataSourceDefinitionsViewModel{_stylePropertyDefinitions(){const e=this._source.properties().childs(),t=this._source.name(),c=new o.TranslatedString(t,this._source.translatedType()),u=(0,r.removeSpaces)(t);return{definitions:[(0,a.createLineStyleDefinition)(this._propertyApplier,{lineColor:e.linecolor},c,"Line"),(0,s.createOptionsPropertyDefinition)({option:(0,s.convertToDefinitionProperty)(this._propertyApplier,e.width,d.format({title:c}))},{id:`${u}Thickness`,title:n.t(null,void 0,i(254971)),options:new l.WatchedValue(p)})]}}_coordinatesPropertyDefinitions(){return null}}},735039:(e,t,i)=>{i.r(t),i.d(t,{HorizontalLineDefinitionsViewModel:()=>u});var n=i(609838),r=i(754617),o=i(59668),l=i(913909),s=i(871645),a=i(633170),c=i(639690),d=i(47341);const p=n.t(null,{context:"linetool point"},i(837814));class u extends a.LineDataSourceDefinitionsViewModel{_stylePropertyDefinitions(){const e=this._source.properties().childs();return(0,c.getLinesStylesPropertiesDefinitions)(this._propertyApplier,e,new r.TranslatedString(this._source.name(),this._source.translatedType()))}_coordinatesPropertyDefinitions(){const e=this._source.pointsProperty().childs().points[0].childs(),t=this._getYCoordinateStepWV(),i=(0,l.getCoordinateYMetaInfo)(this._propertyApplier,e,t);return{definitions:[(0,o.createCoordinatesPropertyDefinition)({y:i.property},{id:(0,s.removeSpaces)(`${this._source.name()}Point`),title:p,...i.info})]}}_textPropertyDefinitions(){const e=this._source.properties().childs();return{definitions:[(0,d.createTextStyleDefinition)(this._propertyApplier,{...e,textColor:e.textcolor,fontSize:e.fontsize,textOrientation:e.textOrientation},new r.TranslatedString(this._source.name(),this._source.translatedType()),{isEditable:!0,isMultiLine:!0})]}}}},292988:(e,t,i)=>{i.r(t),i.d(t,{HorizontalRayDefinitionsViewModel:()=>s});var n=i(754617),r=i(633170),o=i(639690),l=i(47341);class s extends r.LineDataSourceDefinitionsViewModel{_stylePropertyDefinitions(){const e=this._source.properties().childs();return(0,o.getLinesStylesPropertiesDefinitions)(this._propertyApplier,e,new n.TranslatedString(this._source.name(),this._source.translatedType()))}_textPropertyDefinitions(){const e=this._source.properties().childs();return{definitions:[(0,
l.createTextStyleDefinition)(this._propertyApplier,{...e,textColor:e.textcolor,fontSize:e.fontsize,textOrientation:e.textOrientation},new n.TranslatedString(this._source.name(),this._source.translatedType()),{isEditable:!0,isMultiLine:!0})]}}}},886350:(e,t,i)=>{i.r(t),i.d(t,{IconsDefinitionsViewModel:()=>d});var n=i(609838),r=i(754617),o=i(633170),l=i(59668),s=i(871645);const a=new r.TranslatedString("change {title} color",n.t(null,void 0,i(749442))),c=n.t(null,void 0,i(747370));class d extends o.LineDataSourceDefinitionsViewModel{constructor(e,t){super(e,t)}_stylePropertyDefinitions(){const e=this._source.properties().childs(),t=this._source.name(),i=new r.TranslatedString(t,this._source.translatedType());return{definitions:[(0,l.createColorPropertyDefinition)({color:(0,l.getColorDefinitionProperty)(this._propertyApplier,e.color,null,a.format({title:i}))},{id:(0,s.removeSpaces)(`${t}Color`),title:c})]}}}},860889:(e,t,i)=>{i.r(t),i.d(t,{ImageDefinitionsViewModel:()=>y});var n=i(609838),r=i(754617),o=i(59668),l=i(633170),s=i(464308),a=i(894382);const c=new r.TranslatedString("change image",n.t(null,void 0,i(83842))),d=new r.TranslatedString("change image transparency",n.t(null,void 0,i(465309))),p=n.t(null,void 0,i(868065)),u=n.t(null,void 0,i(819788)),h=n.t(null,void 0,i(581169));function f(e){return null!==(0,s.buildAbsoluteUserImageUrl)(e)?"":h}class y extends l.LineDataSourceDefinitionsViewModel{destroy(){this._source.properties().childs().url.unsubscribeAll(this),super.destroy()}_stylePropertyDefinitions(){const e=this._source.properties().childs();if(void 0===this._customErrorProperty){const t=new a.Property(f(e.url.value()));this._customErrorProperty=t,e.url.subscribe(this,(e=>{t.setValue(f(e.value()))}))}return{definitions:[(0,o.createImagePropertyDefinition)({url:(0,o.convertToDefinitionProperty)(this._propertyApplier,this._source.absoluteUserImageUrl(),c),transparency:(0,o.convertToDefinitionProperty)(this._propertyApplier,e.transparency,d)},{id:"image",title:p}),(0,o.createTransparencyPropertyDefinition)({transparency:(0,o.convertToDefinitionProperty)(this._propertyApplier,e.transparency,d)},{id:"imageTransparency",title:u})]}}}},910779:(e,t,i)=>{i.r(t),i.d(t,{ParallelChannelDefinitionsViewModel:()=>C});var n=i(609838),r=i(650151),o=i(754617),l=i(59668),s=i(816618),a=i(633170),c=i(47341),d=i(871645),p=i(913909),u=i(217254);const h=new o.TranslatedString("change {title} extending left",n.t(null,void 0,i(758052))),f=new o.TranslatedString("change {title} extending right",n.t(null,void 0,i(174867))),y=new o.TranslatedString("change {title} background visibility",n.t(null,void 0,i(830839))),g=new o.TranslatedString("change {title} background color",n.t(null,void 0,i(949765))),v=[{value:s.VerticalAlign.Bottom,title:n.t(null,void 0,i(697118))},{value:s.VerticalAlign.Middle,title:n.t(null,void 0,i(391612))},{value:s.VerticalAlign.Top,title:n.t(null,void 0,i(327567))
}],_=n.t(null,void 0,i(961856)),P=n.t(null,void 0,i(787430)),T=n.t(null,void 0,i(379468)),D=new o.TranslatedString("change {title} level {index} line visibility",n.t(null,void 0,i(74991))),w=new o.TranslatedString("change {title} level {index} line color",n.t(null,void 0,i(300664))),m=new o.TranslatedString("change {title} level {index} line width",n.t(null,void 0,i(497870))),S=new o.TranslatedString("change {title} level {index} line style",n.t(null,void 0,i(764707))),b=new o.TranslatedString("change {title} level {index} line coeff",n.t(null,void 0,i(127154)));class C extends a.LineDataSourceDefinitionsViewModel{_stylePropertyDefinitions(){const e=[],t=this._source.properties(),s=t.childs(),a=this._source.name(),c=(0,d.removeSpaces)(a),p=new o.TranslatedString(a,this._source.translatedType()),u=this._source.levelsCount();for(let i=1;i<=u;i++){const n=(0,r.ensureDefined)(t.child(`level${i}`)).childs(),o=(0,l.createLeveledLinePropertyDefinition)({checked:(0,l.convertToDefinitionProperty)(this._propertyApplier,n.visible,D.format({title:p,index:i})),color:(0,l.getColorDefinitionProperty)(this._propertyApplier,n.color,null,w.format({title:p,index:i})),width:(0,l.convertToDefinitionProperty)(this._propertyApplier,n.lineWidth,m.format({title:p,index:i})),style:(0,l.convertToDefinitionProperty)(this._propertyApplier,n.lineStyle,S.format({title:p,index:i})),level:(0,l.convertToDefinitionProperty)(this._propertyApplier,n.coeff,b.format({title:p,index:i}))},{id:`${c}LineLevel${i}`,locked:2===i||6===i});e.push(o)}const v=(0,l.createCheckablePropertyDefinition)({checked:(0,l.convertToDefinitionProperty)(this._propertyApplier,s.extendLeft,h.format({title:p}))},{id:`${c}ExtendLeft`,title:_}),C=(0,l.createCheckablePropertyDefinition)({checked:(0,l.convertToDefinitionProperty)(this._propertyApplier,s.extendRight,f.format({title:p}))},{id:`${c}ExtendRight`,title:P});return e.push((0,l.createPropertyDefinitionsCheckableListOptionsGroup)([v,C],void 0,[],"lineExtend",n.t(null,void 0,i(741410)),void 0,void 0,n.t(null,void 0,i(980736)))),e.push((0,l.createColorPropertyDefinition)({checked:(0,l.convertToDefinitionProperty)(this._propertyApplier,s.fillBackground,y.format({title:p})),color:(0,l.getColorDefinitionProperty)(this._propertyApplier,s.backgroundColor,s.transparency,g.format({title:p}))},{id:`${c}Background`,title:T})),{definitions:e}}_textPropertyDefinitions(){const e=this._source.properties().childs();return{definitions:[(0,c.createTextStyleDefinition)(this._propertyApplier,{textColor:e.labelTextColor,text:e.labelText,bold:e.labelBold,italic:e.labelItalic,fontSize:e.labelFontSize,horzLabelsAlign:e.labelHorzAlign,vertLabelsAlign:e.labelVertAlign},new o.TranslatedString(this._source.name(),this._source.translatedType()),{isEditable:!0,isMultiLine:!0,alignmentVerticalItems:v})]}}_coordinatesPropertyDefinitions(){const e=this._source.points().slice(0,2),t=this._source.pointsProperty().childs().points,r=[],s=this._getYCoordinateStepWV();return e.forEach(((e,i)=>{const n=t[i].childs();n&&r.push((0,
p.getCoordinatesPropertiesDefinitions)(this._propertyApplier,n,e,s,a.pointPriceBarTitle.format({count:(i+1).toString()}),this._source.name()))})),r.push((0,u.createNumberPropertyDefinition)({value:(0,l.convertToDefinitionProperty)(this._propertyApplier,this._source.priceOffsetProperty(),new o.TranslatedString("Change price offset",n.t(null,void 0,i(309074))))},{id:"PriceOffset",title:"Price offset",type:1,step:s})),{definitions:r}}}},884905:(e,t,i)=>{i.r(t),i.d(t,{PathDefinitionsViewModel:()=>a});var n=i(609838),r=i(754617),o=i(114837),l=i(633170);const s=n.t(null,void 0,i(903554));class a extends l.LineDataSourceDefinitionsViewModel{_stylePropertyDefinitions(){const e=this._source.properties().childs();return{definitions:[(0,o.createLineStyleDefinition)(this._propertyApplier,{lineColor:e.lineColor,lineWidth:e.lineWidth,lineStyle:e.lineStyle,leftEnd:e.leftEnd,rightEnd:e.rightEnd},new r.TranslatedString(this._source.name(),this._source.translatedType()),"Line",{line:s})]}}_coordinatesPropertyDefinitions(){return null}}},948600:(e,t,i)=>{i.r(t),i.d(t,{PatternWithBackgroundDefinitionViewModel:()=>y});var n=i(609838),r=i(754617),o=i(114837),l=i(47341),s=i(633170),a=i(59668),c=i(871645);const d=new r.TranslatedString("change {title} background visibility",n.t(null,void 0,i(830839))),p=new r.TranslatedString("change {title} background color",n.t(null,void 0,i(949765))),u=n.t(null,void 0,i(374872)),h=n.t(null,void 0,i(38408)),f=n.t(null,void 0,i(379468));class y extends s.LineDataSourceDefinitionsViewModel{_stylePropertyDefinitions(){const e=this._source.properties().childs(),t=this._source.name(),i=new r.TranslatedString(t,this._source.translatedType());return{definitions:[(0,l.createTextStyleDefinition)(this._propertyApplier,{textColor:e.textcolor,fontSize:e.fontsize,bold:e.bold,italic:e.italic},i,{isEditable:!0,isMultiLine:!0,customTitles:{text:u}}),(0,o.createLineStyleDefinition)(this._propertyApplier,{lineColor:e.color,lineWidth:e.linewidth},i,"Line",{line:h}),(0,a.createColorPropertyDefinition)({checked:(0,a.convertToDefinitionProperty)(this._propertyApplier,e.fillBackground,d.format({title:i})),color:(0,a.getColorDefinitionProperty)(this._propertyApplier,e.backgroundColor,e.transparency,p.format({title:i}))},{id:(0,c.removeSpaces)(`${t}BackgroundColor`),title:f})]}}}},933191:(e,t,i)=>{i.r(t),i.d(t,{PatternWithoutBackgroundDefinitionsViewModel:()=>d});var n=i(609838),r=i(754617),o=i(114837),l=i(47341),s=i(633170);const a=n.t(null,void 0,i(374872)),c=n.t(null,void 0,i(38408));class d extends s.LineDataSourceDefinitionsViewModel{_stylePropertyDefinitions(){const e=this._source.properties().childs(),t=new r.TranslatedString(this._source.name(),this._source.translatedType());return{definitions:[(0,l.createTextStyleDefinition)(this._propertyApplier,{textColor:e.textcolor,fontSize:e.fontsize,bold:e.bold,italic:e.italic},t,{isEditable:!0,isMultiLine:!0,customTitles:{text:a}}),(0,o.createLineStyleDefinition)(this._propertyApplier,{lineColor:e.color,lineWidth:e.linewidth},t,"Line",{line:c})]}}}},440999:(e,t,i)=>{i.r(t),i.d(t,{
PitchForkDefinitionsViewModel:()=>u});var n=i(609838),r=i(754617),o=i(59668),l=i(207441),s=i(81646),a=i(963632);const c=new r.TranslatedString("change {title} style",n.t(null,void 0,i(598463))),d=n.t(null,void 0,i(492516)),p=[{value:s.LineToolPitchforkStyle.Original,title:n.t(null,void 0,i(546005))},{value:s.LineToolPitchforkStyle.Schiff2,title:n.t(null,void 0,i(469904))},{value:s.LineToolPitchforkStyle.Schiff,title:n.t(null,void 0,i(170382))},{value:s.LineToolPitchforkStyle.Inside,title:n.t(null,void 0,i(391612))}];class u extends l.PitchBaseDefinitionsViewModel{_stylePropertyDefinitions(){const e=super._stylePropertyDefinitions(),t=this._source.properties().childs(),i=this._source.name(),n=new r.TranslatedString(i,this._source.translatedType()),l=(0,o.createOptionsPropertyDefinition)({option:(0,o.convertToDefinitionProperty)(this._propertyApplier,t.style,c.format({title:n}))},{id:`${i}PitchStyle`,title:d,options:new a.WatchedValue(p)});return e.definitions.push(l),e}}},700902:(e,t,i)=>{i.r(t),i.d(t,{PolylinesDefinitionsViewModel:()=>h});var n=i(609838),r=i(754617),o=i(114837),l=i(633170),s=i(59668),a=i(871645);const c=new r.TranslatedString("change {title} background visibility",n.t(null,void 0,i(830839))),d=new r.TranslatedString("change {title} background color",n.t(null,void 0,i(949765))),p=n.t(null,void 0,i(38408)),u=n.t(null,void 0,i(379468));class h extends l.LineDataSourceDefinitionsViewModel{_stylePropertyDefinitions(){const e=this._source.properties().childs(),t=this._source.name(),i=new r.TranslatedString(t,this._source.translatedType());return{definitions:[(0,o.createLineStyleDefinition)(this._propertyApplier,{lineColor:e.linecolor,lineWidth:e.linewidth},i,"Line",{line:p}),(0,s.createColorPropertyDefinition)({checked:(0,s.convertToDefinitionProperty)(this._propertyApplier,e.fillBackground,c.format({title:i})),color:(0,s.getColorDefinitionProperty)(this._propertyApplier,e.backgroundColor,e.transparency,d.format({title:i}))},{id:(0,a.removeSpaces)(`${t}BackgroundColor`),title:u})]}}_coordinatesPropertyDefinitions(){return null}}},306839:(e,t,i)=>{i.r(t),i.d(t,{PredictionDefinitionsViewModel:()=>A});var n=i(609838),r=i(754617),o=i(114837),l=i(633170),s=i(59668),a=i(871645)
;const c=new r.TranslatedString("change {title} source text color",n.t(null,void 0,i(245833))),d=new r.TranslatedString("change {title} source background color",n.t(null,void 0,i(463047))),p=new r.TranslatedString("change {title} source border color",n.t(null,void 0,i(493889))),u=new r.TranslatedString("change {title} target text color",n.t(null,void 0,i(232230))),h=new r.TranslatedString("change {title} target background color",n.t(null,void 0,i(25987))),f=new r.TranslatedString("change {title} target border color",n.t(null,void 0,i(424138))),y=new r.TranslatedString("change {title} success text color",n.t(null,void 0,i(171715))),g=new r.TranslatedString("change {title} success background color",n.t(null,void 0,i(580428))),v=new r.TranslatedString("change {title} failure text color",n.t(null,void 0,i(158406))),_=new r.TranslatedString("change {title} failure background color",n.t(null,void 0,i(291321))),P=n.t(null,void 0,i(788479)),T=n.t(null,void 0,i(614279)),D=n.t(null,void 0,i(964598)),w=n.t(null,void 0,i(759264)),m=n.t(null,void 0,i(695631)),S=n.t(null,void 0,i(479622)),b=n.t(null,void 0,i(423971)),C=n.t(null,void 0,i(590431)),x=n.t(null,void 0,i(871525)),L=n.t(null,void 0,i(928357));class A extends l.LineDataSourceDefinitionsViewModel{_stylePropertyDefinitions(){const e=this._source.properties().childs(),t=this._source.name(),i=(0,a.removeSpaces)(t),n=new r.TranslatedString(t,this._source.translatedType());return{definitions:[(0,o.createLineStyleDefinition)(this._propertyApplier,{lineColor:e.linecolor,lineWidth:e.linewidth},n,"Line"),(0,s.createColorPropertyDefinition)({color:(0,s.getColorDefinitionProperty)(this._propertyApplier,e.sourceTextColor,null,c.format({title:n}))},{id:`${i}SourceTextColor`,title:P}),(0,s.createColorPropertyDefinition)({color:(0,s.getColorDefinitionProperty)(this._propertyApplier,e.sourceBackColor,e.transparency,d.format({title:n}))},{id:`${i}SourceBackgroundColor`,title:T}),(0,s.createColorPropertyDefinition)({color:(0,s.getColorDefinitionProperty)(this._propertyApplier,e.sourceStrokeColor,null,p.format({title:n}))},{id:`${i}SourceBorderColor`,title:D}),(0,s.createColorPropertyDefinition)({color:(0,s.getColorDefinitionProperty)(this._propertyApplier,e.targetTextColor,null,u.format({title:n}))},{id:`${i}TargetTextColor`,title:w}),(0,s.createColorPropertyDefinition)({color:(0,s.getColorDefinitionProperty)(this._propertyApplier,e.targetBackColor,null,h.format({title:n}))},{id:`${i}TargetBackgroundColor`,title:m}),(0,s.createColorPropertyDefinition)({color:(0,s.getColorDefinitionProperty)(this._propertyApplier,e.targetStrokeColor,null,f.format({title:n}))},{id:`${i}TargetBorderColor`,title:S}),(0,s.createColorPropertyDefinition)({color:(0,s.getColorDefinitionProperty)(this._propertyApplier,e.successTextColor,null,y.format({title:n}))},{id:`${i}SuccessTextColor`,title:b}),(0,s.createColorPropertyDefinition)({color:(0,s.getColorDefinitionProperty)(this._propertyApplier,e.successBackground,null,g.format({title:n}))},{id:`${i}SuccessBackgroundColor`,title:C}),(0,
s.createColorPropertyDefinition)({color:(0,s.getColorDefinitionProperty)(this._propertyApplier,e.failureTextColor,null,v.format({title:n}))},{id:`${i}FailureTextColor`,title:x}),(0,s.createColorPropertyDefinition)({color:(0,s.getColorDefinitionProperty)(this._propertyApplier,e.failureBackground,null,_.format({title:n}))},{id:`${i}FailureBackgroundColor`,title:L})]}}}},652611:(e,t,i)=>{i.r(t),i.d(t,{PriceLabelDefinitionsViewModel:()=>a});var n=i(609838),r=i(754617),o=i(47341),l=i(633170);const s=n.t(null,void 0,i(770320));class a extends l.LineDataSourceDefinitionsViewModel{_stylePropertyDefinitions(){const e=this._source.properties().childs();return{definitions:[(0,o.createTextStyleDefinition)(this._propertyApplier,{textColor:e.color,fontSize:e.fontsize,backgroundColor:e.backgroundColor,backgroundTransparency:e.transparency,borderColor:e.borderColor},new r.TranslatedString(this._source.name(),this._source.translatedType()),{customTitles:{text:s}})]}}}},44262:(e,t,i)=>{i.r(t),i.d(t,{ProjectionDefinitionsViewModel:()=>h});var n=i(609838),r=i(754617),o=i(114837),l=i(633170),s=i(59668),a=i(871645);const c=new r.TranslatedString("change {title} background color 1",n.t(null,void 0,i(102788))),d=new r.TranslatedString("change {title} background color 2",n.t(null,void 0,i(147108))),p=n.t(null,void 0,i(38408)),u=n.t(null,void 0,i(379468));class h extends l.LineDataSourceDefinitionsViewModel{_stylePropertyDefinitions(){const e=this._source.properties().childs(),t=this._source.name(),i=new r.TranslatedString(t,this._source.translatedType());return{definitions:[(0,s.createTwoColorsPropertyDefinition)({color1:(0,s.getColorDefinitionProperty)(this._propertyApplier,e.color1,e.transparency,c.format({title:i})),color2:(0,s.getColorDefinitionProperty)(this._propertyApplier,e.color2,e.transparency,d.format({title:i}))},{id:(0,a.removeSpaces)(`${t}Background2Color`),title:u}),(0,o.createLineStyleDefinition)(this._propertyApplier,{lineColor:e.trendline.childs().color,lineWidth:e.linewidth},i,"Line",{line:p})]}}}},965204:(e,t,i)=>{i.r(t),i.d(t,{RectangleDefinitionsViewModel:()=>v});var n=i(609838),r=i(754617),o=i(871645),l=i(816618),s=i(59668),a=i(114837),c=i(723674),d=i(47341);const p=new r.TranslatedString("change {title} extending left",n.t(null,void 0,i(758052))),u=new r.TranslatedString("change {title} extending right",n.t(null,void 0,i(174867))),h=n.t(null,void 0,i(825112)),f=n.t(null,void 0,i(68461)),y=n.t(null,void 0,i(668286)),g=[{value:l.VerticalAlign.Bottom,title:n.t(null,void 0,i(697118))},{value:l.VerticalAlign.Middle,title:n.t(null,void 0,i(391612))},{value:l.VerticalAlign.Top,title:n.t(null,void 0,i(327567))}];class v extends c.GeneralFiguresDefinitionsViewModelBase{_stylePropertyDefinitions(){const e=this._source.properties().childs(),t=this._source.name(),l=new r.TranslatedString(t,this._source.translatedType()),c=super._stylePropertyDefinitions(),d=e.middleLine.childs(),g=(0,a.createLineStyleDefinition)(this._propertyApplier,{showLine:d.showLine,lineColor:d.lineColor,lineWidth:d.lineWidth,lineStyle:d.lineStyle},l,t,{
line:y}),v=c.definitions.findIndex((e=>e.id===(0,o.removeSpaces)(`${t}BackgroundColor`)));v<0?c.definitions.push(g):c.definitions.splice(v,0,g);const _=(0,s.createCheckablePropertyDefinition)({checked:(0,s.convertToDefinitionProperty)(this._propertyApplier,e.extendLeft,p.format({title:l}))},{id:`${t}ExtendLeft`,title:h}),P=(0,s.createCheckablePropertyDefinition)({checked:(0,s.convertToDefinitionProperty)(this._propertyApplier,e.extendRight,u.format({title:l}))},{id:`${t}ExtendRight`,title:f});return c.definitions.unshift((0,s.createPropertyDefinitionsCheckableListOptionsGroup)([_,P],void 0,[],"lineExtend",n.t(null,void 0,i(741410)),void 0,void 0,n.t(null,void 0,i(980736)))),c}_textPropertyDefinitions(){const e=this._source.properties().childs();return{definitions:[(0,d.createTextStyleDefinition)(this._propertyApplier,{textColor:e.textColor,text:e.text,bold:e.bold,italic:e.italic,fontSize:e.fontSize,horzLabelsAlign:e.horzLabelsAlign,vertLabelsAlign:e.vertLabelsAlign},new r.TranslatedString(this._source.name(),this._source.translatedType()),{isEditable:!0,isMultiLine:!0,alignmentVerticalItems:g})]}}}},721519:(e,t,i)=>{i.r(t),i.d(t,{RiskRewardDefinitionsViewModel:()=>F});var n=i(871645),r=i(609838),o=i(754617),l=i(114837),s=i(47341),a=i(633170),c=i(59668),d=i(515742),p=i(963632);const u=new o.TranslatedString("change {title} stop color",r.t(null,void 0,i(926598))),h=new o.TranslatedString("change {title} target color",r.t(null,void 0,i(210504))),f=new o.TranslatedString("change {title} price labels visibility",r.t(null,void 0,i(343))),y=new o.TranslatedString("change {title} compact stats mode",r.t(null,void 0,i(249904))),g=new o.TranslatedString("change {title} always show stats",r.t(null,void 0,i(980390))),v=new o.TranslatedString("change {title} account size",r.t(null,void 0,i(699232))),_=(new o.TranslatedString("change {title} currency",r.t(null,void 0,i(291600))),new o.TranslatedString("change {title} lot size",r.t(null,void 0,i(754087)))),P=new o.TranslatedString("change {title} risk",r.t(null,void 0,i(379875))),T=new o.TranslatedString("change {title} risk display mode",r.t(null,void 0,i(360308))),D=new o.TranslatedString("change {title} entry price",r.t(null,void 0,i(391534))),w=new o.TranslatedString("change {title} profit level",r.t(null,void 0,i(664330))),m=new o.TranslatedString("change {title} profit price",r.t(null,void 0,i(612073))),S=new o.TranslatedString("change {title} stop level",r.t(null,void 0,i(145438))),b=new o.TranslatedString("change {title} stop price",r.t(null,void 0,i(964330))),C=r.t(null,void 0,i(156982)),x=r.t(null,void 0,i(33310)),L=r.t(null,void 0,i(503560)),A=r.t(null,void 0,i(770320)),k=r.t(null,void 0,i(789735)),V=r.t(null,void 0,i(824821)),M=r.t(null,void 0,i(7953)),$=r.t(null,void 0,i(606002)),W=r.t(null,void 0,i(467852)),B=r.t(null,void 0,i(23814)),R=r.t(null,void 0,i(97668)),I=r.t(null,void 0,i(574045)),z=r.t(null,void 0,i(663886)),N=r.t(null,void 0,i(893857)),E=r.t(null,void 0,i(942747)),U=r.t(null,void 0,i(375106)),O=r.t(null,void 0,i(587145));function G(e){return[{
value:d.RiskDisplayMode.Percentage,title:U},{value:d.RiskDisplayMode.Money,title:e||O}]}class F extends a.LineDataSourceDefinitionsViewModel{constructor(e,t){super(e,t);const i=this._source.properties().childs(),n=i.riskDisplayMode.value();this._riskMaxWV=new p.WatchedValue(this._getRiskMax(n)),this._riskStepWV=new p.WatchedValue(this._getRiskStep(n)),this._riskPrecisionWV=new p.WatchedValue(this._getRiskPrecision(n)),this._riskUnitWV=new p.WatchedValue(this._getRiskUnit()),this._riskUnitOptionsWV=new p.WatchedValue(this._getRiskUnitOptions()),this._lotSizeStepWV=new p.WatchedValue(this._getLotSizeStep()),this._createPropertyRages(),i.riskDisplayMode.subscribe(this,(e=>this._onRiskDisplayChanged(e))),i.accountSize.subscribe(this,(()=>this._onAccountSizeChanged())),i.lotSize.subscribe(this,(()=>this._onLotSizeChanged())),i.currency.subscribe(this,(()=>this._updateRiskUnit())),this._undoModel.model().mainSeries().dataEvents().symbolResolved().subscribe(this,this._updateRiskUnit)}destroy(){super.destroy();const e=this._source.properties().childs();e.riskDisplayMode.unsubscribeAll(this),e.accountSize.unsubscribeAll(this),e.lotSize.unsubscribeAll(this),this._undoModel.model().mainSeries().dataEvents().symbolResolved().unsubscribeAll(this)}_stylePropertyDefinitions(){const e=this._source.properties().childs(),t=this._source.name(),i=(0,n.removeSpaces)(t),r=new o.TranslatedString(t,this._source.translatedType());return{definitions:[(0,l.createLineStyleDefinition)(this._propertyApplier,{lineColor:e.linecolor,lineWidth:e.linewidth},r,"Line",{line:C}),(0,c.createColorPropertyDefinition)({color:(0,c.getColorDefinitionProperty)(this._propertyApplier,e.stopBackground,e.stopBackgroundTransparency,u.format({title:r}))},{id:`${i}StopColor`,title:x}),(0,c.createColorPropertyDefinition)({color:(0,c.getColorDefinitionProperty)(this._propertyApplier,e.profitBackground,e.profitBackgroundTransparency,h.format({title:r}))},{id:`${i}ProfitColor`,title:L}),(0,s.createTextStyleDefinition)(this._propertyApplier,{textColor:e.textcolor,fontSize:e.fontsize},r,{isEditable:!0,isMultiLine:!0,customTitles:{text:A}}),(0,c.createCheckablePropertyDefinition)({checked:(0,c.convertToDefinitionProperty)(this._propertyApplier,e.showPriceLabels,f.format({title:r}))},{id:`${i}ShowPriceLabels`,title:E}),(0,c.createCheckablePropertyDefinition)({checked:(0,c.convertToDefinitionProperty)(this._propertyApplier,e.compact,y.format({title:r}))},{id:`${i}CompactMode`,title:k}),(0,c.createCheckablePropertyDefinition)({checked:(0,c.convertToDefinitionProperty)(this._propertyApplier,e.alwaysShowStats,g.format({title:r}))},{id:`${i}AlwaysShowStats`,title:N})]}}_inputsPropertyDefinitions(){const e=this._source.properties().childs(),t=this._source.name(),i=(0,n.removeSpaces)(t),r=new o.TranslatedString(t,this._source.translatedType()),l=this._getYCoordinateStepWV();let s;s=(0,c.createNumberPropertyDefinition)({value:(0,c.convertToDefinitionProperty)(this._propertyApplier,e.accountSize,v.format({title:r}))},{id:`${i}AccountSize`,title:R,type:1,min:new p.WatchedValue(1e-9),
max:new p.WatchedValue(1e9),step:new p.WatchedValue(1),unit:this._riskUnitWV});const a=(0,c.createNumberPropertyDefinition)({value:(0,c.convertToDefinitionProperty)(this._propertyApplier,e.lotSize,_.format({title:r}))},{id:`${i}LotSize`,title:I,type:1,min:new p.WatchedValue(1e-9),max:new p.WatchedValue(1e8),step:this._lotSizeStepWV}),d=(0,c.createNumberPropertyDefinition)({value:(0,c.convertToDefinitionProperty)(this._propertyApplier,e.risk,P.format({title:r}),[e=>parseFloat(e)]),unitOptionsValue:(0,c.convertToDefinitionProperty)(this._propertyApplier,e.riskDisplayMode,T.format({title:r}))},{id:`${i}Risk`,title:z,type:1,min:new p.WatchedValue(1e-9),max:this._riskMaxWV,precision:this._riskPrecisionWV,step:this._riskStepWV,unitOptions:this._riskUnitOptionsWV}),u=(0,c.createNumberPropertyDefinition)({value:(0,c.convertToDefinitionProperty)(this._propertyApplier,e.entryPrice,D.format({title:r}))},{id:`${i}EntryPrice`,title:$,type:1,step:l}),h=(0,c.createPropertyDefinitionsGeneralGroup)([s,a,d,u],`${i}AccountRisk`),f=(0,c.createNumberPropertyDefinition)({value:(0,c.convertToDefinitionProperty)(this._propertyApplier,e.profitLevel,w.format({title:r}))},{id:`${i}ProfitLevelTicks`,title:V,type:0,min:new p.WatchedValue(0),max:new p.WatchedValue(1e9),step:new p.WatchedValue(1)}),y=(0,c.createNumberPropertyDefinition)({value:(0,c.convertToDefinitionProperty)(this._propertyApplier,e.targetPrice,m.format({title:r}),[e=>e,e=>this._source.prepareProfitPrice(e)])},{id:`${i}ProfitLevelPrice`,title:M,type:1,step:l}),g=(0,c.createPropertyDefinitionsGeneralGroup)([f,y],`${i}ProfitLevel`,W),C=(0,c.createNumberPropertyDefinition)({value:(0,c.convertToDefinitionProperty)(this._propertyApplier,e.stopLevel,S.format({title:r}))},{id:`${i}StopLevelTicks`,title:V,type:0,min:new p.WatchedValue(0),max:new p.WatchedValue(1e9),step:new p.WatchedValue(1)}),x=(0,c.createNumberPropertyDefinition)({value:(0,c.convertToDefinitionProperty)(this._propertyApplier,e.stopPrice,b.format({title:r}),[e=>e,e=>this._source.prepareStopPrice(e)])},{id:`${i}StopLevelPrice`,title:M,type:1,step:l});return{definitions:[h,g,(0,c.createPropertyDefinitionsGeneralGroup)([C,x],`${i}StopLevel`,B)]}}_coordinatesPropertyDefinitions(){return null}_onRiskDisplayChanged(e){const t=e.value();this._riskMaxWV.setValue(this._getRiskMax(t)),this._riskStepWV.setValue(this._getRiskStep(t)),this._riskPrecisionWV.setValue(this._getRiskPrecision(t))}_onAccountSizeChanged(){this._riskMaxWV.setValue(this._getRiskMax(this._source.properties().childs().riskDisplayMode.value()))}_onLotSizeChanged(){this._lotSizeStepWV.setValue(this._getLotSizeStep())}_updateRiskUnit(){this._riskUnitWV.setValue(this._getRiskUnit()),this._riskUnitOptionsWV.setValue(this._getRiskUnitOptions())}_getRiskMax(e){return e===d.RiskDisplayMode.Percentage?100:this._source.properties().childs().accountSize.value()}_getRiskStep(e){return e===d.RiskDisplayMode.Percentage?.01:1}_getRiskPrecision(e){if(e===d.RiskDisplayMode.Percentage)return 2}_getLotSizeStep(){const e=this._source.properties().childs().lotSize.value()
;if(e%1==0)return 1;const t=e.toString(),i=t.split(".");if(2===i.length)return Number(`1e-${i[1].length}`);{const e=/\d+e-(\d+)/.exec(t);if(null!==e)return Number(`1e-${e[1]}`)}return this._lotSizeStepWV.value()}_getRiskUnit(){const e=this._undoModel.model().mainSeries().symbolInfo();return null!==e&&e.currency_code||""}_getRiskUnitOptions(){const e=this._undoModel.model().mainSeries().symbolInfo();return null!==e?G(e.currency_code):G()}}},724364:(e,t,i)=>{i.r(t),i.d(t,{SignpostDefinitionsViewModel:()=>v});var n=i(609838),r=i(754617),o=i(871645),l=i(963632),s=i(59668),a=i(47341),c=i(913909),d=i(633170);const p=new r.TranslatedString("change vertical position Y coordinate",n.t(null,void 0,i(469183))),u=new r.TranslatedString("change {title} emoji visibility",n.t(null,void 0,i(953274))),h=new r.TranslatedString("change {title} image background color",n.t(null,void 0,i(286993))),f=new r.TranslatedString("change {title} emoji",n.t(null,void 0,i(473247))),y=n.t(null,{context:"linetool point"},i(687476)),g=n.t(null,void 0,i(771310));class v extends d.LineDataSourceDefinitionsViewModel{_textPropertyDefinitions(){const e=this._source.properties().childs();return{definitions:[(0,a.createTextStyleDefinition)(this._propertyApplier,{text:e.text,fontSize:e.fontSize,bold:e.bold,italic:e.italic},new r.TranslatedString(this._source.name(),this._source.translatedType()),{isEditable:!0,isMultiLine:!0})]}}_coordinatesPropertyDefinitions(){const e=this._source.pointsProperty().childs().points[0].childs(),t=this._source.name(),i=(0,c.getCoordinateXMetaInfo)(this._propertyApplier,e),n={property:(0,s.convertToDefinitionProperty)(this._propertyApplier,e.price,p),info:{typeY:1,stepY:new l.WatchedValue(1),minY:new l.WatchedValue(-100),maxY:new l.WatchedValue(100)}};return{definitions:[(0,s.createCoordinatesPropertyDefinition)({x:i.property,y:n.property},{id:(0,o.removeSpaces)(`${t}Coordinates${y}`),title:y,...i.info,...n.info})]}}_stylePropertyDefinitions(){const e=this._source.properties().childs(),t=this._source.name(),i=new r.TranslatedString(t,this._source.translatedType());return{definitions:[(0,s.createEmojiPropertyDefinition)({checked:(0,s.convertToDefinitionProperty)(this._propertyApplier,e.showImage,u.format({title:i})),backgroundColor:(0,s.getColorDefinitionProperty)(this._propertyApplier,e.plateColor,null,h.format({title:i})),emoji:(0,s.convertToDefinitionProperty)(this._propertyApplier,e.emoji,f.format({title:i}))},{id:(0,o.removeSpaces)(`${t}Emoji${g}`),title:g})]}}}},647655:(e,t,i)=>{i.r(t),i.d(t,{TextDefinitionsViewModel:()=>l});var n=i(47341),r=i(633170),o=i(754617);class l extends r.LineDataSourceDefinitionsViewModel{_textPropertyDefinitions(){const e=this._source.properties().childs();return{definitions:[(0,n.createTextStyleDefinition)(this._propertyApplier,{textColor:e.color,fontSize:e.fontsize,bold:e.bold,italic:e.italic,text:e.text,backgroundVisible:e.fillBackground,backgroundColor:e.backgroundColor,backgroundTransparency:e.backgroundTransparency,borderVisible:e.drawBorder,borderColor:e.borderColor,wrap:e.wordWrap
},new o.TranslatedString(this._source.name(),this._source.translatedType()),{isEditable:!0,isMultiLine:!0})]}}}},42582:(e,t,i)=>{i.r(t),i.d(t,{TimeCyclesPatternDefinitionsViewModel:()=>h});var n=i(609838),r=i(754617),o=i(114837),l=i(633170),s=i(59668),a=i(871645);const c=new r.TranslatedString("change {title} background visibility",n.t(null,void 0,i(830839))),d=new r.TranslatedString("change {title} background color",n.t(null,void 0,i(949765))),p=n.t(null,void 0,i(903554)),u=n.t(null,void 0,i(379468));class h extends l.LineDataSourceDefinitionsViewModel{_stylePropertyDefinitions(){const e=this._source.properties().childs(),t=this._source.name(),i=new r.TranslatedString(t,this._source.translatedType());return{definitions:[(0,o.createLineStyleDefinition)(this._propertyApplier,{lineColor:e.linecolor,lineWidth:e.linewidth,lineStyle:e.linestyle},i,"Line",{line:p}),(0,s.createColorPropertyDefinition)({checked:(0,s.convertToDefinitionProperty)(this._propertyApplier,e.fillBackground,c.format({title:i})),color:(0,s.getColorDefinitionProperty)(this._propertyApplier,e.backgroundColor,e.transparency,d.format({title:i}))},{id:(0,a.removeSpaces)(`${t}BackgroundColor`),title:u})]}}}},606112:(e,t,i)=>{i.r(t),i.d(t,{TrendAngleDefinitionsViewModel:()=>f});var n=i(609838),r=i(754617),o=i(59668),l=i(633170),s=i(963632),a=i(913909),c=i(552147);const d=new r.TranslatedString("change angle",n.t(null,void 0,i(903894))),p=n.t(null,void 0,i(600390)),u=n.t(null,void 0,i(770320)),h=n.t(null,{context:"linetool point"},i(506737));class f extends l.LineDataSourceDefinitionsViewModel{_coordinatesPropertyDefinitions(){const e=this._source.points(),t=[],i=this._source.pointsProperty().childs().points[0].childs(),n=this._getYCoordinateStepWV();t.push((0,a.getCoordinatesPropertiesDefinitions)(this._propertyApplier,i,e[0],n,h,this._source.name()));const r=(0,o.createNumberPropertyDefinition)({value:(0,o.convertToDefinitionProperty)(this._propertyApplier,this._source.properties().childs().angle,d)},{id:"TrendLineAngleCoordinate",title:p,min:new s.WatchedValue(-360),max:new s.WatchedValue(360),step:new s.WatchedValue(1)});return t.push(r),{definitions:t}}_stylePropertyDefinitions(){const e=this._source.properties().childs();return(0,c.getTrendLineToolsStylePropertiesDefinitions)(this._propertyApplier,e,new r.TranslatedString(this._source.name(),this._source.translatedType()),{text:u})}}},224357:(e,t,i)=>{i.r(t),i.d(t,{TrendBasedFibTimeDefinitionsViewModel:()=>x});var n=i(650151),r=i(609838),o=i(754617),l=i(114837),s=i(59668),a=i(633170),c=i(586970),d=i(963632),p=i(871645),u=i(588447)
;const h=new o.TranslatedString("change {title} level {index} line visibility",r.t(null,void 0,i(74991))),f=new o.TranslatedString("change {title} level {index} line color",r.t(null,void 0,i(300664))),y=new o.TranslatedString("change {title} level {index} line width",r.t(null,void 0,i(497870))),g=new o.TranslatedString("change {title} level {index} line style",r.t(null,void 0,i(764707))),v=new o.TranslatedString("change {title} level {index} line coeff",r.t(null,void 0,i(127154))),_=new o.TranslatedString("change {title} all lines color",r.t(null,void 0,i(859577))),P=new o.TranslatedString("change {title} background visibility",r.t(null,void 0,i(830839))),T=new o.TranslatedString("change {title} background transparency",r.t(null,void 0,i(313783))),D=new o.TranslatedString("change {title} labels visibility",r.t(null,void 0,i(593340))),w=new o.TranslatedString("change {title} labels alignment",r.t(null,void 0,i(258312))),m=r.t(null,void 0,i(551574)),S=r.t(null,void 0,i(528683)),b=r.t(null,void 0,i(379468)),C=r.t(null,void 0,i(5119));class x extends a.LineDataSourceDefinitionsViewModel{_stylePropertyDefinitions(){const e=[],t=this._source.properties(),i=t.childs(),r=this._source.name(),a=(0,p.removeSpaces)(r),x=new o.TranslatedString(r,this._source.translatedType()),L=i.trendline.childs(),A=(0,l.createLineStyleDefinition)(this._propertyApplier,{showLine:L.visible,lineColor:L.color,lineStyle:L.linestyle,lineWidth:L.linewidth},x,"TrendLine",{line:m});e.push(A);const k=this._source.levelsCount();for(let i=1;i<=k;i++){const r=(0,n.ensureDefined)(t.child(`level${i}`)).childs(),o=(0,s.createLeveledLinePropertyDefinition)({checked:(0,s.convertToDefinitionProperty)(this._propertyApplier,r.visible,h.format({title:x,index:i})),color:(0,s.getColorDefinitionProperty)(this._propertyApplier,r.color,null,f.format({title:x,index:i})),width:(0,s.convertToDefinitionProperty)(this._propertyApplier,r.linewidth,y.format({title:x,index:i})),style:(0,s.convertToDefinitionProperty)(this._propertyApplier,r.linestyle,g.format({title:x,index:i})),level:(0,s.convertToDefinitionProperty)(this._propertyApplier,r.coeff,v.format({title:x,index:i}))},{id:`${a}LineLevel${i}`});e.push(o)}const V=(0,s.createColorPropertyDefinition)({color:(0,s.getColorDefinitionProperty)(this._propertyApplier,new u.CollectibleColorPropertyUndoWrapper((0,n.ensureNotNull)(this._source.lineColorsProperty()),this._propertyApplier,null),null,_.format({title:x}),!0)},{id:`${a}AllLineColor`,title:S});e.push(V);const M=(0,s.createTransparencyPropertyDefinition)({checked:(0,s.convertToDefinitionProperty)(this._propertyApplier,i.fillBackground,P.format({title:x})),transparency:(0,s.convertToDefinitionProperty)(this._propertyApplier,i.transparency,T.format({title:x}))},{id:`${a}Background`,title:b});e.push(M);const $=(0,s.createTwoOptionsPropertyDefinition)({checked:(0,s.convertToDefinitionProperty)(this._propertyApplier,i.showCoeffs,D.format({title:x})),option1:(0,s.convertToDefinitionProperty)(this._propertyApplier,i.horzLabelsAlign,w.format({title:x})),option2:(0,
s.convertToDefinitionProperty)(this._propertyApplier,i.vertLabelsAlign,w.format({title:x}))},{id:`${a}Labels`,title:C,optionsItems1:new d.WatchedValue(c.availableAlignmentHorizontalItems),optionsItems2:new d.WatchedValue(c.availableAlignmentVerticalItems)});return e.push($),{definitions:e}}}},585924:(e,t,i)=>{i.r(t),i.d(t,{TrendLineDefinitionsViewModel:()=>s});var n=i(754617),r=i(633170),o=i(552147),l=i(47341);class s extends r.LineDataSourceDefinitionsViewModel{_stylePropertyDefinitions(){const e=this._source.properties().childs();return(0,o.getTrendLineToolsStylePropertiesDefinitions)(this._propertyApplier,e,new n.TranslatedString(this._source.name(),this._source.translatedType()))}_textPropertyDefinitions(){const e=this._source.properties().childs();return{definitions:[(0,l.createTextStyleDefinition)(this._propertyApplier,{...e,textColor:e.textcolor,fontSize:e.fontsize},new n.TranslatedString(this._source.name(),this._source.translatedType()),{isEditable:!0,isMultiLine:!0})]}}}},7495:(e,t,i)=>{i.r(t),i.d(t,{VerticalLineDefinitionsViewModel:()=>u});var n=i(609838),r=i(754617),o=i(59668),l=i(913909),s=i(639690),a=i(871645),c=i(633170),d=i(47341);const p=n.t(null,{context:"linetool point"},i(726381));class u extends c.LineDataSourceDefinitionsViewModel{_stylePropertyDefinitions(){const e=this._source.properties().childs();return(0,s.getLinesStylesPropertiesDefinitions)(this._propertyApplier,e,new r.TranslatedString(this._source.name(),this._source.translatedType()))}_coordinatesPropertyDefinitions(){const e=this._source.pointsProperty().childs().points[0].childs(),t=(0,l.getCoordinateXMetaInfo)(this._propertyApplier,e);return{definitions:[(0,o.createCoordinatesPropertyDefinition)({x:t.property},{id:(0,a.removeSpaces)(`${this._source.name()}Point1`),title:p,...t.info})]}}_textPropertyDefinitions(){const e=this._source.properties().childs();return{definitions:[(0,d.createTextStyleDefinition)(this._propertyApplier,{...e,textColor:e.textcolor,fontSize:e.fontsize,textOrientation:e.textOrientation},new r.TranslatedString(this._source.name(),this._source.translatedType()),{isEditable:!0,isMultiLine:!0})]}}}},64935:(e,t,i)=>{i.r(t),i.d(t,{AnchoredVWAPDefinitionsViewModel:()=>O});var n=i(609838),r=i(754617),o=(i(460351),i(59668)),l=i(19224),s=i(871645),a=i(258895)
;const c=new r.TranslatedString("change {title} VWAP line color",n.t(null,void 0,i(683030))),d=new r.TranslatedString("change {title} VWAP line width",n.t(null,void 0,i(947479))),p=new r.TranslatedString("change {title} lower band #1 line visibility",n.t(null,void 0,i(487716))),u=new r.TranslatedString("change {title} lower band #1 line color",n.t(null,void 0,i(667450))),h=new r.TranslatedString("change {title} lower band #1 line width",n.t(null,void 0,i(743181))),f=new r.TranslatedString("change {title} upper band #1 line visibility",n.t(null,void 0,i(681363))),y=new r.TranslatedString("change {title} upper band #1 line color",n.t(null,void 0,i(927326))),g=new r.TranslatedString("change {title} upper band #1 line width",n.t(null,void 0,i(601353))),v=new r.TranslatedString("change {title} lower band #2 line visibility",n.t(null,void 0,i(694308))),_=new r.TranslatedString("change {title} lower band #2 line color",n.t(null,void 0,i(635092))),P=new r.TranslatedString("change {title} lower band #2 line width",n.t(null,void 0,i(8873))),T=new r.TranslatedString("change {title} upper band #2 line visibility",n.t(null,void 0,i(693075))),D=new r.TranslatedString("change {title} upper band #2 line color",n.t(null,void 0,i(842905))),w=new r.TranslatedString("change {title} upper band #2 line width",n.t(null,void 0,i(607943))),m=new r.TranslatedString("change {title} lower band #3 line visibility",n.t(null,void 0,i(632442))),S=new r.TranslatedString("change {title} lower band #3 line color",n.t(null,void 0,i(568180))),b=new r.TranslatedString("change {title} lower band #3 line width",n.t(null,void 0,i(303476))),C=new r.TranslatedString("change {title} upper band #3 line visibility",n.t(null,void 0,i(715698))),x=new r.TranslatedString("change {title} upper band #3 line color",n.t(null,void 0,i(150428))),L=new r.TranslatedString("change {title} upper band #3 line width",n.t(null,void 0,i(427414))),A=new r.TranslatedString("change {title} background visibility",n.t(null,void 0,i(830839))),k=new r.TranslatedString("change {title} background color",n.t(null,void 0,i(949765))),V=new r.TranslatedString("change {title} price visibility",n.t(null,void 0,i(900727))),M=n.t(null,void 0,i(705682)),$=n.t(null,void 0,i(571571)),W=n.t(null,void 0,i(621315)),B=n.t(null,void 0,i(691889)),R=n.t(null,void 0,i(265448)),I=n.t(null,void 0,i(983301)),z=n.t(null,void 0,i(264848)),N=n.t(null,void 0,i(258375)),E=n.t(null,void 0,i(497273));function U(e,t,i,n,r,l,s,c,d){return(0,o.createLinePropertyDefinition)({checked:(0,o.convertToDefinitionProperty)(e,new a.StudyPlotVisibleProperty(t.display),i.format({title:d})),color:(0,o.getColorDefinitionProperty)(e,t.color,t.transparency??null,n.format({title:d})),width:(0,o.convertToDefinitionProperty)(e,t.linewidth,r.format({title:d}))},{id:`${c}${s}`,title:l})}class O extends l.StudyLineDataSourceDefinitionsViewModel{constructor(e,t){super(e,t)}_stylePropertyDefinitions(){const e=this._source.properties().childs(),t=this._source.name(),i=(0,
s.removeSpaces)(t),n=new r.TranslatedString(t,this._source.translatedType()),l=e.styles.childs().VWAP.childs(),a=[(0,o.createLinePropertyDefinition)({color:(0,o.getColorDefinitionProperty)(this._propertyApplier,l.color,l.transparency??null,c.format({title:n})),width:(0,o.convertToDefinitionProperty)(this._propertyApplier,l.linewidth,d.format({title:n}))},{id:`${i}VWAPLine`,title:M})],O=this._source.metaInfo();if(O.styles?.UpperBand&&O.styles?.LowerBand){const t=e.styles.childs().LowerBand.childs(),r=U(this._propertyApplier,t,p,u,h,$,"LowerBandLine",i,n),o=e.styles.childs().UpperBand.childs(),l=U(this._propertyApplier,o,f,y,g,W,"UpperBandLine",i,n);a.push(r,l)}if(O?.area){const t=e.areaBackground.childs(),r=(0,o.createLinePropertyDefinition)({checked:(0,o.convertToDefinitionProperty)(this._propertyApplier,t.fillBackground,A.format({title:n})),color:(0,o.getColorDefinitionProperty)(this._propertyApplier,t.backgroundColor,t.transparency,k.format({title:n}))},{id:`${i}Background`,title:N});a.push(r)}if(O.styles?.UpperBand_2&&O.styles?.LowerBand_2&&O.styles?.UpperBand_3&&O.styles?.LowerBand_3){const t=e.styles.childs().LowerBand_2.childs(),r=U(this._propertyApplier,t,v,_,P,B,"LowerBand2Line",i,n),o=e.styles.childs().UpperBand_2.childs(),l=U(this._propertyApplier,o,T,D,w,R,"UpperBand2Line",i,n),s=e.styles.childs().LowerBand_3.childs(),c=U(this._propertyApplier,s,m,S,b,I,"LowerBand3Line",i,n),d=e.styles.childs().UpperBand_3.childs(),p=U(this._propertyApplier,d,C,x,L,z,"UpperBand3Line",i,n);a.push(r,l,c,p)}const G=(0,o.createCheckablePropertyDefinition)({checked:(0,o.convertToDefinitionProperty)(this._propertyApplier,e.axisLabelVisible,V.format({title:n}))},{id:`${i}ShowPrice`,title:E});return a.push(G),{definitions:a}}_coordinatesPropertyDefinitions(){return null}}},19224:(e,t,i)=>{i.r(t),i.d(t,{StudyLineDataSourceDefinitionsViewModel:()=>d});var n=i(609838),r=(i(460351),i(627692)),o=i(59668),l=i(633170),s=i(31015),a=i(913909),c=i(871645);class d extends l.LineDataSourceDefinitionsViewModel{constructor(e,t){super(e,t)}_inputsPropertyDefinitions(){return{definitions:[(0,o.createStudyInputsPropertyDefinition)({},{id:"StudyInputs",inputs:new s.MetaInfoHelper(this._source.metaInfo()).getUserEditableInputs(),inputsTabProperty:this._source.properties(),model:this._undoModel,studyMetaInfo:this._source.metaInfo(),source:{isInputsStudy:!0,symbolsResolved:()=>new r.Delegate,resolvedSymbolInfoBySymbol:e=>null}})]}}_coordinatesPropertyDefinitions(){const e=this._source.points(),t=this._source.pointsProperty().childs().points,r=[];return e.forEach(((e,l)=>{const s=t[l].childs();if(!s)return;const d=(0,a.getCoordinateXMetaInfo)(this._propertyApplier,s);r.push((0,o.createCoordinatesPropertyDefinition)({x:d.property},{id:(0,c.removeSpaces)(`${this._source.name()}Point${l}`),title:n.t(null,{context:"linetool point"},i(213616)).format({count:(l+1).toString()}),...d.info}))})),{definitions:r}}}},993200:(e,t,i)=>{i.d(t,{isCustomStudy:()=>r});const n={VbPFixed:!0,PivotPointsStandard:!0,VbPVisible:!0,VbPAnchored:!0};function r(e){return e in n}
},31015:(e,t,i)=>{i.d(t,{MetaInfoHelper:()=>u});var n=i(650151),r=i(671945),o=i(912133),l=i(485834),s=i(144421),a=i(746399);function c(e){return!e.groupId&&!e.isHidden&&e.id!==a.RangeDependentStudyInputNames.FirstBar&&e.id!==a.RangeDependentStudyInputNames.LastBar}var d=i(993200);const p=(0,r.getLogger)("Platform.GUI.PropertyDialog.Indicators.MetaInfo");class u{constructor(e){this._metaInfo=e}hasUserEditableInputs(){return this._metaInfo.inputs.some(c)}getUserEditableInputs(){return this._metaInfo.inputs.filter(c)}hasUserEditableProperties(){return o.StudyMetaInfo.isScriptStrategy(this._metaInfo)}hasUserEditableStyles(){const e=this._metaInfo;return e.plots.length>0||void 0!==e.bands||void 0!==e.filledAreas||(0,d.isCustomStudy)(e.shortId)||o.StudyMetaInfo.isScriptStrategy(this._metaInfo)||Object.values(e.graphics).some((e=>void 0!==e))}getUserEditablePlots(){const e=new Set,t=this._metaInfo;return t.plots.filter((i=>{if((0,l.isColorerPlot)(i)||(0,l.isTextColorerPlot)(i)||(0,l.isDataOffsetPlot)(i)||(0,l.isOhlcColorerPlot)(i)||(0,l.isAlertConditionPlot)(i)||(0,l.isDataPlot)(i))return!1;if((0,l.isOhlcPlot)(i)){const r=i.target;if(e.has(r))return!1;e.add(r);const o=(0,n.ensureDefined)(t.ohlcPlots);return!(0,n.ensureDefined)(o[r]).isHidden}{const e=t.styles?t.styles[i.id]:void 0;return void 0===e||!e.isHidden}}))}hasUserEditableOptions(){return this.hasUserEditableInputs()||this.hasUserEditableProperties()||this.hasUserEditableStyles()}getStrategyProperties(){const e=this._metaInfo,t=e.inputs.filter(f),i={...h};for(const n of t){const t=n.internalID;i[t]=n,h.hasOwnProperty(t)||p.logWarn(`Unknown strategy input internal id ${t} in ${e.fullId}`)}return(0,s.clone)(i)}}const h={currency:void 0,backtest_fill_limits_assumption:void 0,calc_on_every_tick:void 0,calc_on_order_fills:void 0,commission_value:void 0,commission_type:void 0,initial_capital:void 0,pyramiding:void 0,slippage:void 0,default_qty_type:void 0,default_qty_value:void 0,margin_long:void 0,margin_short:void 0,use_bar_magnifier:void 0,process_orders_on_close:void 0,fill_orders_on_standard_ohlc:void 0};function f(e){return"strategy_props"===e.groupId}},584050:(e,t,i)=>{i.d(t,{createPropertiesObject:()=>s});var n=i(144421),r=i(676668);function o(e,t,i){for(const r of Object.keys(e.levels??{}))if(e.levels[r]&&(0,n.isSameType)(e.levels[r],t.typecheck())){let n=t.tpl();i.names.forEach(((i,o)=>{n=t.fill(""+o,i,e.levels[r],n)})),e.levels[r]=n}return e}class l extends r.LevelsProperty{constructor(e,t,i){super({defaultName:e,state:i,map:{names:["width","color","visible"]},levelsIterator:o,theme:t})}}function s(e,t,i){return new l(e,t,i)}},157890:(e,t,i)=>{i.r(t),i.d(t,{LineToolGannComplex:()=>u});var n,r=i(610555),o=i(650151),l=i(110895),s=i(695698),a=i(269881),c=i(584050),d=i(538239),p=i(115145);!function(e){e[e.ScaleRatioStep=1e-7]="ScaleRatioStep",e[e.ScaleRatioPrecision=7]="ScaleRatioPrecision",e.ScaleRatioInitialValue=""}(n||(n={}));class u extends s.LineDataSource{constructor(e,t,n,r){super(e,t??u.createProperties(e.backgroundTheme().spawnOwnership()),n,r),
this.version=2,this._scaleRatioFormatter=new l.LimitedPrecisionNumericFormatter(7),this.version=2,Promise.all([i.e(6290),i.e(2735),i.e(789),i.e(1583)]).then(i.bind(i,596930)).then((({GannComplexPaneView:e})=>{this._setPaneViews([new e(this,this.model())])}));const o=this.properties();this._adjustScaleRatio(o),o.subscribe(this,this._adjustScaleRatio),o.childs().scaleRatio.subscribe(this,this._correctFirstPoint),this._syncStateExclusions.push("scaleRatio"),o.onRestoreFactoryDefaults().subscribe(this,this._handleRestoringFactoryDefaults),this._onTemplateApplying.subscribe(this,this._handleTemplateApplying),this._onTemplateApplied.subscribe(this,this._correctFirstPoint)}migrateVersion(e,t,i){1===e&&(this._points.length>=this.pointsCount()?setTimeout((()=>this._migratePoint())):this._timePoint.length>=this.pointsCount()&&this._pointAdded.subscribe(this,this._migratePoint))}destroy(){const e=this.properties();e.unsubscribe(this,this._adjustScaleRatio),e.childs().scaleRatio.unsubscribe(this,this._correctFirstPoint),e.onRestoreFactoryDefaults().unsubscribe(this,this._handleRestoringFactoryDefaults),this._onTemplateApplying.unsubscribe(this,this._handleTemplateApplying),this._onTemplateApplied.unsubscribe(this,this._correctFirstPoint),super.destroy()}pointsCount(){return 2}name(){return"Gann Square"}addPoint(e,t,i){this._points.length>1&&this._points.pop();const n=super.addPoint(e,t,i),r=this.priceScale();return!(0,o.ensureNotNull)(r).isLog()&&n&&this._correctFirstPoint(),n}setPoint(e,t,i){super.setPoint(e,t,i),void 0!==i&&i.shift()?this._correctPoint(e):this._correctScaleRatio()}setLastPoint(e,t){const i=this.priceScale();return(0,o.ensureNotNull)(i).isLog()||(this._points[1]={...e,interval:this._model.mainSeries().interval()},this._correctPoint(1)),super.setLastPoint(e,t)}isReversed(){return this.properties().childs().reverse.value()}levelsCount(){return this.properties().childs().levels.childCount()}levels(){const e=[],t=this.properties().childs(),i=t.levels.childCount();for(let n=0;n<i;n++){const i=t.levels.childs()[n].childs();e.push({index:n,visible:i.visible.value(),color:i.color.value(),width:i.width.value()})}return e}fanLinesCount(){return this.properties().childs().fanlines.childCount()}fanLines(){const e=[],t=this.properties().childs(),i=t.fanlines.childCount();for(let n=0;n<i;n++){const i=t.fanlines.childs()[n].childs();e.push({index:n,visible:i.visible.value(),x:i.x.value(),y:i.y.value(),color:i.color.value(),width:i.width.value()})}return e}arcsCount(){return this.properties().childs().arcs.childCount()}arcs(){const e=[],t=this.properties().childs(),i=t.arcs.childCount();for(let n=0;n<i;n++){const i=t.arcs.childs()[n].childs();e.push({index:n,visible:i.visible.value(),x:i.x.value(),y:i.y.value(),color:i.color.value(),width:i.width.value()})}return e}arcsBackgroundTransparency(){return this.properties().childs().arcsBackground.childs().transparency.value()}isArcsBackgroundFilled(){return this.properties().childs().arcsBackground.childs().fillBackground.value()}isLabelsVisible(){
return this.properties().childs().showLabels.value()}getLabelsStyle(){const e=this.properties().childs(),{fontSize:t,bold:i,italic:n}=e.labelsStyle.childs(),r=e.levels.childCount();return{textColor:e.levels.childs()[r-1].childs().color.value(),font:p.CHART_FONT_FAMILY,fontSize:t.value(),bold:i.value(),italic:n.value()}}getScaleRatioStep(){return 1e-7}getScaleRatioFormatter(){return this._scaleRatioFormatter}getPriceDiff(){const e=this.points();if(e.length<2)return null;const[t,i]=e;return i.price-t.price}getIndexDiff(){const e=this.points();if(e.length<2)return null;const[t,i]=e;return i.index-t.index}getScaleRatio(){const e=this.getPriceDiff(),t=this.getIndexDiff();return null!==e&&null!==t&&0!==t?Math.abs(e/t):null}static createProperties(e,t){const i=(0,c.createPropertiesObject)("linetoolganncomplex",e,t);return this._configureProperties(i),i}_getPropertyDefinitionsViewModelClass(){return Promise.all([i.e(3198),i.e(2881),i.e(3007),i.e(2495),i.e(8537)]).then(i.bind(i,568435)).then((e=>e.GannComplexAndFixedDefinitionsViewModel))}static _configureProperties(e){super._configureProperties(e),e.addExcludedKey("scaleRatio",1);const t=[],i=[],n=e.childs();{const e=n.levels.childCount();for(let r=0;r<e;r++){const e=n.levels.childs()[r].childs();t.push(e.width),i.push(e.color)}}{const e=n.fanlines.childCount();for(let r=0;r<e;r++){const e=n.fanlines.childs()[r].childs();t.push(e.width),i.push(e.color)}}{const e=n.arcs.childCount();for(let r=0;r<e;r++){const e=n.arcs.childs()[r].childs();t.push(e.width),i.push(e.color)}}e.addChild("linesColors",new d.LineToolColorsProperty(i)),e.addChild("linesWidths",new d.LineToolWidthsProperty(t))}_correctScaleRatio(){const e=this.properties().childs(),t=this.getScaleRatio();e.scaleRatio.setValue(t)}_getAdjustedScaleRatio(){const e=this.model().mainSeries().priceScale(),t=this.model().timeScale();return(0,a.scaleRatio)(t,e)}_adjustScaleRatio(e){const t=e.scaleRatio.value();""!==t&&null!==t||e.scaleRatio.setValue(this._getAdjustedScaleRatio())}_correctPoint(e){if(this._points.length<2)return;const t=this.getIndexDiff();if(null===t)return;const i=this.properties().childs().scaleRatio.value();if(null!==i){const n=this._points[e],r=0===e?this._points[1]:this._points[0],o=n.price-r.price>0,l=n.index-r.index>0;let s=o&&!l||!o&&l?-1:1;0===e&&(s=-s),n.price=r.price+s*t*i,this._pointChanged.fire(e)}this._normalizePoints()}_correctFirstPoint(){this._correctPoint(this.isReversed()?0:1)}_handleRestoringFactoryDefaults(){this.properties().childs().scaleRatio.setValue(this._getAdjustedScaleRatio())}_handleTemplateApplying(e){""===e.scaleRatio&&(e.scaleRatio=this._getAdjustedScaleRatio())}_migratePoint(){if(this.points().length<this.pointsCount())return;const e=this._getScreenPoints();if(null===e)return;const t=(0,o.ensureNotNull)(this.screenPointToPoint(e[1]));this.setPoint(1,t),this._pointAdded.unsubscribe(this,this._migratePoint)}_getScreenPoints(){const e=this._calcAngle();if(null===e)return null;let[t,i]=this.points();this.isReversed()&&([t,i]=[i,t]);const n=(0,
o.ensureNotNull)(this.pointToScreenPoint(t)),l=(0,o.ensureNotNull)(this.pointToScreenPoint(i)),s=Math.sqrt(Math.pow(n.x-l.x,2)+Math.pow(n.y-l.y,2)),a=new r.Point(Math.cos(e),-Math.sin(e)),c=a.normalized(),d=c.x<0?-1:1,p=c.y<0?-1:1;return[n.addScaled(a,s),n.add(new r.Point(5*s*d,5*s*p))]}_calcAngle(){const[e,t]=this.points(),i=(0,o.ensureNotNull)(this.pointToScreenPoint(e));let n=(0,o.ensureNotNull)(this.pointToScreenPoint(t)).subtract(i);if(n.length()>0){n=n.normalized();let e=Math.acos(n.x);return n.y>0&&(e=-e),e}return null}}},464308:(e,t,i)=>{i.r(t),i.d(t,{LineToolImage:()=>M,OriginPoints:()=>x,buildAbsoluteUserImageUrl:()=>k});var n=i(650151),r=i(610555),o=i(671945),l=i(963632),s=i(262955),a=i(894382),c=i(695698),d=i(587060),p=i(748838),u=i(32133),h=i(351988),f=i(886227),y=i(609838),g=i(601227),v=i(180185),_=i(534934);const P=y.t(null,void 0,i(815402));var T=i(210118),D=i(363515);async function w(e,t){return async function(e){const[t]=await Promise.all([Promise.all([i.e(1874),i.e(8185),i.e(5371),i.e(8883),i.e(2937),i.e(5563),i.e(2647),i.e(2537),i.e(7833),i.e(9487),i.e(8220),i.e(6043),i.e(4765),i.e(2227),i.e(2550),i.e(4579),i.e(7038)]).then(i.bind(i,14864))]);return t.renderImageDialog(e)}({onConfirm:e,onClose:t})}let m=null;function S(e){if("LineToolImage"!==e)return m?.then((e=>e())),void(m=null);(0,f.runOrSigninWithFeature)((()=>{const e="LineToolImage";D.tool.setValue(e),(0,h.trackDrawingToolSelected)(e,"Left panel"),m=w(b,(()=>{m?.then((e=>e())),m=null,D.tool.value()===e&&(0,D.resetToCursor)(!0)})),(0,u.trackEvent)("Image","Open image dialog")}),{feature:"drawings",source:"Change drawing tool state"})}function b(e){const t=(0,T.chartWidgetCollectionService)();if(null===t)return;const r=!Boolean(p.getBool("hint.pasteImage")),o=t.activeChartWidget.value();var l,s;o.model().pasteImageAsLineTool(e.url,e.blobUrl,(0,n.ensureNotNull)(o.model().model().paneForSource(o.model().mainSeries())),e.transparency),r&&(l=t.getContainer(),s="hint.pasteImage",_.enabled("popup_hints")&&!g.CheckMobile.any()&&Promise.all([i.e(6195),i.e(628),i.e(2227),i.e(6166)]).then(i.bind(i,593387)).then((e=>{const t=new e.ChartEventHintRenderer(l),i=P.format({shortcut:(0,v.humanReadableHash)(v.Modifiers.Mod+86)});let n=null;t.show(i,(()=>{null!==n&&(clearTimeout(n),n=null,p.setValue(s,!0,{forceFlush:!0}))})),n=setTimeout((()=>{n=null,t.hide()}),5e3)})))}const C=(0,o.getLogger)("Chart.LineToolImage");var x;function L(e){return e.toLowerCase().startsWith("blob:")}function A(e){return e.toLowerCase().startsWith("data:")}!function(e){e[e.LeftTopAnchor=0]="LeftTopAnchor",e[e.RightTopAnchor=1]="RightTopAnchor",e[e.LeftBottomAnchor=2]="LeftBottomAnchor",e[e.RightBottomAnchor=3]="RightBottomAnchor",e[e.Center=4]="Center"}(x||(x={}));window.AWS_BBS3_DOMAIN;function k(e){return L(e)||A(e)?e:null}function V(e){return A(e)?e:new URL(e).pathname}class M extends c.LineDataSource{constructor(e,t,n,r){super(e,t||M.createProperties(e.backgroundTheme().spawnOwnership()),n,r),this._hasEditableCoordinates=new l.WatchedValue(!1),this._image=null,this._originPoint=4
;const o=this.properties().childs().url;this._absoluteUserImageUrl=new a.Property(k(this.properties().childs().url.value())??""),this._absoluteUserImageUrl.subscribe(this,(e=>{const t=e.value();if(L(t))return;const i=k(t);null!==i&&o.setValue(V(i))})),o.subscribe(this,(()=>{const e=k(o.value());null!==e&&this._absoluteUserImageUrl.setValue(e)})),this._loadImage(),Promise.all([i.e(6290),i.e(2735),i.e(789),i.e(1583)]).then(i.bind(i,676216)).then((({ImagePaneView:t})=>{this._setPaneViews([new t(this,e)])})),this.properties().childs().url.subscribe(this,(()=>{this._loadImage()}))}absoluteUserImageUrl(){return this._absoluteUserImageUrl}cssWidth(){return this.properties().childs().cssWidth.value()}cssHeight(){return this.properties().childs().cssHeight.value()}angle(){return this.properties().childs().angle.value()}originPoint(){return this._originPoint}dOffsetX(){return this._dOffsetX||0}pointsCount(){return 1}name(){return"Image"}image(){return this._image}setBlobImageUrl(e){this._image}getChangePointForSync(e){return null}pointToScreenPoint({index:e,price:t},i,o){const l=this._model.timeScale(),s=(0,n.ensureNotNull)(i?i.priceScale():this.priceScale()),a=(0,n.ensure)((i??this.ownerSource())?.firstValue()),c=l.indexToCoordinate(e)+(o??0),d=s.priceToCoordinate(t,a);return new r.Point(c,d)}setPoint(e,t,i){if(null===this._image)return;const{width:r,height:o}=this._image,l=(0,n.ensureNotNull)(this.pointToScreenPoint(t)),s=(0,n.ensureNotNull)(this.pointToScreenPoint(this._points[0],void 0,this.dOffsetX())),a=Math.max(Math.abs(s.x-l.x)/r,Math.abs(s.y-l.y)/o),c=Math.round(r*a),d=Math.round(o*a),p=this.properties().childs();p.cssWidth.setValue(c),p.cssHeight.setValue(d),this.propertiesChanged()}startChanging(e,t){super.startChanging(e,t),this._changeOriginPoint(M._oppositePoints[e])}endChanging(e,t){return this._changeOriginPoint(4),super.endChanging(e,t)}getPoint(){return null}syncLineStyleState(){const e=super.syncLineStyleState();return!e.url&&this._blobUrl&&(e.blobUrl=this._blobUrl),e}restoreExternalState(e){const{blobUrl:t,...i}=e;t&&this.setBlobImageUrl(t),super.restoreExternalState(i)}isSavedInChart(){return super.isSavedInChart()&&""!==this.absoluteUserImageUrl().value()}static createProperties(e,t){const i=new s.DefaultProperty({defaultName:"linetoolimage",state:t,theme:e});return this._configureProperties(i),i}async _getPropertyDefinitionsViewModelClass(){return(await Promise.all([i.e(3198),i.e(2881),i.e(3007),i.e(2495),i.e(8537)]).then(i.bind(i,860889))).ImageDefinitionsViewModel}static _configureProperties(e){super._configureProperties(e),e.hasChild("url")||e.addChild("url",new a.Property("")),e.addExcludedKey("url",1),e.addExcludedKey("cssWidth",1),e.addExcludedKey("cssHeight",1),e.addExcludedKey("angle",1)}_loadImage(){const e=this.properties(),t=(0,n.ensureDefined)(e.child("url")).value();t&&this._createImage(t)}_changeOriginPoint(e){
const t=this.originPoint(),i=4===t?M._correctOriginDirections[e]:M._correctOriginDirections[M._oppositePoints[t]],o=this.properties().childs().cssWidth.value()/2,l=this.properties().childs().cssHeight.value()/2,[s]=this._points,a=(0,n.ensureNotNull)(this.pointToScreenPoint(s)),c=new r.Point(a.x+o*i[0],a.y+l*i[1]),d=(0,n.ensureNotNull)(this.screenPointToPoint(c));this._dOffsetX=4===t?c.x-(0,n.ensureNotNull)(this.pointToScreenPoint(d)).x:void 0,s.index=d.index,s.price=d.price,this._originPoint=e}_createImage(e){const t=L(e),i=k(e);if(null===i)return void C.logWarn(`Invalid image URL: ${e}`);if(i===this._image?.src)return;const r=document.createElement("img");r.crossOrigin="anonymous",r.src=i,r.addEventListener("load",(()=>{this._image=r;const e=this._model,o=this.properties().childs();if(!t){const e=V(i);o.url.setValue(e),this._blobUrl=void 0}if(o.cssWidth.value()&&o.cssHeight.value())return void this._model.updateSource(this);const l=e.timeScale().width()/4,s=(0,n.ensureNotNull)(this.priceScale()).height()/4,a=r.naturalWidth,c=r.naturalHeight,p=Math.min(1,l/a),u=Math.min(1,s/c),h=Math.min(p,u),f=Math.round(h*a),y=Math.round(h*c);o.cssWidth.setValue(f),o.cssHeight.setValue(y),this.updateAllViews((0,d.sourceChangeEvent)(this.id())),this._model.updateSource(this)})),r.addEventListener("error",(()=>{this.model().removeSource(this)}))}}M._correctOriginDirections=[[-1,-1],[1,-1],[-1,1],[1,1],[0,0]],M._oppositePoints=[3,2,1,0,4],(0,D.runOnDrawingStateReady)((()=>{D.tool.subscribe(S)}))},515742:(e,t,i)=>{var n;i.d(t,{RiskDisplayMode:()=>n}),function(e){e.Percentage="percents",e.Money="money"}(n||(n={}))},258895:(e,t,i)=>{i.d(t,{StudyPlotVisibleProperty:()=>o});var n=i(989233),r=i(799452);class o extends r.PropertyBase{constructor(e){super(),this._displayProperty=e,this._displayProperty.subscribe(this,this._displayPropertyValueChanged)}destroy(){this._displayProperty.unsubscribe(this,this._displayPropertyValueChanged),this._listeners.destroy()}value(){return 0!==this._displayProperty.value()}setValue(e,t){this._displayProperty.setValue(e?15:0)}setValueSilently(e){this._displayProperty.setValueSilently(e?15:0)}storeStateIfUndefined(){return!1}weakReference(){return(0,n.weakReference)(this)}ownership(){return(0,n.ownership)(this)}_displayPropertyValueChanged(){this.fireChanged()}}}}]);