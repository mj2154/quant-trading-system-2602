"use strict";(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[5032],{901146:(e,i,t)=>{t.d(i,{convertToInt:()=>r,floor:()=>n,limitedPrecision:()=>l});var o=t(110895);function n(e){return Math.floor(e)}function r(e){return parseInt(String(e))}function l(e){const i=new o.LimitedPrecisionNumericFormatter(e,!0);return e=>{if(null===e)return e;const t=i.parse(i.format(e));return t.res?t.value:null}}},375435:(e,i,t)=>{t.d(i,{LineStylePropertyDefinitionsMode:()=>p,lineStylePropertyDefinitions:()=>h});var o=t(609838),n=t(754617),r=t(59668),l=t(779741);const s=new n.TranslatedString("change line price source",o.t(null,void 0,t(741837))),a=new n.TranslatedString("change line color",o.t(null,void 0,t(888640))),c=new n.TranslatedString("change line width",o.t(null,void 0,t(948339))),d=new n.TranslatedString("change line style",o.t(null,void 0,t(728818))),u=o.t(null,void 0,t(903554));var p;function h(e,i,t,o,n){const h=(0,l.createPriceSourceDefinition)(e,i,t,o,"SymbolLinePriceSource",s);let y;return y=n===p.Simple?(0,r.createLinePropertyDefinition)({color:i.color,width:i.linewidth,style:i.linestyle},{id:`${o}SymbolLineStyle`,title:u}):(0,r.createColorPropertyDefinition)({color:(0,r.getColorDefinitionProperty)(e,i.color,null,a),gradientColor1:i.gradientStartColor&&(0,r.getColorDefinitionProperty)(e,i.gradientStartColor,null,a),gradientColor2:i.gradientEndColor&&(0,r.getColorDefinitionProperty)(e,i.gradientEndColor,null,a),type:i.colorType&&(0,r.convertToDefinitionProperty)(e,i.colorType,a),width:(0,r.convertToDefinitionProperty)(e,i.linewidth,c),style:(0,r.convertToDefinitionProperty)(e,i.linestyle,d)},{id:`${o}SymbolLineStyle`,title:u}),[h,y]}!function(e){e[e.Gradient=0]="Gradient",e[e.Simple=1]="Simple"}(p||(p={}))},779741:(e,i,t)=>{t.d(i,{basePriceSources:()=>u,createPriceSourceDefinition:()=>p});var o=t(609838),n=t(547838),r=t(963632),l=t(59668),s=t(463270),a=t(241075),c=t(696486);const d=o.t(null,void 0,t(384684)),u=["open","high","low","close","hl2","hlc3","ohlc4"].map((e=>({title:c.priceSourceTitles[e],value:e,id:`price-source-${e}`})));function p(e,i,t,o,c,u){const p=void 0,h=(0,s.createWVFromGetterAndSubscriptions)((()=>!(0,a.isCloseBasedSymbol)(e.mainSeries().symbolInfo())),[e.mainSeries().dataEvents().symbolResolved(),e.mainSeries().dataEvents().symbolError()]);return(0,n.createOptionsPropertyDefinition)({disabled:p&&(0,l.convertFromReadonlyWVToDefinitionProperty)(p.weakReference()),option:(0,l.convertToDefinitionProperty)(e,i.priceSource,u),visible:(0,l.convertFromReadonlyWVToDefinitionProperty)(h.ownership())},{id:`${o}${c}`,title:d,options:new r.WatchedValue(t)})}},800469:(e,i,t)=>{t.d(i,{getSeriesStylePropertiesDefinitions:()=>xe});var o=t(609838),n=t(754617),r=t(59668),l=(t(613135),t(963632)),s=t(534934),a=t(144421),c=t(901146),d=t(871645),u=t(375435),p=t(779741)
;const h=new n.TranslatedString("change color bars based on previous close",o.t(null,void 0,t(843090))),y=new n.TranslatedString("change HLC bars",o.t(null,void 0,t(427068))),f=new n.TranslatedString("change bar up color",o.t(null,void 0,t(33464))),g=new n.TranslatedString("change bar down color",o.t(null,void 0,t(459622))),S=new n.TranslatedString("change thin bars",o.t(null,void 0,t(760834))),v=new n.TranslatedString("change area price source",o.t(null,void 0,t(404640))),P=new n.TranslatedString("change area line color",o.t(null,void 0,t(429605))),b=new n.TranslatedString("change area line visibility",o.t(null,void 0,t(227059))),w=new n.TranslatedString("change area line width",o.t(null,void 0,t(249965))),m=new n.TranslatedString("change area line style",o.t(null,void 0,t(856864))),T=new n.TranslatedString("change area fill color",o.t(null,void 0,t(486866))),D=new n.TranslatedString("change baseline price source",o.t(null,void 0,t(868609))),C=new n.TranslatedString("change baseline top line color",o.t(null,void 0,t(669044))),_=new n.TranslatedString("change baseline top line width",o.t(null,void 0,t(268197))),$=new n.TranslatedString("change baseline top line style",o.t(null,void 0,t(4425))),k=new n.TranslatedString("change baseline bottom line color",o.t(null,void 0,t(171785))),M=new n.TranslatedString("change baseline bottom line width",o.t(null,void 0,t(756175))),W=new n.TranslatedString("change baseline bottom line style",o.t(null,void 0,t(285684))),L=new n.TranslatedString("change baseline fill top area color",o.t(null,void 0,t(592873))),V=new n.TranslatedString("change baseline fill bottom area color",o.t(null,void 0,t(997216))),I=new n.TranslatedString("change base level",o.t(null,void 0,t(942190))),B=new n.TranslatedString("change high-low body visibility",o.t(null,void 0,t(873021))),O=new n.TranslatedString("change high-low body color",o.t(null,void 0,t(206026))),E=new n.TranslatedString("change high-low borders visibility",o.t(null,void 0,t(615801))),x=new n.TranslatedString("change high-low border color",o.t(null,void 0,t(746844))),A=new n.TranslatedString("change high-low labels visibility",o.t(null,void 0,t(272399))),F=new n.TranslatedString("change high-low labels color",o.t(null,void 0,t(356961))),j=(new n.TranslatedString("change renko wick visibility",o.t(null,void 0,t(79604))),new n.TranslatedString("change renko wick up color",o.t(null,void 0,t(692277))),new n.TranslatedString("change renko wick down color",o.t(null,void 0,t(675487))),new n.TranslatedString("change the display of real prices on price scale (instead of Heiken-Ashi price)",o.t(null,void 0,t(816660))),new n.TranslatedString("change range thin bars",o.t(null,void 0,t(565821))),new n.TranslatedString("change range bars style",o.t(null,void 0,t(516241))),
new n.TranslatedString("change {candleType} body visibility",o.t(null,void 0,t(460608)))),N=new n.TranslatedString("change {candleType} up color",o.t(null,void 0,t(736697))),U=new n.TranslatedString("change {candleType} down color",o.t(null,void 0,t(564571))),H=new n.TranslatedString("change {candleType} border visibility",o.t(null,void 0,t(311114))),R=new n.TranslatedString("change {candleType} up border color",o.t(null,void 0,t(17214))),G=new n.TranslatedString("change {candleType} down border color",o.t(null,void 0,t(20291))),z=new n.TranslatedString("change {candleType} wick visibility",o.t(null,void 0,t(794750))),J=new n.TranslatedString("change {candleType} wick up color",o.t(null,void 0,t(397546))),q=new n.TranslatedString("change {candleType} wick down color",o.t(null,void 0,t(448091))),K=new n.TranslatedString("change {chartType} up color",o.t(null,void 0,t(506970))),Q=new n.TranslatedString("change {chartType} down color",o.t(null,void 0,t(405012))),X=new n.TranslatedString("change {chartType} projection bar up color",o.t(null,void 0,t(385032))),Y=new n.TranslatedString("change {chartType} projection bar down color",o.t(null,void 0,t(172545))),Z=new n.TranslatedString("change {chartType} border bar up color",o.t(null,void 0,t(428394))),ee=new n.TranslatedString("change {chartType} border bar down color",o.t(null,void 0,t(423053))),ie=new n.TranslatedString("change {chartType} projection border bar up color",o.t(null,void 0,t(742826))),te=new n.TranslatedString("change {chartType} projection border bar up color",o.t(null,void 0,t(742826))),oe=new n.TranslatedString("change column up color",o.t(null,void 0,t(688324))),ne=new n.TranslatedString("change column down color",o.t(null,void 0,t(893890))),re=new n.TranslatedString("change column price source",o.t(null,void 0,t(604727))),le=new n.TranslatedString("change HLC bars color",o.t(null,void 0,t(921201))),se=o.t(null,void 0,t(23111)),ae=o.t(null,void 0,t(800886)),ce=o.t(null,void 0,t(523091)),de=o.t(null,void 0,t(823743)),ue=o.t(null,void 0,t(620215)),pe=o.t(null,void 0,t(874406)),he=o.t(null,void 0,t(600333)),ye=o.t(null,void 0,t(632163)),fe=o.t(null,void 0,t(903554)),ge=o.t(null,void 0,t(889349)),Se=o.t(null,void 0,t(203159)),ve=o.t(null,void 0,t(741129)),Pe=o.t(null,void 0,t(461112)),be=o.t(null,void 0,t(373185)),we=o.t(null,void 0,t(536957)),me=o.t(null,void 0,t(817611)),Te=(o.t(null,void 0,t(177430)),o.t(null,void 0,t(373466))),De=o.t(null,void 0,t(388367)),Ce=(o.t(null,void 0,t(206160)),o.t(null,void 0,t(928975))),_e=o.t(null,void 0,t(874406)),$e=o.t(null,void 0,t(600333)),ke=o.t(null,void 0,t(5119)),Me=o.t(null,void 0,t(756359)),We=o.t(null,void 0,t(884831)),Le=o.t(null,void 0,t(134579)),Ve=(o.t(null,void 0,t(492516)),o.t(null,void 0,t(527377)),o.t(null,void 0,t(745054)),o.t(null,void 0,t(527377)));function Ie(e,i,t,o){return(0,r.createCheckablePropertyDefinition)({checked:(0,r.convertToDefinitionProperty)(e,i.barColorsOnPrevClose,h)},{id:`${t}${o}`,title:se})}function Be(e,i,t,o){const n=(0,d.removeSpaces)(t.originalText());return[(0,
r.createTwoColorsPropertyDefinition)({checked:(0,r.convertToDefinitionProperty)(e,i.drawBody,j.format({candleType:t})),color1:(0,r.getColorDefinitionProperty)(e,i.upColor,null,N.format({candleType:t})),color2:(0,r.getColorDefinitionProperty)(e,i.downColor,null,U.format({candleType:t}))},{id:`${o}Symbol${n}CandlesColor`,title:pe}),(0,r.createTwoColorsPropertyDefinition)({checked:(0,r.convertToDefinitionProperty)(e,i.drawBorder,H.format({candleType:t})),color1:(0,r.getColorDefinitionProperty)(e,i.borderUpColor,null,R.format({candleType:t})),color2:(0,r.getColorDefinitionProperty)(e,i.borderDownColor,null,G.format({candleType:t}))},{id:`${o}Symbol${n}BordersColor`,title:he}),(0,r.createTwoColorsPropertyDefinition)({checked:(0,r.convertToDefinitionProperty)(e,i.drawWick,z.format({candleType:t})),color1:(0,r.getColorDefinitionProperty)(e,i.wickUpColor,null,J.format({candleType:t})),color2:(0,r.getColorDefinitionProperty)(e,i.wickDownColor,null,q.format({candleType:t}))},{id:`${o}Symbol${n}WickColors`,title:ye})]}function Oe(e,i,t,o){const n=[];{const l=(0,d.removeSpaces)(t.originalText()),s=(0,r.createColorPropertyDefinition)({color:(0,r.getColorDefinitionProperty)(e,i.upColor,null,K.format({chartType:t}))},{id:`${o}Symbol${l}UpBars`,title:we}),a=(0,r.createColorPropertyDefinition)({color:(0,r.getColorDefinitionProperty)(e,i.downColor,null,Q.format({chartType:t}))},{id:`${o}Symbol${l}DownBars`,title:me}),c=(0,r.createColorPropertyDefinition)({color:(0,r.getColorDefinitionProperty)(e,i.upColorProjection,null,X.format({chartType:t}))},{id:`${o}Symbol${l}ProjectionUpBars`,title:Te}),u=(0,r.createColorPropertyDefinition)({color:(0,r.getColorDefinitionProperty)(e,i.downColorProjection,null,Y.format({chartType:t}))},{id:`${o}Symbol${l}ProjectionDownBars`,title:De});n.push(s,a,c,u)}return n}function Ee(e,i,t,o){const n=[];{const l=(0,d.removeSpaces)(t.originalText()),s=(0,r.createTwoColorsPropertyDefinition)({color1:(0,r.getColorDefinitionProperty)(e,i.upColor,null,K.format({chartType:t})),color2:(0,r.getColorDefinitionProperty)(e,i.borderUpColor,null,Z.format({chartType:t}))},{id:`${o}Symbol${l}UpBars`,title:we}),a=(0,r.createTwoColorsPropertyDefinition)({color1:(0,r.getColorDefinitionProperty)(e,i.downColor,null,Q.format({chartType:t})),color2:(0,r.getColorDefinitionProperty)(e,i.borderDownColor,null,ee.format({chartType:t}))},{id:`${o}Symbol${l}DownBars`,title:me}),c=(0,r.createTwoColorsPropertyDefinition)({color1:(0,r.getColorDefinitionProperty)(e,i.upColorProjection,null,X.format({chartType:t})),color2:(0,r.getColorDefinitionProperty)(e,i.borderUpColorProjection,null,ie.format({chartType:t}))},{id:`${o}Symbol${l}ProjectionUpBars`,title:Te}),u=(0,r.createTwoColorsPropertyDefinition)({color1:(0,r.getColorDefinitionProperty)(e,i.downColorProjection,null,Y.format({chartType:t})),color2:(0,r.getColorDefinitionProperty)(e,i.borderDownColorProjection,null,te.format({chartType:t}))},{id:`${o}Symbol${l}ProjectionDownBars`,title:De});n.push(s,a,c,u)}return n}function xe(e,i,d,h,j,N){switch(d){case 0:return function(e,i,t){
return[Ie(e,i,t,"SymbolBarStyleBarColorsOnPrevClose"),(0,r.createCheckablePropertyDefinition)({checked:(0,r.convertToDefinitionProperty)(e,i.dontDrawOpen,y)},{id:`${t}SymbolDontDrawOpen`,title:ae}),(0,r.createColorPropertyDefinition)({color:(0,r.getColorDefinitionProperty)(e,i.upColor,null,f)},{id:`${t}SymbolUpColor`,title:ce}),(0,r.createColorPropertyDefinition)({color:(0,r.getColorDefinitionProperty)(e,i.downColor,null,g)},{id:`${t}SymbolDownColor`,title:de}),(0,r.createCheckablePropertyDefinition)({checked:(0,r.convertToDefinitionProperty)(e,i.thinBars,S)},{id:`${t}SymbolBarThinBars`,title:ue})].filter(a.isExistent)}(e,i.barStyle.childs(),j);case 1:case 19:return function(e,i,r){return[Ie(e,i,r,"SymbolCandleStyleBarColorsOnPrevClose"),...Be(e,i,new n.TranslatedString("candle",o.t(null,void 0,t(821105))),r)].filter(a.isExistent)}(e,1===d?i.candleStyle.childs():i.volCandlesStyle.childs(),j);case 2:const s=i.lineStyle.childs();return(0,u.lineStylePropertyDefinitions)(e,s,h.seriesPriceSources,j,N);case 14:const B=i.lineWithMarkersStyle.childs();return(0,u.lineStylePropertyDefinitions)(e,B,h.seriesPriceSources,j,N);case 15:const O=i.steplineStyle.childs();return(0,u.lineStylePropertyDefinitions)(e,O,h.seriesPriceSources,j,N);case 3:return function(e,i,t,o){return[(0,p.createPriceSourceDefinition)(e,i,t,o,"SymbolAreaPriceSource",v),(0,r.createLinePropertyDefinition)({color:(0,r.getColorDefinitionProperty)(e,i.linecolor,null,P),width:(0,r.convertToDefinitionProperty)(e,i.linewidth,w),style:(0,r.convertToDefinitionProperty)(e,i.linestyle,m)},{id:`${o}SymbolAreaLineStyle`,title:fe}),(0,r.createTwoColorsPropertyDefinition)({color1:(0,r.getColorDefinitionProperty)(e,i.color1,i.transparency,T),color2:(0,r.getColorDefinitionProperty)(e,i.color2,i.transparency,T)},{id:`${o}SymbolAreaFills`,title:ve})]}(e,i.areaStyle.childs(),h.seriesPriceSources,j);case 16:return function(e,i,t,o){return[(0,r.createLinePropertyDefinition)({checked:(0,r.convertToDefinitionProperty)(e,i.highLineVisible,b),color:(0,r.getColorDefinitionProperty)(e,i.highLineColor,null,P),width:(0,r.convertToDefinitionProperty)(e,i.highLineWidth,w)},{id:`${o}SymbolHLCAreaHighLineStyle`,title:Me}),(0,r.createLinePropertyDefinition)({checked:(0,r.convertToDefinitionProperty)(e,i.lowLineVisible,b),color:(0,r.getColorDefinitionProperty)(e,i.lowLineColor,null,P),width:(0,r.convertToDefinitionProperty)(e,i.lowLineWidth,w)},{id:`${o}SymbolHLCAreaLowLineStyle`,title:Le}),(0,r.createLinePropertyDefinition)({color:(0,r.getColorDefinitionProperty)(e,i.closeLineColor,null,P),width:(0,r.convertToDefinitionProperty)(e,i.closeLineWidth,w)},{id:`${o}SymbolHLCAreaCloseLineStyle`,title:We}),(0,r.createTwoColorsPropertyDefinition)({color1:(0,r.getColorDefinitionProperty)(e,i.highCloseFillColor,null,T),color2:(0,r.getColorDefinitionProperty)(e,i.closeLowFillColor,null,T)},{id:`${o}SymbolHLCAreaFills`,title:ve})]}(e,i.hlcAreaStyle.childs(),h.seriesPriceSources,j);case 9:return Be(e,i.hollowCandleStyle.childs(),new n.TranslatedString("hollow candles",o.t(null,void 0,t(292598))),j)
;case 10:return function(e,i,t,o){return[(0,p.createPriceSourceDefinition)(e,i,t,o,"SymbolBaseLinePriceSource",D),(0,r.createLinePropertyDefinition)({color:(0,r.getColorDefinitionProperty)(e,i.topLineColor,null,C),width:(0,r.convertToDefinitionProperty)(e,i.topLineWidth,_),style:(0,r.convertToDefinitionProperty)(e,i.topLineStyle,$)},{id:`${o}SymbolBaseLineTopLine`,title:ge}),(0,r.createLinePropertyDefinition)({color:(0,r.getColorDefinitionProperty)(e,i.bottomLineColor,null,k),width:(0,r.convertToDefinitionProperty)(e,i.bottomLineWidth,M),style:(0,r.convertToDefinitionProperty)(e,i.bottomLineStyle,W)},{id:`${o}SymbolBaseLineBottomLine`,title:Se}),(0,r.createTwoColorsPropertyDefinition)({color1:(0,r.getColorDefinitionProperty)(e,i.topFillColor1,null,L),color2:(0,r.getColorDefinitionProperty)(e,i.topFillColor2,null,L)},{id:`${o}SymbolBaseLineTopFills`,title:Pe}),(0,r.createTwoColorsPropertyDefinition)({color1:(0,r.getColorDefinitionProperty)(e,i.bottomFillColor1,null,V),color2:(0,r.getColorDefinitionProperty)(e,i.bottomFillColor2,null,V)},{id:`${o}SymbolBaseLineBottomFills`,title:be}),(0,r.createNumberPropertyDefinition)({value:(0,r.convertToDefinitionProperty)(e,i.baseLevelPercentage,I,[c.floor])},{id:`${o}SymbolBaseLevelPercentage`,title:Ce,type:0,min:new l.WatchedValue(0),max:new l.WatchedValue(100),step:new l.WatchedValue(1),unit:new l.WatchedValue("%")})]}(e,i.baselineStyle.childs(),h.seriesPriceSources,j);case 13:return function(e,i,t,o){return[(0,p.createPriceSourceDefinition)(e,i,t,o,"SymbolColumnPriceSource",re),Ie(e,i,o,"SymbolColumnStyleColumnColorsOnPrevClose"),(0,r.createColorPropertyDefinition)({color:(0,r.getColorDefinitionProperty)(e,i.upColor,null,oe)},{id:`${o}SymbolUpColor`,title:ce}),(0,r.createColorPropertyDefinition)({color:(0,r.getColorDefinitionProperty)(e,i.downColor,null,ne)},{id:`${o}SymbolDownColor`,title:de})].filter(a.isExistent)}(e,i.columnStyle.childs(),h.seriesPriceSources,j);case 21:return function(e,i,t){return[(0,r.createColorPropertyDefinition)({color:(0,r.getColorDefinitionProperty)(e,i.color,null,le)},{id:`${t}SymbolColor`,title:Ve}),(0,r.createCheckablePropertyDefinition)({checked:(0,r.convertToDefinitionProperty)(e,i.thinBars,S)},{id:`${t}SymbolBarThinBars`,title:ue})].filter(a.isExistent)}(e,i.hlcBarsStyle.childs(),j)}if(12===d&&s.enabled("chart_style_hilo")){return function(e,i,t){return[(0,r.createColorPropertyDefinition)({checked:(0,r.convertToDefinitionProperty)(e,i.drawBody,B),color:(0,r.getColorDefinitionProperty)(e,i.color,null,O)},{id:`${t}SymbolBodiesColor`,title:_e}),(0,r.createColorPropertyDefinition)({checked:(0,r.convertToDefinitionProperty)(e,i.showBorders,E),color:(0,r.getColorDefinitionProperty)(e,i.borderColor,null,x)},{id:`${t}SymbolBorderColor`,title:$e}),(0,r.createTextPropertyDefinition)({checked:(0,r.convertToDefinitionProperty)(e,i.showLabels,A),color:(0,r.getColorDefinitionProperty)(e,i.labelColor,null,F)},{id:`${t}SymbolLabels`,title:ke,isEditable:!1,isMultiLine:!1})]}(e,i.hiloStyle.childs(),j)}if(!i.hasOwnProperty("haStyle"))return[]
;if(h.isJapaneseChartsAvailable&&8===d){return function(e,i,r){const l=[];return l.push(Ie(e,i,r,"SymbolHAStyleBarColorsOnPrevClose"),...Be(e,i,new n.TranslatedString("Heikin Ashi",o.t(null,void 0,t(863876))),r)),l}(e,i.haStyle.childs(),j)}if(h.isJapaneseChartsAvailable&&s.enabled("japanese_chart_styles")){if(4===d||5===d||6===d||7===d||8===d)switch(d){case 4:return function(e,i,r){return[...Ee(e,i,new n.TranslatedString("renko",o.t(null,void 0,t(170282))),r)]}(e,i.renkoStyle.childs(),j);case 5:return Oe(e,i.kagiStyle.childs(),new n.TranslatedString("kagi",o.t(null,void 0,t(310073))),j);case 6:return Oe(e,i.pnfStyle.childs(),new n.TranslatedString("point & figure",o.t(null,void 0,t(31562))),j);case 7:return Ee(e,i.pbStyle.childs(),new n.TranslatedString("line break",o.t(null,void 0,t(529152))),j)}0}return[]}},115032:(e,i,t)=>{t.d(i,{SeriesPropertyDefinitionsViewModel:()=>H,seriesPrecisionValues:()=>U});var o=t(650151),n=t(671945),r=t(609838),l=t(754617),s=t(534934),a=t(59668),c=t(637351),d=t(963632),u=t(454119),p=t(241075),h=t(800469),y=t(911942),f=t(901146);const g=new l.TranslatedString("change {inputName} property",r.t(null,void 0,t(466110)));function S(e){return e.map((e=>({value:e,title:(0,y.getTranslatedInputTitle)(e)})))}const v=new Set(["percentageLTP"]);function P(e,i,t,n,r,s,c){const u=[];return t.forEach((t=>{if(!function(e,i){return!e.isHidden&&(void 0===e.visible||function(e,i){if(!e)return!0;const t=e.split("==");return!(t.length<2)&&i[t[0]].value()===t[1]}(e.visible,i))}(t,n))return;const h=t.id;if(!n.hasOwnProperty(h))return;const P=n[h],b=function(e,i){return"style"===e.id?"Box size assignment method":"boxSize"===e.id?"Box size":i.childs().name.value()}(t,r[h]),w=(0,y.getTranslatedInputTitle)(b),m=new l.TranslatedString(b,w);if("options"in t){const i=(0,o.ensure)(t.options);u.push((0,a.createOptionsPropertyDefinition)({option:(0,a.convertToDefinitionProperty)(e,P,g.format({inputName:m}))},{id:`${c}${t.name}`,title:w,options:new d.WatchedValue(S(i))}))}else if("integer"!==t.type){if("float"===t.type){let o;return o=function(e,i){return!((i===(0,p.chartStyleStudyId)(4)||i===(0,p.chartStyleStudyId)(6))&&"boxSize"===e||i===(0,p.chartStyleStudyId)(5)&&"reversalAmount"===e)}(h,i)||null===s.value()?new d.WatchedValue(t.min):s,void u.push((0,a.createNumberPropertyDefinition)({value:(0,a.convertToDefinitionProperty)(e,P,g.format({inputName:m}))},{id:`${c}${t.name}`,title:w,type:1,min:o,max:new d.WatchedValue(t.max),unit:v.has(t.id)?new d.WatchedValue("%"):void 0,defval:t.defval}))}"text"!==t.type?"bool"!==t.type||u.push((0,a.createCheckablePropertyDefinition)({checked:(0,a.convertToDefinitionProperty)(e,P,g.format({inputName:m}))},{id:`${c}${t.name}`,title:w})):u.push((0,a.createTextPropertyDefinition)({text:(0,a.convertToDefinitionProperty)(e,P,g.format({inputName:m}))},{id:`${c}${t.name}`,title:w,isEditable:!0,isMultiLine:!1}))}else u.push((0,a.createNumberPropertyDefinition)({value:(0,a.convertToDefinitionProperty)(e,P,g.format({inputName:m}),[f.floor])},{id:`${c}${t.name}`,title:w,type:0,
min:new d.WatchedValue(t.min),max:new d.WatchedValue(t.max),unit:v.has(t.id)?new d.WatchedValue("%"):void 0,defval:t.defval}))})),u}var b=t(460916),w=t(90461),m=t(780284),T=t(896170),D=t(375435),C=t(779741);const _=(0,n.getLogger)("Chart.Definitions.Series"),$=s.enabled("pre_post_market_sessions"),k=new l.TranslatedString("change decimal places",r.t(null,void 0,t(482063))),M=new l.TranslatedString("change timezone",r.t(null,void 0,t(920137))),W=new l.TranslatedString("toggle inactivity gaps",r.t(null,void 0,t(18917))),L=(new l.TranslatedString("adjust data for dividends",r.t(null,void 0,t(818077))),new l.TranslatedString("use settlement as close on daily interval",r.t(null,void 0,t(992978))),new l.TranslatedString("adjust for contract changes",r.t(null,void 0,t(601433))),new l.TranslatedString("change session",r.t(null,void 0,t(887041)))),V=new l.TranslatedString("change extended hours color",r.t(null,void 0,t(844223))),I=new l.TranslatedString("change pre market color",r.t(null,void 0,t(344371))),B=new l.TranslatedString("change post market color",r.t(null,void 0,t(538730))),O=(new l.TranslatedString("change electronic trading hours",r.t(null,void 0,t(47393))),r.t(null,void 0,t(493020)),r.t(null,void 0,t(194031))),E=(r.t(null,void 0,t(768921)),r.t(null,void 0,t(549545)),r.t(null,void 0,t(188327))),x=(r.t(null,void 0,t(759777)),r.t(null,void 0,t(159766))),A=r.t(null,void 0,t(877073)),F=r.t(null,void 0,t(916564)),j=r.t(null,void 0,t(467036)),N=[{priceScale:2,minMove:1,frac:!0},{priceScale:4,minMove:1,frac:!0},{priceScale:8,minMove:1,frac:!0},{priceScale:16,minMove:1,frac:!0},{priceScale:32,minMove:1,frac:!0},{priceScale:64,minMove:1,frac:!0},{priceScale:128,minMove:1,frac:!0},{priceScale:320,minMove:1,frac:!0}];function U(){const e=[{title:F,value:"default"}],i=function(e=15){const i=[];for(let t=0;t<=e;t++)i.push({priceScale:Math.pow(10,t),minMove:1,frac:!1});return i}();for(let o=0;o<i.length;o++){const n=Math.log10(i[o].priceScale),l=0===n?r.t(null,void 0,t(447326)):r.t(null,{plural:"{value} decimals",count:n,replace:{value:n.toString()}},t(959644));e.push({title:l,value:`${i[o].priceScale},${i[o].minMove},${i[o].frac}`})}for(let i=0;i<N.length;i++)e.push({title:`${N[i].minMove}/${N[i].priceScale}`,value:`${N[i].priceScale},${N[i].minMove},${N[i].frac}`});return e}class H{constructor(e,i,t,o,n,r){this._definitions=null,this._inputsSubscriptions=null,this._isDestroyed=!1,this._propertyPages=null,this._seriesMinTickWV=null,this._sessionIdOptionsWV=new d.WatchedValue([]),this._series=e,this._undoModel=i,this._model=this._undoModel.model(),this._propertyPageId=t,this._propertyPageName=o,this._propertyPageIcon=n,this._timezonePropertyObj=r,this._series.onStyleChanged().subscribe(this,this._updateDefinitions),this._series.properties().childs().rangeStyle.childs().barStyle.subscribe(this,this._updateDefinitions),this._series.dataEvents().symbolResolved().subscribe(this,this._updateSeriesMinTickWV),this._series.dataEvents().symbolResolved().subscribe(this,this._updateSessionIdOptionsWV),this._updateSeriesMinTickWV(),
this._updateSessionIdOptionsWV()}destroy(){null!==this._propertyPages&&this._propertyPages.forEach((e=>{(0,a.destroyDefinitions)(e.definitions.value())})),this._series.onStyleChanged().unsubscribe(this,this._updateDefinitions),this._series.properties().childs().rangeStyle.childs().barStyle.unsubscribeAll(this),this._series.dataEvents().symbolResolved().unsubscribeAll(this),this._unsubscribeInputsUpdate(),this._isDestroyed=!0}propertyPages(){return null===this._propertyPages?this._getDefinitions().then((e=>{if(this._isDestroyed)throw new Error("SeriesPropertyDefinitionsViewModel already destroyed");return null===this._propertyPages&&(this._propertyPages=[{id:this._propertyPageId,title:this._propertyPageName,icon:this._propertyPageIcon,definitions:new d.WatchedValue(e.definitions),visible:e.visible??new d.WatchedValue(!0).readonly()}]),this._propertyPages})):Promise.resolve(this._propertyPages)}_seriesMinTick(){const e=this._series.symbolInfo();return null!==e?e.minmov/e.pricescale:null}_updateSeriesMinTickWV(){null===this._seriesMinTickWV?this._seriesMinTickWV=new d.WatchedValue(this._seriesMinTick()):this._seriesMinTickWV.setValue(this._seriesMinTick())}_updateSessionIdOptionsWV(){if(!$)return;const e=this._series.symbolInfo();if(null===e)return;const i=(e.subsessions||[]).filter((e=>!e.private)).map((e=>({title:(0,T.translateSessionDescription)(e.description),value:e.id})));this._sessionIdOptionsWV.setValue(i)}_updateDefinitions(){null!==this._definitions&&(0,a.destroyDefinitions)(this._definitions.definitions),this._definitions=null,this._createSeriesDefinitions().then((e=>{if(this._isDestroyed)throw new Error("SeriesPropertyDefinitionsViewModel already destroyed");(0,o.ensureNotNull)(this._propertyPages)[0].definitions.setValue(e.definitions)}))}_getDefinitions(){return null===this._definitions?this._createSeriesDefinitions():Promise.resolve(this._definitions)}_unsubscribeInputsUpdate(){null!==this._inputsSubscriptions&&(this._inputsSubscriptions.forEach((e=>{e.unsubscribeAll(this)})),this._inputsSubscriptions=null)}_subscribeInputsUpdate(e,i){this._unsubscribeInputsUpdate();const t=[];e.forEach((e=>{if(void 0!==e.visible){const o=e.visible.split("==");if(2===o.length){const e=i[o[0]];-1===t.indexOf(e)&&(e.subscribe(this,this._updateDefinitions),t.push(e))}}})),t.length>0?this._inputsSubscriptions=t:this._inputsSubscriptions=null}async _createSeriesDefinitions(){const e=this._series.properties().childs(),i=this._series.getInputsProperties(),n=this._series.getInputsInfoProperties(),l=e.style.value(),y=this._series.getStyleShortName(),f=c.chartStylesWithAttachedStudies.includes(l)?null:(0,p.chartStyleStudyId)(l);let g,S=null;if(null!==f){let e;try{e=await(0,u.studyMetaInfoRepository)().findById({type:"java",studyId:f});const t=(0,o.ensureNotNull)(this._seriesMinTickWV);S=P(this._undoModel,e.id,e.inputs,i,n,t,y),this._subscribeInputsUpdate(e.inputs,i)}catch(i){_.logWarn(`Find meta info for create series definitions with error - ${(0,b.errorToString)(i)}`),e=null}
if(this._isDestroyed)throw new Error("SeriesPropertyDefinitionsViewModel already destroyed")}else this._unsubscribeInputsUpdate();if(this._isDestroyed)throw new Error("SeriesPropertyDefinitionsViewModel already destroyed");if(c.chartStylesWithAttachedStudies.includes(l))throw new Error("unexpected chart style");{const i=(0,h.getSeriesStylePropertiesDefinitions)(this._undoModel,e,l,{seriesPriceSources:C.basePriceSources,isJapaneseChartsAvailable:true},"mainSeries",D.LineStylePropertyDefinitionsMode.Gradient);null!==S&&i.push(...S),g=(0,a.createPropertyDefinitionsGeneralGroup)(i,"generalSymbolStylesGroup",(0,p.getTranslatedChartStyleName)(l))}const v=(0,a.createOptionsPropertyDefinition)({option:(0,a.convertToDefinitionProperty)(this._undoModel,e.minTick,k),visible:(0,a.convertFromReadonlyWVToDefinitionProperty)(new d.WatchedValue(!0).ownership())},{id:`${y}SymbolMinTick`,title:x,options:new d.WatchedValue(U())}),w=(0,a.createOptionsPropertyDefinition)({option:(0,a.convertToDefinitionProperty)(this._undoModel,this._timezonePropertyObj.property,M)},{id:`${y}SymbolTimezone`,title:A,options:new d.WatchedValue(this._timezonePropertyObj.values)}),m=[...await this._seriesDataDefinitions(y),v,w];return s.enabled("inactivity_gaps")&&m.push((0,a.createCheckablePropertyDefinition)({checked:(0,a.convertToDefinitionProperty)(this._undoModel,this._undoModel.model().properties().childs().inactivityGaps,W)},{id:`${y}InactivityGap`,title:j})),this._definitions={definitions:[g,(0,a.createPropertyDefinitionsGeneralGroup)(m,"dataModififcationGroup",r.t(null,void 0,t(848225)))]},this._definitions}async _seriesDataDefinitions(e){const i=[];if($){const t=this._series.sessionIdProxyProperty(),o=(0,m.combineWithFilteredUpdate)(((e,i)=>!i&&(0,p.symbolHasSeveralSessions)(this._series.symbolInfo())),((e,i)=>i||!e),this._series.symbolResolvingActive().weakReference(),(0,w.createWVFromProperty)(this._series.isDWMProperty()).ownership()),n=(0,a.createOptionsPropertyDefinition)({option:(0,a.convertToDefinitionProperty)(this._undoModel,t,L),visible:(0,a.convertFromReadonlyWVToDefinitionProperty)(o.ownership())},{id:"sessionId",title:O,options:this._sessionIdOptionsWV});i.push(n);const r=(await this._model.sessions().promise()).graphicsInfo();let l=!1;r.backgrounds&&(l=void 0!==r.backgrounds.outOfSession);const s=await(l?this._createOutOfSessionDefinition(e):this._createPrePostMarketDefinition(e));i.push(s);const c=this._createElectronicSessionDefinition(e);c&&i.push(c)}return i}_createOutOfSessionDefinition(e){const i=this._model.sessions().properties().childs().sessionHighlight.childs().backgrounds.childs().outOfSession.childs();return(0,a.createColorPropertyDefinition)({color:(0,a.getColorDefinitionProperty)(this._undoModel,i.color,i.transparency,V)},{id:`${e}SymbolExtendedHoursColors`,title:E})}_createPrePostMarketDefinition(e){const i=(0,w.createWVFromGetterAndSubscription)((()=>this._series.symbolInfo()),this._series.dataEvents().symbolResolved()),t=(0,m.combineWithFilteredUpdate)(((e,i)=>!e&&!!i&&(0,p.symbolHasPreOrPostMarket)(i)&&!(0,
p.isRegularSessionId)(this._series.sessionIdProxyProperty().value(),i)),((e,i)=>e||!!i),(0,w.createWVFromProperty)(this._series.isDWMProperty()).ownership(),i.ownership()),o=this._model.sessions().properties().childs().sessionHighlight.childs(),n=o.backgrounds.childs().preMarket.childs(),r=o.backgrounds.childs().postMarket.childs();return(0,a.createTwoColorsPropertyDefinition)({color1:(0,a.getColorDefinitionProperty)(this._undoModel,n.color,n.transparency,I),color2:(0,a.getColorDefinitionProperty)(this._undoModel,r.color,r.transparency,B),visible:(0,a.convertFromReadonlyWVToDefinitionProperty)(t.ownership())},{id:`${e}SymbolExtendedHoursColors`,title:E})}_createElectronicSessionDefinition(e){return null}}}}]);