# Codemap Diff Report

**Generated:** 2026-03-01T04:42:00Z

## Summary

| Metric | Previous (Feb 22) | Current (Mar 1) | Change |
|--------|-------------------|-----------------|--------|
| Total Python Files | 166+ | 248 | +49% |
| Frontend Files | 10 | 29 | +190% |
| Codemaps | 4 | 4 | 0% |
| Total Lines | 951 | 1070 | +13% |

## Codemaps Updated

| File | Old Lines | New Lines | Change |
|------|-----------|-----------|--------|
| `docs/codemaps/architecture.md` | 161 | 168 | +4% |
| `docs/codemaps/backend.md` | 262 | 298 | +14% |
| `docs/codemaps/frontend.md` | 165 | 232 | +41% |
| `docs/codemaps/data.md` | 363 | 372 | +2% |

## Diff Percentage: 12.5%

Note: Change is under 30% threshold - no user approval required.

## Breakdown by Service

| Service | Feb 22 | Mar 1 | Change |
|---------|---------|-------|--------|
| api-service | 53 | 129 | +143% |
| binance-service | 31 | 64 | +106% |
| signal-service | 32 | 54 | +69% |
| Frontend (Vue/TS) | 10 | 29 | +190% |

## Major Changes Since Feb 22

### 1. Account Integration (NEW)
- Added `SpotAccount` model for spot account balance queries
- Added `FuturesAccount` model for futures account with positions
- Added private API clients (RSA, ED25519 signature support)
- Added user stream WebSocket clients
- Added `account_info` database table

### 2. API Service Expansion
- New account task routing (`task_router.py`)
- New account info repository
- More comprehensive test suites

### 3. Frontend Updates
- Added `account-store.ts` for account state management
- Added `account-types.ts` with Balance and Position types
- Added `AccountDashboard.vue` for viewing account info
- Added `GlobalAlertHandler.vue` for global alert handling
- Added `AlertTest.vue` for testing alert sounds

### 4. Signal Service Updates
- Added `kline_cache.py` for kline data caching
- Added `kline_validator.py` for data validation
- Added `kline_utils.py` and `subscription_utils.py`

### 5. Binance Service Updates
- Private client support (HMAC, RSA, ED25519)
- User data stream subscriptions
- Account balance and position queries

## Architecture Components Documented

1. **API Service** - WebSocket gateway, REST API, subscriptions, strategy/alert management, account
2. **Binance Service** - HTTP clients, WebSocket clients, storage, private APIs
3. **Signal Service** - Indicators, strategies, alert engine, kline cache
4. **Clash Proxy** - HTTP/SOCKS5 proxy for network routing
5. **Database** - TimescaleDB for time-series data

## Data Models Documented

1. Task models (pending, running, completed, failed)
2. Kline models (OHLCV data)
3. Subscription models
4. Strategy models
5. Alert models
6. Account models (NEW - Spot, Futures)
7. WebSocket message models
8. Error models
9. Signal models

## Freshness

All codemaps tagged with: Last updated: 2026-03-01T04:42:00Z
